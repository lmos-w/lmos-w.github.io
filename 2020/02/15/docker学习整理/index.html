<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
<meta name="baidu-site-verification" content="lCV6DgG5F6" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Docker 学习整理一）docker 简介一：是什么1：为什么会有 docker 出现？一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发 + 运维之间的协作我们需要关心很多东西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验">
<meta name="keywords" content="docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker学习整理">
<meta property="og:url" content="https:&#x2F;&#x2F;lmos-w.github.io&#x2F;2020&#x2F;02&#x2F;15&#x2F;docker%E5%AD%A6%E4%B9%A0%E6%95%B4%E7%90%86&#x2F;index.html">
<meta property="og:site_name" content="Lmos&#39;S  BLOG">
<meta property="og:description" content="Docker 学习整理一）docker 简介一：是什么1：为什么会有 docker 出现？一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发 + 运维之间的协作我们需要关心很多东西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214092808829.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214093322524.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214094843806.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214094909477.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214094954711.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214095432259.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214095957321.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021410010057.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214100234792.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021410191749.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214101949723.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214102137837.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214102408739.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021410263240.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214105430319.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214110345689.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214111909206.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214112514967.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214112657255.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214112805274.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214113244947.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214113737836.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214113755754.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021411482882.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214114927281.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021411501271.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214115054177.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214115125226.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214134145329.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214134333345.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021413571710.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214140007105.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214141323857.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214141454715.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214143107297.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214143740907.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214143728781.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214143504748.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214144519358.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214144709190.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214153443980.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214153718436.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214153758529.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214153817567.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214160419792.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214162115323.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214162216304.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214162419182.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;2019021416524882.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165411175.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165432255.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165514558.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165726577.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165739181.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214165959936.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214170338486.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214170503416.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214170735369.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214171443522.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214171612560.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214171703915.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214171846844.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214172108120.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214172230640.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214172405655.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174229956.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174355562.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174512677.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174613187.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174653715.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214174921883.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214175021950.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214175217730.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214175525322.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214175940479.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180103450.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180312456.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180429598.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180516228.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180541449.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180656547.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180826297.png">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180859535.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214180926563.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214181003547.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214181055918.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">
<meta property="og:updated_time" content="2020-04-18T08:27:29.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;img-blog.csdnimg.cn&#x2F;20190214092808829.png?x-oss-process=image&#x2F;watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70">

<link rel="canonical" href="https://lmos-w.github.io/2020/02/15/docker%E5%AD%A6%E4%B9%A0%E6%95%B4%E7%90%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Docker学习整理 | Lmos'S  BLOG</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lmos'S  BLOG</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://lmos-w.github.io/2020/02/15/docker%E5%AD%A6%E4%B9%A0%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Lmos">
      <meta itemprop="description" content="记录爬坑史">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lmos'S  BLOG">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          Docker学习整理
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-15 16:19:24" itemprop="dateCreated datePublished" datetime="2020-02-15T16:19:24+08:00">2020-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-18 16:27:29" itemprop="dateModified" datetime="2020-04-18T16:27:29+08:00">2020-04-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="Docker-学习整理"><a href="#Docker-学习整理" class="headerlink" title="Docker 学习整理"></a>Docker 学习整理</h3><hr><p><em><strong>一）docker 简介</strong></em></p><p><strong>一：是什么</strong></p><p>1：为什么会有 docker 出现？</p><pre><code>一款产品从开发到上线，从操作系统，到运行环境，再到应用配置。作为开发 + 运维之间的协作我们需要关心很多东西，这也是很多互联网公司都不得不面对的问题，特别是各种版本的迭代之后，不同版本环境的兼容，对运维人员都是考验  </code></pre><a id="more"></a>



<p>Docker 之所以发展如此迅速，也是因为它对此给出了一个标准化的解决方案。<br>环境配置如此麻烦，换一台机器，就要重来一次，费力费时。很多人想到，能不能从根本上解决问题，软件可以带环境安装？也就是说，安装的时候，把原始环境一模一样地复制过来。开发人员利用 Docker 可以消除协作编码时 “在我的机器上可正常工作” 的问题。</p>
<p><img src="https://img-blog.csdnimg.cn/20190214092808829.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<pre><code> 之前在服务器配置一个应用的运行环境，要安装各种软件，Java/Tomcat/MySQL/JDBC 驱动包等。安装和配置这些东西有多麻烦就不说了，它还不能跨平台。假如我们是在 Windows 上安装的这些环境，到了 Linux 又得重新装。况且就算不跨操作系统，换另一台同样操作系统的服务器，要移植应用也是非常麻烦的。

传统上认为，软件编码开发 / 测试结束后，所产出的成果即是程序或是能够编译执行的二进制字节码等 (java 为例)。而为了让这些程序可以顺利执行，开发团队也得准备完整的部署文件，让维运团队得以部署应用程式，开发需要清楚的告诉运维部署团队，用的全部配置文件 + 所有软件环境。不过，即便如此，仍然常常发生部署失败的状况。Docker 镜像的设计，使得 Docker 得以打破过去「程序即应用」的观念。透过镜像(images) 将作业系统核心除外，运作应用程式所需要的系统环境，由下而上打包，达到应用程式跨平台间的无缝接轨运作。</code></pre><p>2 ：docker 理念</p>
<p>Docker 是基于 Go 语言实现的云开源项目。<br>Docker 的主要目标是 “Build，Ship and Run Any App,Anywhere”，也就是通过对应用组件的封装、分发、部署、运行等生命周期的管理，使用户的 APP（可以是一个 WEB 应用或数据库应用等等）及其运行环境能够做到 “一次封装，到处运行”。</p>
<p><img src="https://img-blog.csdnimg.cn/20190214093322524.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>Linux 容器技术的出现就解决了这样一个问题，而 Docker 就是在它的基础上发展过来的。将应用运行在 Docker 容器上面，而 Docker 容器在任何操作系统上都是一致的，这就实现了跨平台、跨服务器。只需要一次配置好环境，换到别的机子上就可以一键部署好，大大简化了操作，一句话：解决了运行环境和配置问题软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。</p>
<p><strong>二：能干嘛？</strong></p>
<p>1：之前的虚拟技术</p>
<p>虚拟机（virtual machine）就是带环境安装的一种解决方案。<br>它可以在一种操作系统里面运行另一种操作系统，比如在 Windows 系统里面运行 Linux 系统。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响。这类虚拟机完美的运行了另一套系统，能够使应用程序，操作系统和硬件三者之间的逻辑不变。  </p>
<p>虚拟机的缺点：<br>1    资源占用多               2    冗余步骤多                 3    启动慢</p>
<p>2：容器的虚拟化技术</p>
<p>由于前面虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（Linux Containers，缩写为 LXC）。<br>Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。有了容器，就可以将软件运行所需的所有资源打包到一个隔离的容器中。容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的库资源和设置。系统因此而变得高效轻量并保证部署在任何环境中的软件都能始终如一地运行。而 Docker 就是在它的基础上发展过来的。  </p>
<p>比较了 Docker 和传统虚拟化方式的不同之处：  </p>
<ul>
<li>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；  </li>
<li>而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。  </li>
<li>每个容器之间互相隔离，每个容器有自己的文件系统 ，容器之间进程不会相互影响，能区分计算资源。</li>
</ul>
<p>3：docker 容器好处：</p>
<p>一次构建，随处运行</p>
<p>1 更快速的应用交付和部署</p>
<pre><code>传统的应用开发完成后，需要提供一堆安装程序和配置说明文档，安装部署后需根据配置文档进行繁杂的配置才能正常运行。Docker 化之后只需要交付少量容器镜像文件，在正式生产环境加载镜像并运行即可，应用安装配置在镜像里已经内置好，大大节省部署配置和测试验证时间。</code></pre><p>2 更便捷的升级和扩缩容</p>
<pre><code>随着微服务架构和 Docker 的发展，大量的应用会通过微服务方式架构，应用的开发构建将变成搭乐高积木一样，每个 Docker 容器将变成一块 “积木”，应用的升级将变得非常容易。当现有的容器不足以支撑业务处理时，可通过镜像运行新的容器进行快速扩容，使应用系统的扩容从原先的天级变成分钟级甚至秒级。</code></pre><p>3 更简单的系统运维</p>
<pre><code>应用容器化运行后，生产环境运行的应用可与开发、测试环境的应用高度一致，容器会将应用程序相关的环境和状态完全封装起来，不会因为底层基础架构和操作系统的不一致性给应用带来影响，产生新的 BUG。当出现程序异常时，也可以通过测试环境的相同容器进行快速定位和修复。</code></pre><p>4 更高效的计算资源利用</p>
<p>Docker 是内核级虚拟化，其不像传统的虚拟化技术一样需要额外的 Hypervisor 支持，所以在一台物理机上可以运行很多个容器实例，可大大提升物理服务器的 CPU 和内存的利用率。</p>
<p><strong>三：去哪下载？</strong></p>
<p><strong>docker 官网</strong>：</p>
<p><strong>docker 官网：<a href="http://www.docker.com" target="_blank" rel="noopener">http://www.docker.com</a></strong></p>
<p><strong>docker 中文网站：<a href="https://www.docker-cn.com/" target="_blank" rel="noopener">https://www.docker-cn.com/</a></strong></p>
<p><strong>仓库：</strong></p>
<p><strong>Docker Hub 官网: <a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></strong></p>
<p>四：安装说明</p>
<p>CentOS Docker 安装<br>Docker 支持以下的 CentOS 版本：<br>CentOS 7 (64-bit)<br>CentOS 6.5 (64-bit) 或更高的版本  </p>
<p>前提条件<br>目前，CentOS 仅发行版本中的内核支持 Docker。<br>Docker 运行在 CentOS 7 上，要求系统为 64 位、系统内核版本为 3.10 以上。<br>Docker 运行在 CentOS-6.5 或更高的版本的 CentOS 上，要求系统为 64 位、系统内核版本为 2.6.32-431 或者更高版本。  </p>
<p>查看自己的内核<br>uname 命令用于打印当前系统相关信息（内核版本号、硬件架构、主机名称和操作系统类型等）。</p>
<p><img src="https://img-blog.csdnimg.cn/20190214094843806.png" alt></p>
<p>查看已安装的 CentOS 版本信息（CentOS6.8 有，CentOS7 无该命令）</p>
<p><img src="https://img-blog.csdnimg.cn/20190214094909477.png" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214094954711.png" alt></p>
<p><strong>五 docker 的基本组成架构：</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20190214095432259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><em><strong>二）docker 安装</strong></em></p>
<p><strong>一 CentOS6.8 安装 Docker</strong></p>
<p>1.yum install -y epel-release</p>
<p>Docker 使用 EPEL 发布，RHEL 系的 OS 首先要确保已经持有 EPEL 仓库，否则先检查 OS 的版本，然后安装相应的 EPEL 包。</p>
<p><img src="https://img-blog.csdnimg.cn/20190214095957321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2 yum install -y docker-io</p>
<p><img src="https://img-blog.csdnimg.cn/2019021410010057.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<ol start="3">
<li>安装后的配置文件：/etc/sysconfig/docker</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20190214100234792.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4 启动 Docker 后台服务：service docker start</p>
<p>5 docker version 验证</p>
<p><strong>二 CentOS7 安装 Docker</strong></p>
<p><a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/centos/</a></p>
<p>1 官网中文安装参考手册 <a href="https://docs.docker-cn.com/engine/installation/linux/docker-ce/centos/#prerequisites" target="_blank" rel="noopener">https://docs.docker-cn.com/engine/installation/linux/docker-ce/centos/#prerequisites</a></p>
<p>2 确定你是 CentOS7 及以上版本 cat /etc/redhat-release</p>
<p>3 yum 安装 gcc 相关  </p>
<pre><code>1：CentOS7 能上外网  ![](https://img-blog.csdnimg.cn/20190214100546410.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70)

2：yum -y install gcc

3：yum -y install gcc-c++</code></pre><p>   4 卸载旧版本</p>
<p>   1：yum -y remove docker docker-common docker-selinux docker-engine</p>
<p>   2：yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-selinux \<br>                  docker-engine-selinux \<br>                  docker-engine</p>
<p>5 安装需要的软件包    yum install -y yum-utils device-mapper-persistent-data lvm2</p>
<p>6 设置 stable 镜像仓库</p>
<p>大坑：yum-config-manager –add-repo <a href="https://download.docker.com/linux/centos/docker-ce.repo" target="_blank" rel="noopener">https://download.docker.com/linux/centos/docker-ce.repo</a></p>
<p>推荐：yum-config-manager –add-repo <a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a></p>
<p>7 更新 yum 软件包索引   yum makecache fast</p>
<p>8 安装 DOCKER CE    yum -y install docker-ce</p>
<p>9 启动 docker   systemctl start docker</p>
<p>10 测试     docker version      docker run hello-world</p>
<p>11 配置镜像加速</p>
<pre><code>1 mkdir -p /etc/docker

2 vim  /etc/docker/daemon.json     </code></pre><h1 id="网易云"><a href="#网易云" class="headerlink" title="网易云"></a>网易云</h1><p> {“registry-mirrors”: [“<a href="http://hub-mirror.c.163.com&quot;]" target="_blank" rel="noopener">http://hub-mirror.c.163.com&quot;]</a> }  </p>
<h1 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h1><p> {<br>  “registry-mirrors”: [“https://｛自已的编码｝.mirror.aliyuncs.com”]<br> }</p>
<p>  3 systemctl daemon-reload</p>
<p>  4 systemctl restart docker</p>
<p>12 卸载    1 systemctl stop docker  2 yum -y remove docker-ce  3 rm -rf /var/lib/docker</p>
<p><strong>三：阿里云镜像加速</strong></p>
<p> 1 是什么.<a href="https://dev.aliyun.com/search.html" target="_blank" rel="noopener">https://dev.aliyun.com/search.html</a></p>
<p> 2 注册一个属于自己的阿里云账户 (可复用淘宝账号)</p>
<p> 3 获得加速器地址连接 </p>
<p> 3.1 登陆阿里云开发者平台</p>
<p> <img src="https://img-blog.csdnimg.cn/2019021410191749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.2 获取加速器地址</p>
<p><img src="https://img-blog.csdnimg.cn/20190214101949723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4 配置本机 Docker 运行镜像加速器</p>
<p>鉴于国内网络问题，后续拉取 Docker 镜像十分缓慢，我们可以需要配置加速器来解决，<br>我使用的是阿里云的本人自己账号的镜像地址 (需要自己注册有一个属于你自己的)：   <a href="https://xxxx.mirror.aliyuncs.com" target="_blank" rel="noopener">https://xxxx.mirror.aliyuncs.com</a>  </p>
<ul>
<li>vim /etc/sysconfig/docker<br>将获得的自己账户下的阿里云加速地址配置进<br>other_args=”–registry-mirror=https:// 你自己的账号加速信息. mirror.aliyuncs.com”</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20190214102137837.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>5 重新启动 Docker 后台服务：service docker restart</p>
<p>6 Linux 系统下配置完加速器需要检查是否生效</p>
<p> 如果从结果中看到了配置的 –registry-mirror 参数说明配置成功，如下所示:</p>
<p>网易云加速基本同阿里云一样，配置 Json 串的地方不同了:</p>
<p><img src="https://img-blog.csdnimg.cn/20190214102408739.png" alt></p>
<p> {<br> “registry-mirrors”: [“<a href="http://hub-mirror.c.163.com&quot;]" target="_blank" rel="noopener">http://hub-mirror.c.163.com&quot;]</a><br>}</p>
<p><strong>四 启动 Docker 后台容器 (测试运行 hello-world)</strong></p>
<p><strong>五 底层原理</strong></p>
<p><strong>1 Docker 是一个 Client-Server 结构的系统，Docker 守护进程运行在主机上， 然后通过 Socket 连接从客户端访问，守护进程从客户端接受命令并管理运行在主机上的容器。 容器，是一个运行时环境，就是我们前面说到的集装箱。</strong><img src="https://img-blog.csdnimg.cn/2019021410263240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2 为什么 Docker 比较比 VM 快</p>
<p>(1)docker 有着比虚拟机更少的抽象层。由亍 docker 不需要 Hypervisor 实现硬件资源虚拟化, 运行在 docker 容器上的程序直接使用的都是实际物理机的硬件资源。因此在 CPU、内存利用率上 docker 将会在效率上有明显优势。  </p>
<p>(2)docker 利用的是宿主机的内核, 而不需要 Guest OS。因此, 当新建一个容器时, docker 不需要和虚拟机一样重新加载一个操作系统内核。从而避免查寻、加载操作系统内核返回比较费时费资源的过程, 当新建一个虚拟机时, 虚拟机软件需要加载 Guest OS, 返个新建过程是分钟级别的。而 docker 由于直接利用宿主机的操作系统, 则省略了返个过程, 因此新建一个 docker 容器只需要几秒钟。</p>
<p><em><strong>三）docker 常用命令</strong></em></p>
<p>一 帮助命令 docker version     docker info   docker –help</p>
<p>二 镜像命令 </p>
<p>1docker images  列出本地主机上的镜像</p>
<p><img src="https://img-blog.csdnimg.cn/20190214105430319.png" alt></p>
<p>各个选项说明:<br>REPOSITORY：表示镜像的仓库源<br>TAG：镜像的标签<br>IMAGE ID：镜像 ID<br>CREATED：镜像创建时间<br>SIZE：镜像大小<br> 同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，我们使用 REPOSITORY:TAG 来定义不同的镜像。<br>如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker 将默认使用 ubuntu:latest 镜像</p>
<p>OPTIONS 说明：-a : 列出本地所有的镜像（含中间映像层）</p>
<pre><code>-q : 只显示镜像 ID。

--digests : 显示镜像的摘要信息

--no-trunc : 显示完整的镜像信息</code></pre><p>2docker search 某个 XXX 镜像名字</p>
<p><a href="https://hub.docker.com" target="_blank" rel="noopener">https://hub.docker.com</a></p>
<p>docker search [OPTIONS] 镜像名字   –no-trunc : 显示完整的镜像描述   -s : 列出收藏数不小于指定值的镜像。  –automated : 只列出 automated build 类型的镜像；</p>
<p>3docker pull 某个 XXX 镜像名字   下载镜像  docker pull 镜像名字 [:TAG]</p>
<p>4 docker rmi 某个 XXX 镜像名字 ID   单个 docker rmi  -f 镜像 ID   多个 docker rmi -f 镜像名 1:TAG 镜像名 2:TAG  全部 docker rmi -f $(docker images -qa)</p>
<p>三 容器命令</p>
<p>有镜像才能创建容器，这是根本前提 (下载一个 CentOS 镜像演示)</p>
<p>1 新建并启动容器 docker run [OPTIONS] IMAGE [COMMAND] [ARG…]</p>
<p>OPTIONS 说明（常用）：有些是一个减号，有些是两个减号  </p>
<p>–: 为容器指定一个名称；<br>-d: 后台运行容器，并返回容器 ID，也即启动守护式容器；<br>-i：以交互模式运行容器，通常与 -t 同时使用；<br>-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；<br>-P: 随机端口映射；<br>-p: 指定端口映射，有以下四种格式<br>      ip:hostPort:containerPort<br>      ip::containerPort<br>      hostPort:containerPort<br>      containerPort</p>
<p>启动交互式容器 </p>
<p><img src="https://img-blog.csdnimg.cn/20190214110345689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>#使用镜像 centos:latest 以交互模式启动一个容器, 在容器内执行 / bin/bash 命令。<br>docker run -it centos /bin/bash </p>
<p>2 列出当前所有正在运行的容器  docker ps [OPTIONS]</p>
<p>OPTIONS 说明（常用）：  </p>
<p>-a : 列出当前所有正在运行的容器 + 历史上运行过的<br>-l : 显示最近创建的容器。<br>-n：显示最近 n 个创建的容器。<br>-q : 静默模式，只显示容器编号。<br>–no-trunc : 不截断输出。</p>
<p>3 退出容器 </p>
<p> 容器停止退出  exit     </p>
<p> 容器不停止退出 ctrl+P+Q</p>
<p>4 启动容器  docker start 容器 ID 或者容器名</p>
<p>5 重启容器 docker restart 容器 ID 或者容器名</p>
<p>6 停止容器  docker stop 容器 ID 或者容器名</p>
<p>7 强制停止容器 docker kill 容器 ID 或者容器名</p>
<p>8 删除已停止的容器  docker rm 容器 ID  一次性删除多个容器  docker rm -f $(docker ps -a -q)   docker ps -a -q | xargs docker rm</p>
<p>important</p>
<p>9 启动守护式容器 docker run -d 容器名  </p>
<p>#使用镜像 centos:latest 以后台模式启动一个容器<br>docker run -d centos  </p>
<p>问题：然后 docker ps -a 进行查看, 会发现容器已经退出<br>很重要的要说明的一点: Docker 容器后台运行, 就必须有一个前台进程.<br>容器运行的命令如果不是那些一直挂起的命令（比如运行 top，tail），就是会自动退出的。  </p>
<p>这个是 docker 的机制问题, 比如你的 web 容器, 我们以 nginx 为例，正常情况下, 我们配置启动服务只需要启动响应的 service 即可。例如<br>service nginx start<br>但是, 这样做, nginx 为后台进程模式运行, 就导致 docker 前台没有运行的应用,<br>这样的容器后台启动后, 会立即自杀因为他觉得他没事可做了.<br>所以，最佳的解决方案是, 将你要运行的程序以前台进程的形式运行</p>
<p>其实，docker 容器就是容器，是没有后台前台后端前端之分的，他本质就是一个被隔离的进程</p>
<p>10 查看容器日志  docker logs -f -t –tail 容器 ID</p>
<p>docker run -d centos /bin/sh -c “while true;do echo hello zzyy;sleep 2;done”</p>
<ul>
<li>-t 是加入时间戳  </li>
<li>-f 跟随最新的日志打印  </li>
<li>–tail 数字 显示最后多少条</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20190214111909206.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>10 查看容器内运行的进程  docker top 容器 ID</p>
<p>11 查看容器内部细节  docker inspect 容器 ID</p>
<p>12 进入正在运行的容器并以命令行交互   docker exec -it 容器 ID bashShell   是在容器中打开新的终端，并且可以启动新的进程</p>
<p><img src="https://img-blog.csdnimg.cn/20190214112514967.png" alt></p>
<p>重新进入 docker attach 容器 ID    直接进入容器启动命令的终端，不会启动新的进程</p>
<p>13 从容器内拷贝文件到主机上    docker cp  容器 ID: 容器内路径 目的主机路径</p>
<p><img src="https://img-blog.csdnimg.cn/20190214112657255.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>常用命令总结：</p>
<p><img src="https://img-blog.csdnimg.cn/20190214112805274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><em><strong>四）docker 镜像</strong></em></p>
<p>一：是什么</p>
<pre><code>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</code></pre><p>1.UnionFS（联合文件系统）：Union 文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下 (unite several directories into a single virtual filesystem)。Union 文件系统是 Docker 镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。<br> <img src="https://img-blog.csdnimg.cn/20190214113244947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt><br>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</p>
<p>2 Docker 镜像加载原理</p>
<p>Docker 镜像加载原理：<br>   docker 的镜像实际上由一层一层的文件系统组成，这种层级的文件系统 UnionFS。<br>bootfs(boot file system) 主要包含 bootloader 和 kernel, bootloader 主要是引导加载 kernel, Linux 刚启动时会加载 bootfs 文件系统，在 Docker 镜像的最底层是 bootfs。这一层与我们典型的 Linux/Unix 系统是一样的，包含 boot 加载器和内核。当 boot 加载完成之后整个内核就都在内存中了，此时内存的使用权已由 bootfs 转交给内核，此时系统也会卸载 bootfs。  </p>
<p>rootfs (root file system) ，在 bootfs 之上。包含的就是典型 Linux 系统中的 /dev, /proc, /bin, /etc 等标准目录和文件。rootfs 就是各种不同的操作系统发行版，比如 Ubuntu，Centos 等等。<br><img src="https://img-blog.csdnimg.cn/20190214113737836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>平时我们安装进虚拟机的 CentOS 都是好几个 G，为什么 docker 这里才 200M？？</p>
<p><img src="https://img-blog.csdnimg.cn/20190214113755754.png" alt></p>
<p>对于一个精简的 OS，rootfs 可以很小，只需要包括最基本的命令、工具和程序库就可以了，因为底层直接用 Host 的 kernel，自己只需要提供 rootfs 就行了。由此可见对于不同的 linux 发行版, bootfs 基本是一致的, rootfs 会有差别, 因此不同的发行版可以公用 bootfs。</p>
<p>3 分层的镜像    以我们的 pull 为例，在下载的过程中我们可以看到 docker 的镜像好像是在一层一层的在下载</p>
<p>4 为什么 Docker 镜像要采用这种分层结构呢   </p>
<p> 最大的一个好处就是 - 共享资源<br>比如：有多个镜像都从相同的 base 镜像构建而来，那么宿主机只需在磁盘上保存一份 base 镜像，<br>同时内存中也只需加载一份 base 镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。</p>
<p>5 特点 </p>
<p>Docker 镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作 “容器层”，“容器层” 之下的都都叫“镜像层”。</p>
<p>6 Docker 镜像 commit 操作补充</p>
<p>   docker commit 提交容器副本使之成为一个新的镜像，</p>
<p>   docker commit -m=“提交的描述信息” -a=“作者” 容器 ID 要创建的目标镜像名:[标签名]</p>
<p>案例演示：1. 从 Hub 上下载 tomcat 镜像到本地并成功运行</p>
<pre><code>       ![](https://img-blog.csdnimg.cn/20190214114705728.png)

       ![](https://img-blog.csdnimg.cn/20190214114722149.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70)

     docker run -it -p 8080:8080 tomcat  （-p 主机端口: docker 容器端口  -P 随机分配端口 i: 交互 t: 终端）

2 故意删除上一步镜像生产 tomcat 容器的文档</code></pre><p><img src="https://img-blog.csdnimg.cn/2019021411482882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214114927281.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3 也即当前的 tomcat 运行实例是一个没有文档内容的容器，<br>以它为模板 commit 一个没有 doc 的 tomcat 新镜像 atguigu/tomcat02</p>
<p><img src="https://img-blog.csdnimg.cn/2019021411501271.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p> 4 启动我们的新镜像并和原来的对比 </p>
<p>启动 atguigu/tomcat02，它没有 docs </p>
<p>  <img src="https://img-blog.csdnimg.cn/20190214115054177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>新启动原来的 tomcat，它有 docs</p>
<p><img src="https://img-blog.csdnimg.cn/20190214115125226.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><em><strong>五）docker 容器数据卷</strong></em></p>
<p>一 是什么    一句话：有点类似我们 Redis 里面的 rdb 和 aof 文件</p>
<p>先来看看 Docker 的理念：  </p>
<ul>
<li>将应用与运行的环境打包形成容器运行 ，运行可以伴随着容器，但是我们对数据的要求希望是持久化的  </li>
<li>容器之间希望有可能共享数据</li>
</ul>
<p>Docker 容器产生的数据，如果不通过 docker commit 生成新的镜像，使得数据做为镜像的一部分保存下来，<br>那么当容器删除后，数据自然也就没有了。</p>
<p>为了能保存数据在 docker 中我们使用卷。</p>
<p>二  能干嘛</p>
<p>卷就是目录或文件，存在于一个或多个容器中，由 docker 挂载到容器，但不属于联合文件系统，因此能够绕过 Union File System 提供一些用于持续存储或共享数据的特性：  </p>
<p> 卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此 Docker 不会在容器删除时删除其挂载的数据卷</p>
<p>特点：<br>1：数据卷可在容器之间共享或重用数据<br>2：卷中的更改可以直接生效<br>3：数据卷中的更改不会包含在镜像的更新中<br>4：数据卷的生命周期一直持续到没有容器使用它为止</p>
<p>容器的持久化     容器间继承 + 共享数据</p>
<p>三 数据卷  </p>
<p> 容器内添加  </p>
<p>1 直接命令添加    docker run -it -v / 宿主机绝对路径目录:/ 容器内目录      镜像名</p>
<p> docker run -it -v / 宿主机目录:/ 容器内目录 centos /bin/bash  </p>
<p><img src="https://img-blog.csdnimg.cn/20190214134145329.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p> 查看数据卷是否挂载成功</p>
<p>docker inspect 容器 ID<br><img src="https://img-blog.csdnimg.cn/20190214134333345.png" alt></p>
<p>容器和宿主机之间数据共享</p>
<p><img src="https://img-blog.csdnimg.cn/2019021413571710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>容器停止退出后，主机修改后数据是否同步</p>
<p><img src="https://img-blog.csdnimg.cn/20190214140007105.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>容器重启后，会从挂载目录加载数据</p>
<p>2  DockerFile 添加</p>
<p>2.1 根目录下新建 mydocker 文件夹并进入</p>
<p>2.2 可在 Dockerfile 中使用 VOLUME 指令来给镜像添加一个或多个数据卷</p>
<p>VOLUME[“/dataVolumeContainer”,”/dataVolumeContainer2”,”/dataVolumeContainer3”]  </p>
<p>说明：  </p>
<p>出于可移植和分享的考虑，用 - v 主机目录: 容器目录这种方法不能够直接在 Dockerfile 中实现。<br>由于宿主机目录是依赖于特定宿主机的，并不能够保证在所有的宿主机上都存在这样的特定目录。</p>
<p>2.3 File 构建</p>
<p><img src="https://img-blog.csdnimg.cn/20190214141323857.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<h1 id="volume-test"><a href="#volume-test" class="headerlink" title="volume test"></a>volume test</h1><p>FROM centos<br>VOLUME [“/dataVolumeContainer1”,”/dataVolumeContainer2”]<br>CMD echo “finished,——–success1”<br>CMD /bin/bash</p>
<p>2.4build 后生成镜像   获得一个新镜像 zzyy/centos</p>
<p><img src="https://img-blog.csdnimg.cn/20190214141454715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.5 run 容器</p>
<p><img src="https://img-blog.csdnimg.cn/20190214143107297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.6 通过上述步骤，容器内的卷目录地址已经知道<br>对应的主机目录地址哪？？</p>
<p><img src="https://img-blog.csdnimg.cn/20190214143740907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214143728781.png" alt></p>
<p>2.7 主机对应默认地址</p>
<p><img src="https://img-blog.csdnimg.cn/20190214143504748.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.8 备注  Docker 挂载主机目录 Docker 访问出现 cannot open directory .: Permission denied<br>解决办法：在挂载目录后多加一个 –privileged=true 参数即可</p>
<p>四 数据卷容器</p>
<ol>
<li>是什么</li>
</ol>
<p>命名的容器挂载数据卷，其它容器通过挂载这个 (父容器) 实现数据共享，挂载数据卷的容器，称之为数据卷容器</p>
<ol start="2">
<li>总体介绍</li>
</ol>
<p>以上一步新建的镜像 zzyy/centos 为模板并运行容器 dc01/dc02/dc03</p>
<p>它们已经具有容器卷  /dataVolumeContainer1   /dataVolumeContainer2</p>
<p>3 容器间传递共享 (–volumes-from)</p>
<p>3.1 先启动一个父容器 dc01  在 dataVolumeContainer2 新增内容</p>
<p><img src="https://img-blog.csdnimg.cn/20190214144519358.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.2 dc02/dc03 继承自 dc01    –volumes-from</p>
<p>docker run -it –name dc02 –volumes-from dc01 zzyy/centos</p>
<p><img src="https://img-blog.csdnimg.cn/20190214144709190.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>dc02/dc03 分别在 dataVolumeContainer2 各自新增内容</p>
<p>3.3 回到 dc01 可以看到 02/03 各自添加的都能共享了</p>
<p><img src="https://img-blog.csdnimg.cn/20190214153443980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.4 删除 dc01，dc02 修改后 dc03 可否访问</p>
<p><img src="https://img-blog.csdnimg.cn/20190214153718436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.5 删除 dc02 后 dc03 可否访问</p>
<p><img src="https://img-blog.csdnimg.cn/20190214153758529.png" alt></p>
<p>3.6 新建 dc04 继承 dc03 后再删除 dc03</p>
<p><img src="https://img-blog.csdnimg.cn/20190214153817567.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.7 结论：容器之间配置信息的传递，数据卷的生命周期一直持续到没有容器使用它为止</p>
<p><em><strong>六）DockerFile 解析</strong></em></p>
<ol>
<li>是什么   Dockerfile 是用来构建 Docker 镜像的构建文件，是由一系列命令和参数构成的脚本（不同于 shell 脚本，他的一个命令会生成一个容器，修改提交生成镜像，再删除这个临时的容器）。</li>
</ol>
<p>构建三步骤  1.1 编写 Dockerfile 文件 1.2 docker build  1.3 docker run</p>
<p>2.DockerFile 构建过程解析 </p>
<p>   2.1 Dockerfile 内容基础知识 </p>
<pre><code> 2.1 .1：每条保留字指令都必须为大写字母且后面要跟随至少一个参数

 2.1.2：指令按照从上到下，顺序执行

 2.1.3：# 表示注释

2.1.4：每条指令都会创建一个新的镜像层，并对镜像进行提交</code></pre><p>  2.2 Docker 执行 Dockerfile 的大致流程</p>
<p>   （1）docker 从基础镜像运行一个容器</p>
<p>   （2）执行一条指令并对容器作出修改</p>
<p>   （3）执行类似 docker commit 的操作提交一个新的镜像层 (另一种说法是 对容器 执行 docker commit 操作 生成新的镜像层，删           除这个容器)</p>
<p>  （4）docker 再基于刚提交的镜像运行一个新容器</p>
<p>   （5）执行 dockerfile 中的下一条指令直到所有指令都执行完成</p>
<p>  2.3. 小总结</p>
<p>从应用软件的角度来看，Dockerfile、Docker 镜像与 Docker 容器分别代表软件的三个不同阶段，  </p>
<ul>
<li>Dockerfile 是软件的原材料（比如说：建房子，原材料，钢材，木料等等）  </li>
<li>Docker 镜像是软件的交付品（建好的别墅，交付了（未拆封的））  </li>
<li>Docker 容器则可以认为是软件的运行态。（客户购买，拎包入住了（提供服务））<br>Dockerfile 面向开发，Docker 镜像成为交付标准，Docker 容器则涉及部署与运维，三者缺一不可，合力充当 Docker 体系的基石。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20190214160419792.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<pre><code> 2.3.1 Dockerfile，需要定义一个 Dockerfile，Dockerfile 定义了进程需要的一切东西。Dockerfile 涉及的内容包括执行代码或者是文件、环境变量、依赖包、运行时环境、动态链接库、操作系统的发行版、服务进程和内核进程 (当应用进程需要和系统服务和内核进程打交道，这时需要考虑如何设计 namespace 的权限控制) 等等;  

2.3. 2 Docker 镜像，在用 Dockerfile 定义一个文件之后，docker build 时会产生一个 Docker 镜像，当运行 Docker 镜像时，会真正开始提供服务;  

 2.3.3 Docker 容器，容器是直接提供服务的。</code></pre><p>3.DockerFile 体系结构 (保留字指令)</p>
<p> FROM   基础镜像，当前新镜像是基于哪个镜像的</p>
<p> MAINTAINER 镜像维护者的姓名和邮箱地址</p>
<p> RUN 容器构建时需要运行的命令</p>
<p> EXPOSE 当前容器对外暴露出的端口</p>
<p> WORKDIR  指定在创建容器后，终端默认登陆的进来工作目录，一个落脚点</p>
<p> ENV 用来在构建镜像过程中设置环境变量  </p>
<pre><code>ENV MY_PATH /usr/mytest  
这个环境变量可以在后续的任何 RUN 指令中使用，这就如同在命令前面指定了环境变量前缀一样；  
也可以在其它指令中直接使用这些环境变量， 比如：WORKDIR $MY_PATH</code></pre><p>ADD  将宿主机目录下的文件拷贝进镜像且 ADD 命令会自动处理 URL 和解压 tar 压缩包</p>
<p>COPY    类似 ADD，拷贝文件和目录到镜像中。将从构建上下文目录中 &lt;源路径&gt; 的文件 / 目录复制到新的一层的镜像内的 &lt; 目标                路径 &gt; 位置  COPY src dest       COPY [“src”, “dest”]</p>
<p>VOLUME   容器数据卷，用于数据保存和持久化工作</p>
<p>CMD  指定一个容器启动时要运行的命令   Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之            后的参数替换</p>
<p>ENTRYPOINT  指定一个容器启动时要运行的命令   ENTRYPOINT 的目的和 CMD 一样，都是在指定容器启动程序及参数</p>
<p>ONBUILD 当构建一个被继承的 Dockerfile 时运行命令，父镜像在被子继承后父镜像的 onbuild 被触发</p>
<p><img src="https://img-blog.csdnimg.cn/20190214162115323.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214162216304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>小结：<img src="https://img-blog.csdnimg.cn/20190214162419182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<ol start="4">
<li>案例</li>
</ol>
<p>4.1 Base 镜像 (scratch)</p>
<p> Docker Hub 中 99% 的镜像都是通过在 base 镜像中安装和配置需要的软件构建出来的</p>
<p><img src="https://img-blog.csdnimg.cn/2019021416524882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.2 自定义镜像 mycentos</p>
<p>4.2.1 编写  </p>
<pre><code>Hub 默认 CentOS 镜像什么情况</code></pre><p><img src="https://img-blog.csdnimg.cn/20190214165411175.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>准备编写 DockerFile 文件</p>
<p><img src="https://img-blog.csdnimg.cn/20190214165432255.png" alt></p>
<p>myCentOS 内容 DockerFile</p>
<p><img src="https://img-blog.csdnimg.cn/20190214165514558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>FROM centos<br>MAINTAINER zzyy<a href="mailto:&#x7a;&#122;&#121;&#121;&#49;&#54;&#55;&#x40;&#x31;&#50;&#x36;&#46;&#x63;&#x6f;&#109;">&#x7a;&#122;&#121;&#121;&#49;&#54;&#55;&#x40;&#x31;&#50;&#x36;&#46;&#x63;&#x6f;&#109;</a>  </p>
<p>ENV MYPATH /usr/local<br>WORKDIR $MYPATH  </p>
<p>RUN yum -y install vim<br>RUN yum -y install net-tools  </p>
<p>EXPOSE 80  </p>
<p>CMD echo $MYPATH<br>CMD echo “success————–ok”<br>CMD /bin/bash<br>4.2.2 构建</p>
<p>docker build -t 新镜像名字: TAG .    会看到 docker build 命令最后有一个 .                                   . 表示当前目录</p>
<p><img src="https://img-blog.csdnimg.cn/20190214165726577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214165739181.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.2.3 运行 docker run -it 新镜像名字: TAG   可以看到，我们自己的新镜像已经支持 vim/ifconfig 命令，扩展成功了。</p>
<p><img src="https://img-blog.csdnimg.cn/20190214165959936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.2.4 列出镜像的变更历史   docker history 镜像名</p>
<p>4.3  CMD/ENTRYPOINT 镜像案例</p>
<p>4.3.1 都是指定一个容器启动时要运行的命令</p>
<p>4.3.2 CMD   Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替换</p>
<pre><code>ENTRYPOINT  docker run 之后的参数会被当做参数传递给 ENTRYPOINT，之后形成新的命令组合</code></pre><p><img src="https://img-blog.csdnimg.cn/20190214170338486.png" alt></p>
<p>4.3.3 栗子</p>
<p>  制作 CMD 版可以查询 IP 信息的容器</p>
<p>   FROM centos<br>  RUN yum install -y curl<br>  CMD [“curl”, “-s”, “<a href="http://ip.cn&quot;]" target="_blank" rel="noopener">http://ip.cn&quot;]</a></p>
<p><img src="https://img-blog.csdnimg.cn/20190214170503416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>curl 命令可以用来执行下载、发送各种 HTTP 请求，指定 HTTP 头部等操作。<br>如果系统没有 curl 可以使用 yum install curl 安装，也可以下载安装。<br>curl 是将下载文件输出到 stdout  </p>
<p>使用命令：curl <a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a><br>执行后，<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 的 html 就会显示在屏幕上了  </p>
<p>这是最简单的使用方法。用这个命令获得了 <a href="http://curl.haxx.se" target="_blank" rel="noopener">http://curl.haxx.se</a> 指向的页面，同样，如果这里的 URL 指向的是一个文件或者一幅图都可以直接下载到本地。如果下载的是 HTML 文档，那么缺省的将只显示文件头部，即 HTML 文档的 header。要全部显示，请加参数 -i</p>
<p><img src="https://img-blog.csdnimg.cn/20190214170735369.png" alt></p>
<p>我们可以看到可执行文件找不到的报错，executable file not found。<br>之前我们说过，跟在镜像名后面的是 command，运行时会替换 CMD 的默认值。<br>因此这里的 -i 替换了原来的 CMD，而不是添加在原来的 curl -s <a href="http://ip.cn" target="_blank" rel="noopener">http://ip.cn</a> 后面。而 -i 根本不是命令，所以自然找不到。  </p>
<p>那么如果我们希望加入 -i 这参数，我们就必须重新完整的输入这个命令：  </p>
<p>$ docker run myip curl -s <a href="http://ip.cn" target="_blank" rel="noopener">http://ip.cn</a> -i  </p>
<p>4.4 自定义镜像 Tomcat9</p>
<p>4.4.1 mkdir -p /zzyyuse/mydockerfile/tomcat9</p>
<p>4.4.2 在上述目录下 touch c.txt</p>
<p>4.4.3   将 jdk 和 tomcat 安装的压缩包拷贝进上一步目录   apache-tomcat-9.0.8.tar.gz    jdk-8u171-linux-x64.tar.gz</p>
<pre><code>![](https://img-blog.csdnimg.cn/20190214171230201.png)

![](https://img-blog.csdnimg.cn/20190214171219614.png)</code></pre><p>4.4.4 在 / zzyyuse/mydockerfile/tomcat9 目录下新建 Dockerfile 文件</p>
<pre><code>目录内容  ![](https://img-blog.csdnimg.cn/20190214171357585.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70)</code></pre><p>4.4.5 构建</p>
<p><img src="https://img-blog.csdnimg.cn/20190214171443522.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>构建完成</p>
<p><img src="https://img-blog.csdnimg.cn/20190214171612560.png" alt></p>
<p>4.4.6 run<br>docker run -d -p 9080:8080 –name myt9 -v /zzyyuse/mydockerfile/tomcat9/test:/usr/local/apache-tomcat-9.0.8/webapps/test -v /zzyyuse/mydockerfile/tomcat9/tomcat9logs/:/usr/local/apache-tomcat-9.0.8/logs –privileged=true zzyytomcat9</p>
<p><img src="https://img-blog.csdnimg.cn/20190214171703915.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>备注：<br>Docker 挂载主机目录 Docker 访问出现 cannot open directory .: Permission denied<br>解决办法：在挂载目录后多加一个 –privileged=true 参数即可</p>
<p>4.4.7 验证 </p>
<p><img src="https://img-blog.csdnimg.cn/20190214171846844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.4.8 结合前述的容器卷将测试的 web 服务 test 发布</p>
<pre><code>总体概述</code></pre><p><img src="https://img-blog.csdnimg.cn/20190214172108120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>web.xml</p>
<?xml version="1.0" encoding="UTF-8"?><p><br><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">  </web-app></p>
<p>  <display-name>test</display-name>  </p>


<p>a.jsp</p>
<p>&lt;%@ page language=”java” contentType=”text/html; charset=UTF-8” pageEncoding=”UTF-8”%&gt;<br><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  </p>
<html>  
  <head>  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <title>Insert title here</title>  
  </head>  
  <body>  
    -----------welcome------------  
    <%="i am in docker tomcat self"%>  
    <br>  
    <br>  
    <% system.out.println("="============docker" tomcat self");%>  
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></%></%="i><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>  
</html>

<p>测试</p>
<p><img src="https://img-blog.csdnimg.cn/20190214172230640.png" alt></p>
<p>4.5</p>
<p>总结：</p>
<p><img src="https://img-blog.csdnimg.cn/20190214172405655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><em><strong>七）Docker 常用安装</strong></em></p>
<ol>
<li>总体步骤</li>
</ol>
<p>搜索镜像  拉取镜像  查看镜像  启动镜像 停止容器  移除容器</p>
<ol start="2">
<li>安装 tomcat </li>
</ol>
<p>2.1 docker hub 上面查找 tomcat 镜像   docker search tomcat</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174229956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.2 从 docker hub 上拉取 tomcat 镜像到本地 docker pull tomcat</p>
<p>2.3 docker images 查看是否有拉取到的 tomcat</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174355562.png" alt></p>
<p>2.4 使用 tomcat 镜像创建容器 (也叫运行镜像)   docker run -it -p 8080:8080 tomcat</p>
<p>-p 主机端口: docker 容器端口   -P 随机分配端口   i: 交互  t: 终端</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174512677.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<ol start="3">
<li>安装 mysql</li>
</ol>
<p>3.1 docker hub 上面查找 mysql 镜像</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174613187.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.2 从 docker hub 上 (阿里云加速器) 拉取 mysql 镜像到本地标签为 5.6</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174653715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.3 使用 mysql5.6 镜像创建容器 (也叫运行镜像)</p>
<p>3.3.1 使用 mysql 镜像</p>
<p>docker run -p 12345:3306 –name mysql -v /zzyyuse/mysql/conf:/etc/mysql/conf.d -v /zzyyuse/mysql/logs:/logs -v /zzyyuse/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.6  </p>
<p>命令说明：<br>-p 12345:3306：将主机的 12345 端口映射到 docker 容器的 3306 端口。<br>–name mysql：运行服务名字<br>-v /zzyyuse/mysql/conf:/etc/mysql/conf.d ：将主机 / zzyyuse/mysql 录下的 conf/my.cnf 挂载到容器的 /etc/mysql/conf.d<br>-v /zzyyuse/mysql/logs:/logs：将主机 / zzyyuse/mysql 目录下的 logs 目录挂载到容器的 /logs。<br>-v /zzyyuse/mysql/data:/var/lib/mysql ：将主机 / zzyyuse/mysql 目录下的 data 目录挂载到容器的 /var/lib/mysql<br>-e MYSQL_ROOT_PASSWORD=123456：初始化 root 用户的密码。<br>-d mysql:5.6 : 后台程序运行 mysql5.6</p>
<p>docker exec -it MySQL 运行成功后的容器 ID     /bin/bash</p>
<p><img src="https://img-blog.csdnimg.cn/20190214174921883.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>3.3.2  外部 Win10 也来连接运行在 dokcer 上的 mysql 服务</p>
<p><img src="https://img-blog.csdnimg.cn/20190214175021950.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p> 3.3.3 数据备份小测试 (可以不做)<br>docker exec myql 服务容器 ID sh -c ‘exec mysqldump –all-databases -uroot -p”123456” ‘ &gt; /zzyyuse/all-databases.sql</p>
<ol start="4">
<li>安装 redis</li>
</ol>
<p>4.1 从 docker hub 上 (阿里云加速器) 拉取 redis 镜像到本地标签为 3.2</p>
<p><img src="https://img-blog.csdnimg.cn/20190214175217730.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.2 使用 redis3.2 镜像创建容器 (也叫运行镜像)</p>
<p>4.2.1 使用镜像  </p>
<p>docker run -p 6379:6379 -v /zzyyuse/myredis/data:/data -v /zzyyuse/myredis/conf/redis.conf:/usr/local/etc/redis/redis.conf  -d redis:3.2 redis-server /usr/local/etc/redis/redis.conf –appendonly yes</p>
<p><img src="https://img-blog.csdnimg.cn/20190214175525322.png" alt></p>
<p>4.2.2 在主机 / zzyyuse/myredis/conf/redis.conf 目录下新建 redis.conf 文件<br>vim /zzyyuse/myredis/conf/redis.conf/redis.conf</p>
<h1 id="Redis-configuration-file-example"><a href="#Redis-configuration-file-example" class="headerlink" title="Redis configuration file example."></a>Redis configuration file example.</h1><h1 id><a href="#" class="headerlink" title></a></h1><h1 id="Note-that-in-order-to-read-the-configuration-file-Redis-must-be"><a href="#Note-that-in-order-to-read-the-configuration-file-Redis-must-be" class="headerlink" title="Note that in order to read the configuration file, Redis must be"></a>Note that in order to read the configuration file, Redis must be</h1><h1 id="started-with-the-file-path-as-first-argument"><a href="#started-with-the-file-path-as-first-argument" class="headerlink" title="started with the file path as first argument:"></a>started with the file path as first argument:</h1><h1 id="-1"><a href="#-1" class="headerlink" title></a></h1><h1 id="redis-server-path-to-redis-conf"><a href="#redis-server-path-to-redis-conf" class="headerlink" title="./redis-server /path/to/redis.conf"></a>./redis-server /path/to/redis.conf</h1><h1 id="Note-on-units-when-memory-size-is-needed-it-is-possible-to-specify"><a href="#Note-on-units-when-memory-size-is-needed-it-is-possible-to-specify" class="headerlink" title="Note on units: when memory size is needed, it is possible to specify"></a>Note on units: when memory size is needed, it is possible to specify</h1><h1 id="it-in-the-usual-form-of-1k-5GB-4M-and-so-forth"><a href="#it-in-the-usual-form-of-1k-5GB-4M-and-so-forth" class="headerlink" title="it in the usual form of 1k 5GB 4M and so forth:"></a>it in the usual form of 1k 5GB 4M and so forth:</h1><h1 id="-2"><a href="#-2" class="headerlink" title></a></h1><h1 id="1k-gt-1000-bytes"><a href="#1k-gt-1000-bytes" class="headerlink" title="1k =&gt; 1000 bytes"></a>1k =&gt; 1000 bytes</h1><h1 id="1kb-gt-1024-bytes"><a href="#1kb-gt-1024-bytes" class="headerlink" title="1kb =&gt; 1024 bytes"></a>1kb =&gt; 1024 bytes</h1><h1 id="1m-gt-1000000-bytes"><a href="#1m-gt-1000000-bytes" class="headerlink" title="1m =&gt; 1000000 bytes"></a>1m =&gt; 1000000 bytes</h1><h1 id="1mb-gt-1024-1024-bytes"><a href="#1mb-gt-1024-1024-bytes" class="headerlink" title="1mb =&gt; 1024*1024 bytes"></a>1mb =&gt; 1024*1024 bytes</h1><h1 id="1g-gt-1000000000-bytes"><a href="#1g-gt-1000000000-bytes" class="headerlink" title="1g =&gt; 1000000000 bytes"></a>1g =&gt; 1000000000 bytes</h1><h1 id="1gb-gt-102410241024-bytes"><a href="#1gb-gt-102410241024-bytes" class="headerlink" title="1gb =&gt; 102410241024 bytes"></a>1gb =&gt; 1024<em>1024</em>1024 bytes</h1><h1 id="-3"><a href="#-3" class="headerlink" title></a></h1><h1 id="units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same"><a href="#units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same" class="headerlink" title="units are case insensitive so 1GB 1Gb 1gB are all the same."></a>units are case insensitive so 1GB 1Gb 1gB are all the same.</h1><p>################################## INCLUDES ###################################  </p>
<h1 id="Include-one-or-more-other-config-files-here-This-is-useful-if-you"><a href="#Include-one-or-more-other-config-files-here-This-is-useful-if-you" class="headerlink" title="Include one or more other config files here.  This is useful if you"></a>Include one or more other config files here.  This is useful if you</h1><h1 id="have-a-standard-template-that-goes-to-all-Redis-servers-but-also-need"><a href="#have-a-standard-template-that-goes-to-all-Redis-servers-but-also-need" class="headerlink" title="have a standard template that goes to all Redis servers but also need"></a>have a standard template that goes to all Redis servers but also need</h1><h1 id="to-customize-a-few-per-server-settings-Include-files-can-include"><a href="#to-customize-a-few-per-server-settings-Include-files-can-include" class="headerlink" title="to customize a few per-server settings.  Include files can include"></a>to customize a few per-server settings.  Include files can include</h1><h1 id="other-files-so-use-this-wisely"><a href="#other-files-so-use-this-wisely" class="headerlink" title="other files, so use this wisely."></a>other files, so use this wisely.</h1><h1 id="-4"><a href="#-4" class="headerlink" title></a></h1><h1 id="Notice-option-“include”-won’t-be-rewritten-by-command”CONFIG-REWRITE”"><a href="#Notice-option-“include”-won’t-be-rewritten-by-command”CONFIG-REWRITE”" class="headerlink" title="Notice option “include” won’t be rewritten by command”CONFIG REWRITE”"></a>Notice option “include” won’t be rewritten by command”CONFIG REWRITE”</h1><h1 id="from-admin-or-Redis-Sentinel-Since-Redis-always-uses-the-last-processed"><a href="#from-admin-or-Redis-Sentinel-Since-Redis-always-uses-the-last-processed" class="headerlink" title="from admin or Redis Sentinel. Since Redis always uses the last processed"></a>from admin or Redis Sentinel. Since Redis always uses the last processed</h1><h1 id="line-as-value-of-a-configuration-directive-you’d-better-put-includes"><a href="#line-as-value-of-a-configuration-directive-you’d-better-put-includes" class="headerlink" title="line as value of a configuration directive, you’d better put includes"></a>line as value of a configuration directive, you’d better put includes</h1><h1 id="at-the-beginning-of-this-file-to-avoid-overwriting-config-change-at-runtime"><a href="#at-the-beginning-of-this-file-to-avoid-overwriting-config-change-at-runtime" class="headerlink" title="at the beginning of this file to avoid overwriting config change at runtime."></a>at the beginning of this file to avoid overwriting config change at runtime.</h1><h1 id="-5"><a href="#-5" class="headerlink" title></a></h1><h1 id="If-instead-you-are-interested-in-using-includes-to-override-configuration"><a href="#If-instead-you-are-interested-in-using-includes-to-override-configuration" class="headerlink" title="If instead you are interested in using includes to override configuration"></a>If instead you are interested in using includes to override configuration</h1><h1 id="options-it-is-better-to-use-include-as-the-last-line"><a href="#options-it-is-better-to-use-include-as-the-last-line" class="headerlink" title="options, it is better to use include as the last line."></a>options, it is better to use include as the last line.</h1><h1 id="-6"><a href="#-6" class="headerlink" title></a></h1><h1 id="include-path-to-local-conf"><a href="#include-path-to-local-conf" class="headerlink" title="include /path/to/local.conf"></a>include /path/to/local.conf</h1><h1 id="include-path-to-other-conf"><a href="#include-path-to-other-conf" class="headerlink" title="include /path/to/other.conf"></a>include /path/to/other.conf</h1><p>################################## NETWORK #####################################  </p>
<h1 id="By-default-if-no-“bind”-configuration-directive-is-specified-Redis-listens"><a href="#By-default-if-no-“bind”-configuration-directive-is-specified-Redis-listens" class="headerlink" title="By default, if no “bind” configuration directive is specified, Redis listens"></a>By default, if no “bind” configuration directive is specified, Redis listens</h1><h1 id="for-connections-from-all-the-network-interfaces-available-on-the-server"><a href="#for-connections-from-all-the-network-interfaces-available-on-the-server" class="headerlink" title="for connections from all the network interfaces available on the server."></a>for connections from all the network interfaces available on the server.</h1><h1 id="It-is-possible-to-listen-to-just-one-or-multiple-selected-interfaces-using"><a href="#It-is-possible-to-listen-to-just-one-or-multiple-selected-interfaces-using" class="headerlink" title="It is possible to listen to just one or multiple selected interfaces using"></a>It is possible to listen to just one or multiple selected interfaces using</h1><h1 id="the-“bind”-configuration-directive-followed-by-one-or-more-IP-addresses"><a href="#the-“bind”-configuration-directive-followed-by-one-or-more-IP-addresses" class="headerlink" title="the “bind” configuration directive, followed by one or more IP addresses."></a>the “bind” configuration directive, followed by one or more IP addresses.</h1><h1 id="-7"><a href="#-7" class="headerlink" title></a></h1><h1 id="Examples"><a href="#Examples" class="headerlink" title="Examples:"></a>Examples:</h1><h1 id="-8"><a href="#-8" class="headerlink" title></a></h1><h1 id="bind-192-168-1-100-10-0-0-1"><a href="#bind-192-168-1-100-10-0-0-1" class="headerlink" title="bind 192.168.1.100 10.0.0.1"></a>bind 192.168.1.100 10.0.0.1</h1><h1 id="bind-127-0-0-1-1"><a href="#bind-127-0-0-1-1" class="headerlink" title="bind 127.0.0.1 ::1"></a>bind 127.0.0.1 ::1</h1><h1 id="-9"><a href="#-9" class="headerlink" title></a></h1><h1 id="WARNING-If-the-computer-running-Redis-is-directly-exposed-to-the"><a href="#WARNING-If-the-computer-running-Redis-is-directly-exposed-to-the" class="headerlink" title="~ WARNING ~ If the computer running Redis is directly exposed to the"></a><del>~ WARNING ~</del> If the computer running Redis is directly exposed to the</h1><h1 id="internet-binding-to-all-the-interfaces-is-dangerous-and-will-expose-the"><a href="#internet-binding-to-all-the-interfaces-is-dangerous-and-will-expose-the" class="headerlink" title="internet, binding to all the interfaces is dangerous and will expose the"></a>internet, binding to all the interfaces is dangerous and will expose the</h1><h1 id="instance-to-everybody-on-the-internet-So-by-default-we-uncomment-the"><a href="#instance-to-everybody-on-the-internet-So-by-default-we-uncomment-the" class="headerlink" title="instance to everybody on the internet. So by default we uncomment the"></a>instance to everybody on the internet. So by default we uncomment the</h1><h1 id="following-bind-directive-that-will-force-Redis-to-listen-only-into"><a href="#following-bind-directive-that-will-force-Redis-to-listen-only-into" class="headerlink" title="following bind directive, that will force Redis to listen only into"></a>following bind directive, that will force Redis to listen only into</h1><h1 id="the-IPv4-lookback-interface-address-this-means-Redis-will-be-able-to"><a href="#the-IPv4-lookback-interface-address-this-means-Redis-will-be-able-to" class="headerlink" title="the IPv4 lookback interface address (this means Redis will be able to"></a>the IPv4 lookback interface address (this means Redis will be able to</h1><h1 id="accept-connections-only-from-clients-running-into-the-same-computer-it"><a href="#accept-connections-only-from-clients-running-into-the-same-computer-it" class="headerlink" title="accept connections only from clients running into the same computer it"></a>accept connections only from clients running into the same computer it</h1><h1 id="is-running"><a href="#is-running" class="headerlink" title="is running)."></a>is running).</h1><h1 id="-10"><a href="#-10" class="headerlink" title></a></h1><h1 id="IF-YOU-ARE-SURE-YOU-WANT-YOUR-INSTANCE-TO-LISTEN-TO-ALL-THE-INTERFACES"><a href="#IF-YOU-ARE-SURE-YOU-WANT-YOUR-INSTANCE-TO-LISTEN-TO-ALL-THE-INTERFACES" class="headerlink" title="IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES"></a>IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</h1><h1 id="JUST-COMMENT-THE-FOLLOWING-LINE"><a href="#JUST-COMMENT-THE-FOLLOWING-LINE" class="headerlink" title="JUST COMMENT THE FOLLOWING LINE."></a>JUST COMMENT THE FOLLOWING LINE.</h1><h1 id="-11"><a href="#-11" class="headerlink" title="~"></a><del>~</del></h1><p>#bind 127.0.0.1  </p>
<h1 id="Protected-mode-is-a-layer-of-security-protection-in-order-to-avoid-that"><a href="#Protected-mode-is-a-layer-of-security-protection-in-order-to-avoid-that" class="headerlink" title="Protected mode is a layer of security protection, in order to avoid that"></a>Protected mode is a layer of security protection, in order to avoid that</h1><h1 id="Redis-instances-left-open-on-the-internet-are-accessed-and-exploited"><a href="#Redis-instances-left-open-on-the-internet-are-accessed-and-exploited" class="headerlink" title="Redis instances left open on the internet are accessed and exploited."></a>Redis instances left open on the internet are accessed and exploited.</h1><h1 id="-12"><a href="#-12" class="headerlink" title></a></h1><h1 id="When-protected-mode-is-on-and-if"><a href="#When-protected-mode-is-on-and-if" class="headerlink" title="When protected mode is on and if:"></a>When protected mode is on and if:</h1><h1 id="-13"><a href="#-13" class="headerlink" title></a></h1><h1 id="1-The-server-is-not-binding-explicitly-to-a-set-of-addresses-using-the"><a href="#1-The-server-is-not-binding-explicitly-to-a-set-of-addresses-using-the" class="headerlink" title="1) The server is not binding explicitly to a set of addresses using the"></a>1) The server is not binding explicitly to a set of addresses using the</h1><h1 id="“bind”-directive"><a href="#“bind”-directive" class="headerlink" title="“bind” directive."></a>“bind” directive.</h1><h1 id="2-No-password-is-configured"><a href="#2-No-password-is-configured" class="headerlink" title="2) No password is configured."></a>2) No password is configured.</h1><h1 id="-14"><a href="#-14" class="headerlink" title></a></h1><h1 id="The-server-only-accepts-connections-from-clients-connecting-from-the"><a href="#The-server-only-accepts-connections-from-clients-connecting-from-the" class="headerlink" title="The server only accepts connections from clients connecting from the"></a>The server only accepts connections from clients connecting from the</h1><h1 id="IPv4-and-IPv6-loopback-addresses-127-0-0-1-and-1-and-from-Unix-domain"><a href="#IPv4-and-IPv6-loopback-addresses-127-0-0-1-and-1-and-from-Unix-domain" class="headerlink" title="IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain"></a>IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</h1><h1 id="sockets"><a href="#sockets" class="headerlink" title="sockets."></a>sockets.</h1><h1 id="-15"><a href="#-15" class="headerlink" title></a></h1><h1 id="By-default-protected-mode-is-enabled-You-should-disable-it-only-if"><a href="#By-default-protected-mode-is-enabled-You-should-disable-it-only-if" class="headerlink" title="By default protected mode is enabled. You should disable it only if"></a>By default protected mode is enabled. You should disable it only if</h1><h1 id="you-are-sure-you-want-clients-from-other-hosts-to-connect-to-Redis"><a href="#you-are-sure-you-want-clients-from-other-hosts-to-connect-to-Redis" class="headerlink" title="you are sure you want clients from other hosts to connect to Redis"></a>you are sure you want clients from other hosts to connect to Redis</h1><h1 id="even-if-no-authentication-is-configured-nor-a-specific-set-of-interfaces"><a href="#even-if-no-authentication-is-configured-nor-a-specific-set-of-interfaces" class="headerlink" title="even if no authentication is configured, nor a specific set of interfaces"></a>even if no authentication is configured, nor a specific set of interfaces</h1><h1 id="are-explicitly-listed-using-the-“bind”-directive"><a href="#are-explicitly-listed-using-the-“bind”-directive" class="headerlink" title="are explicitly listed using the “bind” directive."></a>are explicitly listed using the “bind” directive.</h1><p>protected-mode yes  </p>
<h1 id="Accept-connections-on-the-specified-port-default-is-6379-IANA-815344"><a href="#Accept-connections-on-the-specified-port-default-is-6379-IANA-815344" class="headerlink" title="Accept connections on the specified port, default is 6379 (IANA #815344)."></a>Accept connections on the specified port, default is 6379 (IANA #815344).</h1><h1 id="If-port-0-is-specified-Redis-will-not-listen-on-a-TCP-socket"><a href="#If-port-0-is-specified-Redis-will-not-listen-on-a-TCP-socket" class="headerlink" title="If port 0 is specified Redis will not listen on a TCP socket."></a>If port 0 is specified Redis will not listen on a TCP socket.</h1><p>port 6379  </p>
<h1 id="TCP-listen-backlog"><a href="#TCP-listen-backlog" class="headerlink" title="TCP listen() backlog."></a>TCP listen() backlog.</h1><h1 id="-16"><a href="#-16" class="headerlink" title></a></h1><h1 id="In-high-requests-per-second-environments-you-need-an-high-backlog-in-order"><a href="#In-high-requests-per-second-environments-you-need-an-high-backlog-in-order" class="headerlink" title="In high requests-per-second environments you need an high backlog in order"></a>In high requests-per-second environments you need an high backlog in order</h1><h1 id="to-avoid-slow-clients-connections-issues-Note-that-the-Linux-kernel"><a href="#to-avoid-slow-clients-connections-issues-Note-that-the-Linux-kernel" class="headerlink" title="to avoid slow clients connections issues. Note that the Linux kernel"></a>to avoid slow clients connections issues. Note that the Linux kernel</h1><h1 id="will-silently-truncate-it-to-the-value-of-proc-sys-net-core-somaxconn-so"><a href="#will-silently-truncate-it-to-the-value-of-proc-sys-net-core-somaxconn-so" class="headerlink" title="will silently truncate it to the value of /proc/sys/net/core/somaxconn so"></a>will silently truncate it to the value of /proc/sys/net/core/somaxconn so</h1><h1 id="make-sure-to-raise-both-the-value-of-somaxconn-and-tcp-max-syn-backlog"><a href="#make-sure-to-raise-both-the-value-of-somaxconn-and-tcp-max-syn-backlog" class="headerlink" title="make sure to raise both the value of somaxconn and tcp_max_syn_backlog"></a>make sure to raise both the value of somaxconn and tcp_max_syn_backlog</h1><h1 id="in-order-to-get-the-desired-effect"><a href="#in-order-to-get-the-desired-effect" class="headerlink" title="in order to get the desired effect."></a>in order to get the desired effect.</h1><p>tcp-backlog 511  </p>
<h1 id="Unix-socket"><a href="#Unix-socket" class="headerlink" title="Unix socket."></a>Unix socket.</h1><h1 id="-17"><a href="#-17" class="headerlink" title></a></h1><h1 id="Specify-the-path-for-the-Unix-socket-that-will-be-used-to-listen-for"><a href="#Specify-the-path-for-the-Unix-socket-that-will-be-used-to-listen-for" class="headerlink" title="Specify the path for the Unix socket that will be used to listen for"></a>Specify the path for the Unix socket that will be used to listen for</h1><h1 id="incoming-connections-There-is-no-default-so-Redis-will-not-listen"><a href="#incoming-connections-There-is-no-default-so-Redis-will-not-listen" class="headerlink" title="incoming connections. There is no default, so Redis will not listen"></a>incoming connections. There is no default, so Redis will not listen</h1><h1 id="on-a-unix-socket-when-not-specified"><a href="#on-a-unix-socket-when-not-specified" class="headerlink" title="on a unix socket when not specified."></a>on a unix socket when not specified.</h1><h1 id="-18"><a href="#-18" class="headerlink" title></a></h1><h1 id="unixsocket-tmp-redis-sock"><a href="#unixsocket-tmp-redis-sock" class="headerlink" title="unixsocket /tmp/redis.sock"></a>unixsocket /tmp/redis.sock</h1><h1 id="unixsocketperm-700"><a href="#unixsocketperm-700" class="headerlink" title="unixsocketperm 700"></a>unixsocketperm 700</h1><h1 id="Close-the-connection-after-a-client-is-idle-for-N-seconds-0-to-disable"><a href="#Close-the-connection-after-a-client-is-idle-for-N-seconds-0-to-disable" class="headerlink" title="Close the connection after a client is idle for N seconds (0 to disable)"></a>Close the connection after a client is idle for N seconds (0 to disable)</h1><p>timeout 0  </p>
<h1 id="TCP-keepalive"><a href="#TCP-keepalive" class="headerlink" title="TCP keepalive."></a>TCP keepalive.</h1><h1 id="-19"><a href="#-19" class="headerlink" title></a></h1><h1 id="If-non-zero-use-SO-KEEPALIVE-to-send-TCP-ACKs-to-clients-in-absence"><a href="#If-non-zero-use-SO-KEEPALIVE-to-send-TCP-ACKs-to-clients-in-absence" class="headerlink" title="If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence"></a>If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</h1><h1 id="of-communication-This-is-useful-for-two-reasons"><a href="#of-communication-This-is-useful-for-two-reasons" class="headerlink" title="of communication. This is useful for two reasons:"></a>of communication. This is useful for two reasons:</h1><h1 id="-20"><a href="#-20" class="headerlink" title></a></h1><h1 id="1-Detect-dead-peers"><a href="#1-Detect-dead-peers" class="headerlink" title="1) Detect dead peers."></a>1) Detect dead peers.</h1><h1 id="2-Take-the-connection-alive-from-the-point-of-view-of-network"><a href="#2-Take-the-connection-alive-from-the-point-of-view-of-network" class="headerlink" title="2) Take the connection alive from the point of view of network"></a>2) Take the connection alive from the point of view of network</h1><h1 id="equipment-in-the-middle"><a href="#equipment-in-the-middle" class="headerlink" title="equipment in the middle."></a>equipment in the middle.</h1><h1 id="-21"><a href="#-21" class="headerlink" title></a></h1><h1 id="On-Linux-the-specified-value-in-seconds-is-the-period-used-to-send-ACKs"><a href="#On-Linux-the-specified-value-in-seconds-is-the-period-used-to-send-ACKs" class="headerlink" title="On Linux, the specified value (in seconds) is the period used to send ACKs."></a>On Linux, the specified value (in seconds) is the period used to send ACKs.</h1><h1 id="Note-that-to-close-the-connection-the-double-of-the-time-is-needed"><a href="#Note-that-to-close-the-connection-the-double-of-the-time-is-needed" class="headerlink" title="Note that to close the connection the double of the time is needed."></a>Note that to close the connection the double of the time is needed.</h1><h1 id="On-other-kernels-the-period-depends-on-the-kernel-configuration"><a href="#On-other-kernels-the-period-depends-on-the-kernel-configuration" class="headerlink" title="On other kernels the period depends on the kernel configuration."></a>On other kernels the period depends on the kernel configuration.</h1><h1 id="-22"><a href="#-22" class="headerlink" title></a></h1><h1 id="A-reasonable-value-for-this-option-is-300-seconds-which-is-the-new"><a href="#A-reasonable-value-for-this-option-is-300-seconds-which-is-the-new" class="headerlink" title="A reasonable value for this option is 300 seconds, which is the new"></a>A reasonable value for this option is 300 seconds, which is the new</h1><h1 id="Redis-default-starting-with-Redis-3-2-1"><a href="#Redis-default-starting-with-Redis-3-2-1" class="headerlink" title="Redis default starting with Redis 3.2.1."></a>Redis default starting with Redis 3.2.1.</h1><p>tcp-keepalive 300  </p>
<p>################################# GENERAL #####################################  </p>
<h1 id="By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it"><a href="#By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it" class="headerlink" title="By default Redis does not run as a daemon. Use ‘yes’ if you need it."></a>By default Redis does not run as a daemon. Use ‘yes’ if you need it.</h1><h1 id="Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized"><a href="#Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized" class="headerlink" title="Note that Redis will write a pid file in /var/run/redis.pid when daemonized."></a>Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</h1><p>#daemonize no  </p>
<h1 id="If-you-run-Redis-from-upstart-or-systemd-Redis-can-interact-with-your"><a href="#If-you-run-Redis-from-upstart-or-systemd-Redis-can-interact-with-your" class="headerlink" title="If you run Redis from upstart or systemd, Redis can interact with your"></a>If you run Redis from upstart or systemd, Redis can interact with your</h1><h1 id="supervision-tree-Options"><a href="#supervision-tree-Options" class="headerlink" title="supervision tree. Options:"></a>supervision tree. Options:</h1><h1 id="supervised-no-no-supervision-interaction"><a href="#supervised-no-no-supervision-interaction" class="headerlink" title="supervised no      - no supervision interaction"></a>supervised no      - no supervision interaction</h1><h1 id="supervised-upstart-signal-upstart-by-putting-Redis-into-SIGSTOP-mode"><a href="#supervised-upstart-signal-upstart-by-putting-Redis-into-SIGSTOP-mode" class="headerlink" title="supervised upstart - signal upstart by putting Redis into SIGSTOP mode"></a>supervised upstart - signal upstart by putting Redis into SIGSTOP mode</h1><h1 id="supervised-systemd-signal-systemd-by-writing-READY-1-to-NOTIFY-SOCKET"><a href="#supervised-systemd-signal-systemd-by-writing-READY-1-to-NOTIFY-SOCKET" class="headerlink" title="supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET"></a>supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</h1><h1 id="supervised-auto-detect-upstart-or-systemd-method-based-on"><a href="#supervised-auto-detect-upstart-or-systemd-method-based-on" class="headerlink" title="supervised auto    - detect upstart or systemd method based on"></a>supervised auto    - detect upstart or systemd method based on</h1><h1 id="UPSTART-JOB-or-NOTIFY-SOCKET-environment-variables"><a href="#UPSTART-JOB-or-NOTIFY-SOCKET-environment-variables" class="headerlink" title="UPSTART_JOB or NOTIFY_SOCKET environment variables"></a>UPSTART_JOB or NOTIFY_SOCKET environment variables</h1><h1 id="Note-these-supervision-methods-only-signal-“process-is-ready-”"><a href="#Note-these-supervision-methods-only-signal-“process-is-ready-”" class="headerlink" title="Note: these supervision methods only signal “process is ready.”"></a>Note: these supervision methods only signal “process is ready.”</h1><h1 id="They-do-not-enable-continuous-liveness-pings-back-to-your-supervisor"><a href="#They-do-not-enable-continuous-liveness-pings-back-to-your-supervisor" class="headerlink" title="They do not enable continuous liveness pings back to your supervisor."></a>They do not enable continuous liveness pings back to your supervisor.</h1><p>supervised no  </p>
<h1 id="If-a-pid-file-is-specified-Redis-writes-it-where-specified-at-startup"><a href="#If-a-pid-file-is-specified-Redis-writes-it-where-specified-at-startup" class="headerlink" title="If a pid file is specified, Redis writes it where specified at startup"></a>If a pid file is specified, Redis writes it where specified at startup</h1><h1 id="and-removes-it-at-exit"><a href="#and-removes-it-at-exit" class="headerlink" title="and removes it at exit."></a>and removes it at exit.</h1><h1 id="-23"><a href="#-23" class="headerlink" title></a></h1><h1 id="When-the-server-runs-non-daemonized-no-pid-file-is-created-if-none-is"><a href="#When-the-server-runs-non-daemonized-no-pid-file-is-created-if-none-is" class="headerlink" title="When the server runs non daemonized, no pid file is created if none is"></a>When the server runs non daemonized, no pid file is created if none is</h1><h1 id="specified-in-the-configuration-When-the-server-is-daemonized-the-pid-file"><a href="#specified-in-the-configuration-When-the-server-is-daemonized-the-pid-file" class="headerlink" title="specified in the configuration. When the server is daemonized, the pid file"></a>specified in the configuration. When the server is daemonized, the pid file</h1><h1 id="is-used-even-if-not-specified-defaulting-to-“-var-run-redis-pid”"><a href="#is-used-even-if-not-specified-defaulting-to-“-var-run-redis-pid”" class="headerlink" title="is used even if not specified, defaulting to “/var/run/redis.pid”."></a>is used even if not specified, defaulting to “/var/run/redis.pid”.</h1><h1 id="-24"><a href="#-24" class="headerlink" title></a></h1><h1 id="Creating-a-pid-file-is-best-effort-if-Redis-is-not-able-to-create-it"><a href="#Creating-a-pid-file-is-best-effort-if-Redis-is-not-able-to-create-it" class="headerlink" title="Creating a pid file is best effort: if Redis is not able to create it"></a>Creating a pid file is best effort: if Redis is not able to create it</h1><h1 id="nothing-bad-happens-the-server-will-start-and-run-normally"><a href="#nothing-bad-happens-the-server-will-start-and-run-normally" class="headerlink" title="nothing bad happens, the server will start and run normally."></a>nothing bad happens, the server will start and run normally.</h1><p>pidfile /var/run/redis_6379.pid  </p>
<h1 id="Specify-the-server-verbosity-level"><a href="#Specify-the-server-verbosity-level" class="headerlink" title="Specify the server verbosity level."></a>Specify the server verbosity level.</h1><h1 id="This-can-be-one-of"><a href="#This-can-be-one-of" class="headerlink" title="This can be one of:"></a>This can be one of:</h1><h1 id="debug-a-lot-of-information-useful-for-development-testing"><a href="#debug-a-lot-of-information-useful-for-development-testing" class="headerlink" title="debug (a lot of information, useful for development/testing)"></a>debug (a lot of information, useful for development/testing)</h1><h1 id="verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><a href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level" class="headerlink" title="verbose (many rarely useful info, but not a mess like the debug level)"></a>verbose (many rarely useful info, but not a mess like the debug level)</h1><h1 id="notice-moderately-verbose-what-you-want-in-production-probably"><a href="#notice-moderately-verbose-what-you-want-in-production-probably" class="headerlink" title="notice (moderately verbose, what you want in production probably)"></a>notice (moderately verbose, what you want in production probably)</h1><h1 id="warning-only-very-important-critical-messages-are-logged"><a href="#warning-only-very-important-critical-messages-are-logged" class="headerlink" title="warning (only very important / critical messages are logged)"></a>warning (only very important / critical messages are logged)</h1><p>loglevel notice  </p>
<h1 id="Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force"><a href="#Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force" class="headerlink" title="Specify the log file name. Also the empty string can be used to force"></a>Specify the log file name. Also the empty string can be used to force</h1><h1 id="Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard"><a href="#Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard" class="headerlink" title="Redis to log on the standard output. Note that if you use standard"></a>Redis to log on the standard output. Note that if you use standard</h1><h1 id="output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null"><a href="#output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null" class="headerlink" title="output for logging but daemonize, logs will be sent to /dev/null"></a>output for logging but daemonize, logs will be sent to /dev/null</h1><p>logfile “”  </p>
<h1 id="To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes"><a href="#To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes" class="headerlink" title="To enable logging to the system logger, just set ‘syslog-enabled’ to yes,"></a>To enable logging to the system logger, just set ‘syslog-enabled’ to yes,</h1><h1 id="and-optionally-update-the-other-syslog-parameters-to-suit-your-needs"><a href="#and-optionally-update-the-other-syslog-parameters-to-suit-your-needs" class="headerlink" title="and optionally update the other syslog parameters to suit your needs."></a>and optionally update the other syslog parameters to suit your needs.</h1><h1 id="syslog-enabled-no"><a href="#syslog-enabled-no" class="headerlink" title="syslog-enabled no"></a>syslog-enabled no</h1><h1 id="Specify-the-syslog-identity"><a href="#Specify-the-syslog-identity" class="headerlink" title="Specify the syslog identity."></a>Specify the syslog identity.</h1><h1 id="syslog-ident-redis"><a href="#syslog-ident-redis" class="headerlink" title="syslog-ident redis"></a>syslog-ident redis</h1><h1 id="Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7"><a href="#Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7" class="headerlink" title="Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7."></a>Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</h1><h1 id="syslog-facility-local0"><a href="#syslog-facility-local0" class="headerlink" title="syslog-facility local0"></a>syslog-facility local0</h1><h1 id="Set-the-number-of-databases-The-default-database-is-DB-0-you-can-select"><a href="#Set-the-number-of-databases-The-default-database-is-DB-0-you-can-select" class="headerlink" title="Set the number of databases. The default database is DB 0, you can select"></a>Set the number of databases. The default database is DB 0, you can select</h1><h1 id="a-different-one-on-a-per-connection-basis-using-SELECT-where"><a href="#a-different-one-on-a-per-connection-basis-using-SELECT-where" class="headerlink" title="a different one on a per-connection basis using SELECT  where"></a>a different one on a per-connection basis using SELECT <dbid> where</dbid></h1><h1 id="dbid-is-a-number-between-0-and-‘databases’-1"><a href="#dbid-is-a-number-between-0-and-‘databases’-1" class="headerlink" title="dbid is a number between 0 and ‘databases’-1"></a>dbid is a number between 0 and ‘databases’-1</h1><p>databases 16  </p>
<p>################################ SNAPSHOTTING  ################################  </p>
<h1 id="-25"><a href="#-25" class="headerlink" title></a></h1><h1 id="Save-the-DB-on-disk"><a href="#Save-the-DB-on-disk" class="headerlink" title="Save the DB on disk:"></a>Save the DB on disk:</h1><h1 id="-26"><a href="#-26" class="headerlink" title></a></h1><h1 id="save"><a href="#save" class="headerlink" title="save  "></a>save <seconds> <changes></changes></seconds></h1><h1 id="-27"><a href="#-27" class="headerlink" title></a></h1><h1 id="Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given"><a href="#Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given" class="headerlink" title="Will save the DB if both the given number of seconds and the given"></a>Will save the DB if both the given number of seconds and the given</h1><h1 id="number-of-write-operations-against-the-DB-occurred"><a href="#number-of-write-operations-against-the-DB-occurred" class="headerlink" title="number of write operations against the DB occurred."></a>number of write operations against the DB occurred.</h1><h1 id="-28"><a href="#-28" class="headerlink" title></a></h1><h1 id="In-the-example-below-the-behaviour-will-be-to-save"><a href="#In-the-example-below-the-behaviour-will-be-to-save" class="headerlink" title="In the example below the behaviour will be to save:"></a>In the example below the behaviour will be to save:</h1><h1 id="after-900-sec-15-min-if-at-least-1-key-changed"><a href="#after-900-sec-15-min-if-at-least-1-key-changed" class="headerlink" title="after 900 sec (15 min) if at least 1 key changed"></a>after 900 sec (15 min) if at least 1 key changed</h1><h1 id="after-300-sec-5-min-if-at-least-10-keys-changed"><a href="#after-300-sec-5-min-if-at-least-10-keys-changed" class="headerlink" title="after 300 sec (5 min) if at least 10 keys changed"></a>after 300 sec (5 min) if at least 10 keys changed</h1><h1 id="after-60-sec-if-at-least-10000-keys-changed"><a href="#after-60-sec-if-at-least-10000-keys-changed" class="headerlink" title="after 60 sec if at least 10000 keys changed"></a>after 60 sec if at least 10000 keys changed</h1><h1 id="-29"><a href="#-29" class="headerlink" title></a></h1><h1 id="Note-you-can-disable-saving-completely-by-commenting-out-all-“save”-lines"><a href="#Note-you-can-disable-saving-completely-by-commenting-out-all-“save”-lines" class="headerlink" title="Note: you can disable saving completely by commenting out all “save” lines."></a>Note: you can disable saving completely by commenting out all “save” lines.</h1><h1 id="-30"><a href="#-30" class="headerlink" title></a></h1><h1 id="It-is-also-possible-to-remove-all-the-previously-configured-save"><a href="#It-is-also-possible-to-remove-all-the-previously-configured-save" class="headerlink" title="It is also possible to remove all the previously configured save"></a>It is also possible to remove all the previously configured save</h1><h1 id="points-by-adding-a-save-directive-with-a-single-empty-string-argument"><a href="#points-by-adding-a-save-directive-with-a-single-empty-string-argument" class="headerlink" title="points by adding a save directive with a single empty string argument"></a>points by adding a save directive with a single empty string argument</h1><h1 id="like-in-the-following-example"><a href="#like-in-the-following-example" class="headerlink" title="like in the following example:"></a>like in the following example:</h1><h1 id="-31"><a href="#-31" class="headerlink" title></a></h1><h1 id="save-“”"><a href="#save-“”" class="headerlink" title="save “”"></a>save “”</h1><p>save 120 1<br>save 300 10<br>save 60 10000  </p>
<h1 id="By-default-Redis-will-stop-accepting-writes-if-RDB-snapshots-are-enabled"><a href="#By-default-Redis-will-stop-accepting-writes-if-RDB-snapshots-are-enabled" class="headerlink" title="By default Redis will stop accepting writes if RDB snapshots are enabled"></a>By default Redis will stop accepting writes if RDB snapshots are enabled</h1><h1 id="at-least-one-save-point-and-the-latest-background-save-failed"><a href="#at-least-one-save-point-and-the-latest-background-save-failed" class="headerlink" title="(at least one save point) and the latest background save failed."></a>(at least one save point) and the latest background save failed.</h1><h1 id="This-will-make-the-user-aware-in-a-hard-way-that-data-is-not-persisting"><a href="#This-will-make-the-user-aware-in-a-hard-way-that-data-is-not-persisting" class="headerlink" title="This will make the user aware (in a hard way) that data is not persisting"></a>This will make the user aware (in a hard way) that data is not persisting</h1><h1 id="on-disk-properly-otherwise-chances-are-that-no-one-will-notice-and-some"><a href="#on-disk-properly-otherwise-chances-are-that-no-one-will-notice-and-some" class="headerlink" title="on disk properly, otherwise chances are that no one will notice and some"></a>on disk properly, otherwise chances are that no one will notice and some</h1><h1 id="disaster-will-happen"><a href="#disaster-will-happen" class="headerlink" title="disaster will happen."></a>disaster will happen.</h1><h1 id="-32"><a href="#-32" class="headerlink" title></a></h1><h1 id="If-the-background-saving-process-will-start-working-again-Redis-will"><a href="#If-the-background-saving-process-will-start-working-again-Redis-will" class="headerlink" title="If the background saving process will start working again Redis will"></a>If the background saving process will start working again Redis will</h1><h1 id="automatically-allow-writes-again"><a href="#automatically-allow-writes-again" class="headerlink" title="automatically allow writes again."></a>automatically allow writes again.</h1><h1 id="-33"><a href="#-33" class="headerlink" title></a></h1><h1 id="However-if-you-have-setup-your-proper-monitoring-of-the-Redis-server"><a href="#However-if-you-have-setup-your-proper-monitoring-of-the-Redis-server" class="headerlink" title="However if you have setup your proper monitoring of the Redis server"></a>However if you have setup your proper monitoring of the Redis server</h1><h1 id="and-persistence-you-may-want-to-disable-this-feature-so-that-Redis-will"><a href="#and-persistence-you-may-want-to-disable-this-feature-so-that-Redis-will" class="headerlink" title="and persistence, you may want to disable this feature so that Redis will"></a>and persistence, you may want to disable this feature so that Redis will</h1><h1 id="continue-to-work-as-usual-even-if-there-are-problems-with-disk"><a href="#continue-to-work-as-usual-even-if-there-are-problems-with-disk" class="headerlink" title="continue to work as usual even if there are problems with disk,"></a>continue to work as usual even if there are problems with disk,</h1><h1 id="permissions-and-so-forth"><a href="#permissions-and-so-forth" class="headerlink" title="permissions, and so forth."></a>permissions, and so forth.</h1><p>stop-writes-on-bgsave-error yes  </p>
<h1 id="Compress-string-objects-using-LZF-when-dump-rdb-databases"><a href="#Compress-string-objects-using-LZF-when-dump-rdb-databases" class="headerlink" title="Compress string objects using LZF when dump .rdb databases?"></a>Compress string objects using LZF when dump .rdb databases?</h1><h1 id="For-default-that’s-set-to’yes’as-it’s-almost-always-a-win"><a href="#For-default-that’s-set-to’yes’as-it’s-almost-always-a-win" class="headerlink" title="For default that’s set to’yes’as it’s almost always a win."></a>For default that’s set to’yes’as it’s almost always a win.</h1><h1 id="If-you-want-to-save-some-CPU-in-the-saving-child-set-it-to-‘no’-but"><a href="#If-you-want-to-save-some-CPU-in-the-saving-child-set-it-to-‘no’-but" class="headerlink" title="If you want to save some CPU in the saving child set it to ‘no’ but"></a>If you want to save some CPU in the saving child set it to ‘no’ but</h1><h1 id="the-dataset-will-likely-be-bigger-if-you-have-compressible-values-or-keys"><a href="#the-dataset-will-likely-be-bigger-if-you-have-compressible-values-or-keys" class="headerlink" title="the dataset will likely be bigger if you have compressible values or keys."></a>the dataset will likely be bigger if you have compressible values or keys.</h1><p>rdbcompression yes  </p>
<h1 id="Since-version-5-of-RDB-a-CRC64-checksum-is-placed-at-the-end-of-the-file"><a href="#Since-version-5-of-RDB-a-CRC64-checksum-is-placed-at-the-end-of-the-file" class="headerlink" title="Since version 5 of RDB a CRC64 checksum is placed at the end of the file."></a>Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</h1><h1 id="This-makes-the-format-more-resistant-to-corruption-but-there-is-a-performance"><a href="#This-makes-the-format-more-resistant-to-corruption-but-there-is-a-performance" class="headerlink" title="This makes the format more resistant to corruption but there is a performance"></a>This makes the format more resistant to corruption but there is a performance</h1><h1 id="hit-to-pay-around-10-when-saving-and-loading-RDB-files-so-you-can-disable-it"><a href="#hit-to-pay-around-10-when-saving-and-loading-RDB-files-so-you-can-disable-it" class="headerlink" title="hit to pay (around 10%) when saving and loading RDB files, so you can disable it"></a>hit to pay (around 10%) when saving and loading RDB files, so you can disable it</h1><h1 id="for-maximum-performances"><a href="#for-maximum-performances" class="headerlink" title="for maximum performances."></a>for maximum performances.</h1><h1 id="-34"><a href="#-34" class="headerlink" title></a></h1><h1 id="RDB-files-created-with-checksum-disabled-have-a-checksum-of-zero-that-will"><a href="#RDB-files-created-with-checksum-disabled-have-a-checksum-of-zero-that-will" class="headerlink" title="RDB files created with checksum disabled have a checksum of zero that will"></a>RDB files created with checksum disabled have a checksum of zero that will</h1><h1 id="tell-the-loading-code-to-skip-the-check"><a href="#tell-the-loading-code-to-skip-the-check" class="headerlink" title="tell the loading code to skip the check."></a>tell the loading code to skip the check.</h1><p>rdbchecksum yes  </p>
<h1 id="The-filename-where-to-dump-the-DB"><a href="#The-filename-where-to-dump-the-DB" class="headerlink" title="The filename where to dump the DB"></a>The filename where to dump the DB</h1><p>dbfilename dump.rdb  </p>
<h1 id="The-working-directory"><a href="#The-working-directory" class="headerlink" title="The working directory."></a>The working directory.</h1><h1 id="-35"><a href="#-35" class="headerlink" title></a></h1><h1 id="The-DB-will-be-written-inside-this-directory-with-the-filename-specified"><a href="#The-DB-will-be-written-inside-this-directory-with-the-filename-specified" class="headerlink" title="The DB will be written inside this directory, with the filename specified"></a>The DB will be written inside this directory, with the filename specified</h1><h1 id="above-using-the-‘dbfilename’-configuration-directive"><a href="#above-using-the-‘dbfilename’-configuration-directive" class="headerlink" title="above using the ‘dbfilename’ configuration directive."></a>above using the ‘dbfilename’ configuration directive.</h1><h1 id="-36"><a href="#-36" class="headerlink" title></a></h1><h1 id="The-Append-Only-File-will-also-be-created-inside-this-directory"><a href="#The-Append-Only-File-will-also-be-created-inside-this-directory" class="headerlink" title="The Append Only File will also be created inside this directory."></a>The Append Only File will also be created inside this directory.</h1><h1 id="-37"><a href="#-37" class="headerlink" title></a></h1><h1 id="Note-that-you-must-specify-a-directory-here-not-a-file-name"><a href="#Note-that-you-must-specify-a-directory-here-not-a-file-name" class="headerlink" title="Note that you must specify a directory here, not a file name."></a>Note that you must specify a directory here, not a file name.</h1><p>dir ./  </p>
<p>################################# REPLICATION #################################  </p>
<h1 id="Master-Slave-replication-Use-slaveof-to-make-a-Redis-instance-a-copy-of"><a href="#Master-Slave-replication-Use-slaveof-to-make-a-Redis-instance-a-copy-of" class="headerlink" title="Master-Slave replication. Use slaveof to make a Redis instance a copy of"></a>Master-Slave replication. Use slaveof to make a Redis instance a copy of</h1><h1 id="another-Redis-server-A-few-things-to-understand-ASAP-about-Redis-replication"><a href="#another-Redis-server-A-few-things-to-understand-ASAP-about-Redis-replication" class="headerlink" title="another Redis server. A few things to understand ASAP about Redis replication."></a>another Redis server. A few things to understand ASAP about Redis replication.</h1><h1 id="-38"><a href="#-38" class="headerlink" title></a></h1><h1 id="1-Redis-replication-is-asynchronous-but-you-can-configure-a-master-to"><a href="#1-Redis-replication-is-asynchronous-but-you-can-configure-a-master-to" class="headerlink" title="1) Redis replication is asynchronous, but you can configure a master to"></a>1) Redis replication is asynchronous, but you can configure a master to</h1><h1 id="stop-accepting-writes-if-it-appears-to-be-not-connected-with-at-least"><a href="#stop-accepting-writes-if-it-appears-to-be-not-connected-with-at-least" class="headerlink" title="stop accepting writes if it appears to be not connected with at least"></a>stop accepting writes if it appears to be not connected with at least</h1><h1 id="a-given-number-of-slaves"><a href="#a-given-number-of-slaves" class="headerlink" title="a given number of slaves."></a>a given number of slaves.</h1><h1 id="2-Redis-slaves-are-able-to-perform-a-partial-resynchronization-with-the"><a href="#2-Redis-slaves-are-able-to-perform-a-partial-resynchronization-with-the" class="headerlink" title="2) Redis slaves are able to perform a partial resynchronization with the"></a>2) Redis slaves are able to perform a partial resynchronization with the</h1><h1 id="master-if-the-replication-link-is-lost-for-a-relatively-small-amount-of"><a href="#master-if-the-replication-link-is-lost-for-a-relatively-small-amount-of" class="headerlink" title="master if the replication link is lost for a relatively small amount of"></a>master if the replication link is lost for a relatively small amount of</h1><h1 id="time-You-may-want-to-configure-the-replication-backlog-size-see-the-next"><a href="#time-You-may-want-to-configure-the-replication-backlog-size-see-the-next" class="headerlink" title="time. You may want to configure the replication backlog size (see the next"></a>time. You may want to configure the replication backlog size (see the next</h1><h1 id="sections-of-this-file-with-a-sensible-value-depending-on-your-needs"><a href="#sections-of-this-file-with-a-sensible-value-depending-on-your-needs" class="headerlink" title="sections of this file) with a sensible value depending on your needs."></a>sections of this file) with a sensible value depending on your needs.</h1><h1 id="3-Replication-is-automatic-and-does-not-need-user-intervention-After-a"><a href="#3-Replication-is-automatic-and-does-not-need-user-intervention-After-a" class="headerlink" title="3) Replication is automatic and does not need user intervention. After a"></a>3) Replication is automatic and does not need user intervention. After a</h1><h1 id="network-partition-slaves-automatically-try-to-reconnect-to-masters"><a href="#network-partition-slaves-automatically-try-to-reconnect-to-masters" class="headerlink" title="network partition slaves automatically try to reconnect to masters"></a>network partition slaves automatically try to reconnect to masters</h1><h1 id="and-resynchronize-with-them"><a href="#and-resynchronize-with-them" class="headerlink" title="and resynchronize with them."></a>and resynchronize with them.</h1><h1 id="-39"><a href="#-39" class="headerlink" title></a></h1><h1 id="slaveof"><a href="#slaveof" class="headerlink" title="slaveof  "></a>slaveof <masterip> <masterport></masterport></masterip></h1><h1 id="If-the-master-is-password-protected-using-the-“requirepass”-configuration"><a href="#If-the-master-is-password-protected-using-the-“requirepass”-configuration" class="headerlink" title="If the master is password protected (using the “requirepass” configuration"></a>If the master is password protected (using the “requirepass” configuration</h1><h1 id="directive-below-it-is-possible-to-tell-the-slave-to-authenticate-before"><a href="#directive-below-it-is-possible-to-tell-the-slave-to-authenticate-before" class="headerlink" title="directive below) it is possible to tell the slave to authenticate before"></a>directive below) it is possible to tell the slave to authenticate before</h1><h1 id="starting-the-replication-synchronization-process-otherwise-the-master-will"><a href="#starting-the-replication-synchronization-process-otherwise-the-master-will" class="headerlink" title="starting the replication synchronization process, otherwise the master will"></a>starting the replication synchronization process, otherwise the master will</h1><h1 id="refuse-the-slave-request"><a href="#refuse-the-slave-request" class="headerlink" title="refuse the slave request."></a>refuse the slave request.</h1><h1 id="-40"><a href="#-40" class="headerlink" title></a></h1><h1 id="masterauth"><a href="#masterauth" class="headerlink" title="masterauth "></a>masterauth <master-password></master-password></h1><h1 id="When-a-slave-loses-its-connection-with-the-master-or-when-the-replication"><a href="#When-a-slave-loses-its-connection-with-the-master-or-when-the-replication" class="headerlink" title="When a slave loses its connection with the master, or when the replication"></a>When a slave loses its connection with the master, or when the replication</h1><h1 id="is-still-in-progress-the-slave-can-act-in-two-different-ways"><a href="#is-still-in-progress-the-slave-can-act-in-two-different-ways" class="headerlink" title="is still in progress, the slave can act in two different ways:"></a>is still in progress, the slave can act in two different ways:</h1><h1 id="-41"><a href="#-41" class="headerlink" title></a></h1><h1 id="1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will"><a href="#1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will" class="headerlink" title="1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will"></a>1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will</h1><h1 id="still-reply-to-client-requests-possibly-with-out-of-date-data-or-the"><a href="#still-reply-to-client-requests-possibly-with-out-of-date-data-or-the" class="headerlink" title="still reply to client requests, possibly with out of date data, or the"></a>still reply to client requests, possibly with out of date data, or the</h1><h1 id="data-set-may-just-be-empty-if-this-is-the-first-synchronization"><a href="#data-set-may-just-be-empty-if-this-is-the-first-synchronization" class="headerlink" title="data set may just be empty if this is the first synchronization."></a>data set may just be empty if this is the first synchronization.</h1><h1 id="-42"><a href="#-42" class="headerlink" title></a></h1><h1 id="2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with"><a href="#2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with" class="headerlink" title="2) if slave-serve-stale-data is set to ‘no’ the slave will reply with"></a>2) if slave-serve-stale-data is set to ‘no’ the slave will reply with</h1><h1 id="an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands"><a href="#an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands" class="headerlink" title="an error “SYNC with master in progress” to all the kind of commands"></a>an error “SYNC with master in progress” to all the kind of commands</h1><h1 id="but-to-INFO-and-SLAVEOF"><a href="#but-to-INFO-and-SLAVEOF" class="headerlink" title="but to INFO and SLAVEOF."></a>but to INFO and SLAVEOF.</h1><h1 id="-43"><a href="#-43" class="headerlink" title></a></h1><p>slave-serve-stale-data yes  </p>
<h1 id="You-can-configure-a-slave-instance-to-accept-writes-or-not-Writing-against"><a href="#You-can-configure-a-slave-instance-to-accept-writes-or-not-Writing-against" class="headerlink" title="You can configure a slave instance to accept writes or not. Writing against"></a>You can configure a slave instance to accept writes or not. Writing against</h1><h1 id="a-slave-instance-may-be-useful-to-store-some-ephemeral-data-because-data"><a href="#a-slave-instance-may-be-useful-to-store-some-ephemeral-data-because-data" class="headerlink" title="a slave instance may be useful to store some ephemeral data (because data"></a>a slave instance may be useful to store some ephemeral data (because data</h1><h1 id="written-on-a-slave-will-be-easily-deleted-after-resync-with-the-master-but"><a href="#written-on-a-slave-will-be-easily-deleted-after-resync-with-the-master-but" class="headerlink" title="written on a slave will be easily deleted after resync with the master) but"></a>written on a slave will be easily deleted after resync with the master) but</h1><h1 id="may-also-cause-problems-if-clients-are-writing-to-it-because-of-a"><a href="#may-also-cause-problems-if-clients-are-writing-to-it-because-of-a" class="headerlink" title="may also cause problems if clients are writing to it because of a"></a>may also cause problems if clients are writing to it because of a</h1><h1 id="misconfiguration"><a href="#misconfiguration" class="headerlink" title="misconfiguration."></a>misconfiguration.</h1><h1 id="-44"><a href="#-44" class="headerlink" title></a></h1><h1 id="Since-Redis-2-6-by-default-slaves-are-read-only"><a href="#Since-Redis-2-6-by-default-slaves-are-read-only" class="headerlink" title="Since Redis 2.6 by default slaves are read-only."></a>Since Redis 2.6 by default slaves are read-only.</h1><h1 id="-45"><a href="#-45" class="headerlink" title></a></h1><h1 id="Note-read-only-slaves-are-not-designed-to-be-exposed-to-untrusted-clients"><a href="#Note-read-only-slaves-are-not-designed-to-be-exposed-to-untrusted-clients" class="headerlink" title="Note: read only slaves are not designed to be exposed to untrusted clients"></a>Note: read only slaves are not designed to be exposed to untrusted clients</h1><h1 id="on-the-internet-It’s-just-a-protection-layer-against-misuse-of-the-instance"><a href="#on-the-internet-It’s-just-a-protection-layer-against-misuse-of-the-instance" class="headerlink" title="on the internet. It’s just a protection layer against misuse of the instance."></a>on the internet. It’s just a protection layer against misuse of the instance.</h1><h1 id="Still-a-read-only-slave-exports-by-default-all-the-administrative-commands"><a href="#Still-a-read-only-slave-exports-by-default-all-the-administrative-commands" class="headerlink" title="Still a read only slave exports by default all the administrative commands"></a>Still a read only slave exports by default all the administrative commands</h1><h1 id="such-as-CONFIG-DEBUG-and-so-forth-To-a-limited-extent-you-can-improve"><a href="#such-as-CONFIG-DEBUG-and-so-forth-To-a-limited-extent-you-can-improve" class="headerlink" title="such as CONFIG, DEBUG, and so forth. To a limited extent you can improve"></a>such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</h1><h1 id="security-of-read-only-slaves-using-‘rename-command’-to-shadow-all-the"><a href="#security-of-read-only-slaves-using-‘rename-command’-to-shadow-all-the" class="headerlink" title="security of read only slaves using ‘rename-command’ to shadow all the"></a>security of read only slaves using ‘rename-command’ to shadow all the</h1><h1 id="administrative-dangerous-commands"><a href="#administrative-dangerous-commands" class="headerlink" title="administrative / dangerous commands."></a>administrative / dangerous commands.</h1><p>slave-read-only yes  </p>
<h1 id="Replication-SYNC-strategy-disk-or-socket"><a href="#Replication-SYNC-strategy-disk-or-socket" class="headerlink" title="Replication SYNC strategy: disk or socket."></a>Replication SYNC strategy: disk or socket.</h1><h1 id="-46"><a href="#-46" class="headerlink" title></a></h1><h1 id="——————————————————"><a href="#——————————————————" class="headerlink" title="——————————————————-"></a>——————————————————-</h1><h1 id="WARNING-DISKLESS-REPLICATION-IS-EXPERIMENTAL-CURRENTLY"><a href="#WARNING-DISKLESS-REPLICATION-IS-EXPERIMENTAL-CURRENTLY" class="headerlink" title="WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY"></a>WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY</h1><h1 id="——————————————————-1"><a href="#——————————————————-1" class="headerlink" title="——————————————————-"></a>——————————————————-</h1><h1 id="-47"><a href="#-47" class="headerlink" title></a></h1><h1 id="New-slaves-and-reconnecting-slaves-that-are-not-able-to-continue-the-replication"><a href="#New-slaves-and-reconnecting-slaves-that-are-not-able-to-continue-the-replication" class="headerlink" title="New slaves and reconnecting slaves that are not able to continue the replication"></a>New slaves and reconnecting slaves that are not able to continue the replication</h1><h1 id="process-just-receiving-differences-need-to-do-what-is-called-a-“full"><a href="#process-just-receiving-differences-need-to-do-what-is-called-a-“full" class="headerlink" title="process just receiving differences, need to do what is called a “full"></a>process just receiving differences, need to do what is called a “full</h1><h1 id="synchronization”-An-RDB-file-is-transmitted-from-the-master-to-the-slaves"><a href="#synchronization”-An-RDB-file-is-transmitted-from-the-master-to-the-slaves" class="headerlink" title="synchronization”. An RDB file is transmitted from the master to the slaves."></a>synchronization”. An RDB file is transmitted from the master to the slaves.</h1><h1 id="The-transmission-can-happen-in-two-different-ways"><a href="#The-transmission-can-happen-in-two-different-ways" class="headerlink" title="The transmission can happen in two different ways:"></a>The transmission can happen in two different ways:</h1><h1 id="-48"><a href="#-48" class="headerlink" title></a></h1><h1 id="1-Disk-backed-The-Redis-master-creates-a-new-process-that-writes-the-RDB"><a href="#1-Disk-backed-The-Redis-master-creates-a-new-process-that-writes-the-RDB" class="headerlink" title="1) Disk-backed: The Redis master creates a new process that writes the RDB"></a>1) Disk-backed: The Redis master creates a new process that writes the RDB</h1><h1 id="file-on-disk-Later-the-file-is-transferred-by-the-parent"><a href="#file-on-disk-Later-the-file-is-transferred-by-the-parent" class="headerlink" title="file on disk. Later the file is transferred by the parent"></a>file on disk. Later the file is transferred by the parent</h1><h1 id="process-to-the-slaves-incrementally"><a href="#process-to-the-slaves-incrementally" class="headerlink" title="process to the slaves incrementally."></a>process to the slaves incrementally.</h1><h1 id="2-Diskless-The-Redis-master-creates-a-new-process-that-directly-writes-the"><a href="#2-Diskless-The-Redis-master-creates-a-new-process-that-directly-writes-the" class="headerlink" title="2) Diskless: The Redis master creates a new process that directly writes the"></a>2) Diskless: The Redis master creates a new process that directly writes the</h1><h1 id="RDB-file-to-slave-sockets-without-touching-the-disk-at-all"><a href="#RDB-file-to-slave-sockets-without-touching-the-disk-at-all" class="headerlink" title="RDB file to slave sockets, without touching the disk at all."></a>RDB file to slave sockets, without touching the disk at all.</h1><h1 id="-49"><a href="#-49" class="headerlink" title></a></h1><h1 id="With-disk-backed-replication-while-the-RDB-file-is-generated-more-slaves"><a href="#With-disk-backed-replication-while-the-RDB-file-is-generated-more-slaves" class="headerlink" title="With disk-backed replication, while the RDB file is generated, more slaves"></a>With disk-backed replication, while the RDB file is generated, more slaves</h1><h1 id="can-be-queued-and-served-with-the-RDB-file-as-soon-as-the-current-child-producing"><a href="#can-be-queued-and-served-with-the-RDB-file-as-soon-as-the-current-child-producing" class="headerlink" title="can be queued and served with the RDB file as soon as the current child producing"></a>can be queued and served with the RDB file as soon as the current child producing</h1><h1 id="the-RDB-file-finishes-its-work-With-diskless-replication-instead-once"><a href="#the-RDB-file-finishes-its-work-With-diskless-replication-instead-once" class="headerlink" title="the RDB file finishes its work. With diskless replication instead once"></a>the RDB file finishes its work. With diskless replication instead once</h1><h1 id="the-transfer-starts-new-slaves-arriving-will-be-queued-and-a-new-transfer"><a href="#the-transfer-starts-new-slaves-arriving-will-be-queued-and-a-new-transfer" class="headerlink" title="the transfer starts, new slaves arriving will be queued and a new transfer"></a>the transfer starts, new slaves arriving will be queued and a new transfer</h1><h1 id="will-start-when-the-current-one-terminates"><a href="#will-start-when-the-current-one-terminates" class="headerlink" title="will start when the current one terminates."></a>will start when the current one terminates.</h1><h1 id="-50"><a href="#-50" class="headerlink" title></a></h1><h1 id="When-diskless-replication-is-used-the-master-waits-a-configurable-amount-of"><a href="#When-diskless-replication-is-used-the-master-waits-a-configurable-amount-of" class="headerlink" title="When diskless replication is used, the master waits a configurable amount of"></a>When diskless replication is used, the master waits a configurable amount of</h1><h1 id="time-in-seconds-before-starting-the-transfer-in-the-hope-that-multiple-slaves"><a href="#time-in-seconds-before-starting-the-transfer-in-the-hope-that-multiple-slaves" class="headerlink" title="time (in seconds) before starting the transfer in the hope that multiple slaves"></a>time (in seconds) before starting the transfer in the hope that multiple slaves</h1><h1 id="will-arrive-and-the-transfer-can-be-parallelized"><a href="#will-arrive-and-the-transfer-can-be-parallelized" class="headerlink" title="will arrive and the transfer can be parallelized."></a>will arrive and the transfer can be parallelized.</h1><h1 id="-51"><a href="#-51" class="headerlink" title></a></h1><h1 id="With-slow-disks-and-fast-large-bandwidth-networks-diskless-replication"><a href="#With-slow-disks-and-fast-large-bandwidth-networks-diskless-replication" class="headerlink" title="With slow disks and fast (large bandwidth) networks, diskless replication"></a>With slow disks and fast (large bandwidth) networks, diskless replication</h1><h1 id="works-better"><a href="#works-better" class="headerlink" title="works better."></a>works better.</h1><p>repl-diskless-sync no  </p>
<h1 id="When-diskless-replication-is-enabled-it-is-possible-to-configure-the-delay"><a href="#When-diskless-replication-is-enabled-it-is-possible-to-configure-the-delay" class="headerlink" title="When diskless replication is enabled, it is possible to configure the delay"></a>When diskless replication is enabled, it is possible to configure the delay</h1><h1 id="the-server-waits-in-order-to-spawn-the-child-that-transfers-the-RDB-via-socket"><a href="#the-server-waits-in-order-to-spawn-the-child-that-transfers-the-RDB-via-socket" class="headerlink" title="the server waits in order to spawn the child that transfers the RDB via socket"></a>the server waits in order to spawn the child that transfers the RDB via socket</h1><h1 id="to-the-slaves"><a href="#to-the-slaves" class="headerlink" title="to the slaves."></a>to the slaves.</h1><h1 id="-52"><a href="#-52" class="headerlink" title></a></h1><h1 id="This-is-important-since-once-the-transfer-starts-it-is-not-possible-to-serve"><a href="#This-is-important-since-once-the-transfer-starts-it-is-not-possible-to-serve" class="headerlink" title="This is important since once the transfer starts, it is not possible to serve"></a>This is important since once the transfer starts, it is not possible to serve</h1><h1 id="new-slaves-arriving-that-will-be-queued-for-the-next-RDB-transfer-so-the-server"><a href="#new-slaves-arriving-that-will-be-queued-for-the-next-RDB-transfer-so-the-server" class="headerlink" title="new slaves arriving, that will be queued for the next RDB transfer, so the server"></a>new slaves arriving, that will be queued for the next RDB transfer, so the server</h1><h1 id="waits-a-delay-in-order-to-let-more-slaves-arrive"><a href="#waits-a-delay-in-order-to-let-more-slaves-arrive" class="headerlink" title="waits a delay in order to let more slaves arrive."></a>waits a delay in order to let more slaves arrive.</h1><h1 id="-53"><a href="#-53" class="headerlink" title></a></h1><h1 id="The-delay-is-specified-in-seconds-and-by-default-is-5-seconds-To-disable"><a href="#The-delay-is-specified-in-seconds-and-by-default-is-5-seconds-To-disable" class="headerlink" title="The delay is specified in seconds, and by default is 5 seconds. To disable"></a>The delay is specified in seconds, and by default is 5 seconds. To disable</h1><h1 id="it-entirely-just-set-it-to-0-seconds-and-the-transfer-will-start-ASAP"><a href="#it-entirely-just-set-it-to-0-seconds-and-the-transfer-will-start-ASAP" class="headerlink" title="it entirely just set it to 0 seconds and the transfer will start ASAP."></a>it entirely just set it to 0 seconds and the transfer will start ASAP.</h1><p>repl-diskless-sync-delay 5  </p>
<h1 id="Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change"><a href="#Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change" class="headerlink" title="Slaves send PINGs to server in a predefined interval. It’s possible to change"></a>Slaves send PINGs to server in a predefined interval. It’s possible to change</h1><h1 id="this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10"><a href="#this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10" class="headerlink" title="this interval with the repl_ping_slave_period option. The default value is 10"></a>this interval with the repl_ping_slave_period option. The default value is 10</h1><h1 id="seconds"><a href="#seconds" class="headerlink" title="seconds."></a>seconds.</h1><h1 id="-54"><a href="#-54" class="headerlink" title></a></h1><h1 id="repl-ping-slave-period-10"><a href="#repl-ping-slave-period-10" class="headerlink" title="repl-ping-slave-period 10"></a>repl-ping-slave-period 10</h1><h1 id="The-following-option-sets-the-replication-timeout-for"><a href="#The-following-option-sets-the-replication-timeout-for" class="headerlink" title="The following option sets the replication timeout for:"></a>The following option sets the replication timeout for:</h1><h1 id="-55"><a href="#-55" class="headerlink" title></a></h1><h1 id="1-Bulk-transfer-I-O-during-SYNC-from-the-point-of-view-of-slave"><a href="#1-Bulk-transfer-I-O-during-SYNC-from-the-point-of-view-of-slave" class="headerlink" title="1) Bulk transfer I/O during SYNC, from the point of view of slave."></a>1) Bulk transfer I/O during SYNC, from the point of view of slave.</h1><h1 id="2-Master-timeout-from-the-point-of-view-of-slaves-data-pings"><a href="#2-Master-timeout-from-the-point-of-view-of-slaves-data-pings" class="headerlink" title="2) Master timeout from the point of view of slaves (data, pings)."></a>2) Master timeout from the point of view of slaves (data, pings).</h1><h1 id="3-Slave-timeout-from-the-point-of-view-of-masters-REPLCONF-ACK-pings"><a href="#3-Slave-timeout-from-the-point-of-view-of-masters-REPLCONF-ACK-pings" class="headerlink" title="3) Slave timeout from the point of view of masters (REPLCONF ACK pings)."></a>3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</h1><h1 id="-56"><a href="#-56" class="headerlink" title></a></h1><h1 id="It-is-important-to-make-sure-that-this-value-is-greater-than-the-value"><a href="#It-is-important-to-make-sure-that-this-value-is-greater-than-the-value" class="headerlink" title="It is important to make sure that this value is greater than the value"></a>It is important to make sure that this value is greater than the value</h1><h1 id="specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected"><a href="#specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected" class="headerlink" title="specified for repl-ping-slave-period otherwise a timeout will be detected"></a>specified for repl-ping-slave-period otherwise a timeout will be detected</h1><h1 id="every-time-there-is-low-traffic-between-the-master-and-the-slave"><a href="#every-time-there-is-low-traffic-between-the-master-and-the-slave" class="headerlink" title="every time there is low traffic between the master and the slave."></a>every time there is low traffic between the master and the slave.</h1><h1 id="-57"><a href="#-57" class="headerlink" title></a></h1><h1 id="repl-timeout-60"><a href="#repl-timeout-60" class="headerlink" title="repl-timeout 60"></a>repl-timeout 60</h1><h1 id="Disable-TCP-NODELAY-on-the-slave-socket-after-SYNC"><a href="#Disable-TCP-NODELAY-on-the-slave-socket-after-SYNC" class="headerlink" title="Disable TCP_NODELAY on the slave socket after SYNC?"></a>Disable TCP_NODELAY on the slave socket after SYNC?</h1><h1 id="-58"><a href="#-58" class="headerlink" title></a></h1><h1 id="If-you-select-“yes”-Redis-will-use-a-smaller-number-of-TCP-packets-and"><a href="#If-you-select-“yes”-Redis-will-use-a-smaller-number-of-TCP-packets-and" class="headerlink" title="If you select “yes” Redis will use a smaller number of TCP packets and"></a>If you select “yes” Redis will use a smaller number of TCP packets and</h1><h1 id="less-bandwidth-to-send-data-to-slaves-But-this-can-add-a-delay-for"><a href="#less-bandwidth-to-send-data-to-slaves-But-this-can-add-a-delay-for" class="headerlink" title="less bandwidth to send data to slaves. But this can add a delay for"></a>less bandwidth to send data to slaves. But this can add a delay for</h1><h1 id="the-data-to-appear-on-the-slave-side-up-to-40-milliseconds-with"><a href="#the-data-to-appear-on-the-slave-side-up-to-40-milliseconds-with" class="headerlink" title="the data to appear on the slave side, up to 40 milliseconds with"></a>the data to appear on the slave side, up to 40 milliseconds with</h1><h1 id="Linux-kernels-using-a-default-configuration"><a href="#Linux-kernels-using-a-default-configuration" class="headerlink" title="Linux kernels using a default configuration."></a>Linux kernels using a default configuration.</h1><h1 id="-59"><a href="#-59" class="headerlink" title></a></h1><h1 id="If-you-select-“no”-the-delay-for-data-to-appear-on-the-slave-side-will"><a href="#If-you-select-“no”-the-delay-for-data-to-appear-on-the-slave-side-will" class="headerlink" title="If you select “no” the delay for data to appear on the slave side will"></a>If you select “no” the delay for data to appear on the slave side will</h1><h1 id="be-reduced-but-more-bandwidth-will-be-used-for-replication"><a href="#be-reduced-but-more-bandwidth-will-be-used-for-replication" class="headerlink" title="be reduced but more bandwidth will be used for replication."></a>be reduced but more bandwidth will be used for replication.</h1><h1 id="-60"><a href="#-60" class="headerlink" title></a></h1><h1 id="By-default-we-optimize-for-low-latency-but-in-very-high-traffic-conditions"><a href="#By-default-we-optimize-for-low-latency-but-in-very-high-traffic-conditions" class="headerlink" title="By default we optimize for low latency, but in very high traffic conditions"></a>By default we optimize for low latency, but in very high traffic conditions</h1><h1 id="or-when-the-master-and-slaves-are-many-hops-away-turning-this-to-“yes”-may"><a href="#or-when-the-master-and-slaves-are-many-hops-away-turning-this-to-“yes”-may" class="headerlink" title="or when the master and slaves are many hops away, turning this to “yes” may"></a>or when the master and slaves are many hops away, turning this to “yes” may</h1><h1 id="be-a-good-idea"><a href="#be-a-good-idea" class="headerlink" title="be a good idea."></a>be a good idea.</h1><p>repl-disable-tcp-nodelay no  </p>
<h1 id="Set-the-replication-backlog-size-The-backlog-is-a-buffer-that-accumulates"><a href="#Set-the-replication-backlog-size-The-backlog-is-a-buffer-that-accumulates" class="headerlink" title="Set the replication backlog size. The backlog is a buffer that accumulates"></a>Set the replication backlog size. The backlog is a buffer that accumulates</h1><h1 id="slave-data-when-slaves-are-disconnected-for-some-time-so-that-when-a-slave"><a href="#slave-data-when-slaves-are-disconnected-for-some-time-so-that-when-a-slave" class="headerlink" title="slave data when slaves are disconnected for some time, so that when a slave"></a>slave data when slaves are disconnected for some time, so that when a slave</h1><h1 id="wants-to-reconnect-again-often-a-full-resync-is-not-needed-but-a-partial"><a href="#wants-to-reconnect-again-often-a-full-resync-is-not-needed-but-a-partial" class="headerlink" title="wants to reconnect again, often a full resync is not needed, but a partial"></a>wants to reconnect again, often a full resync is not needed, but a partial</h1><h1 id="resync-is-enough-just-passing-the-portion-of-data-the-slave-missed-while"><a href="#resync-is-enough-just-passing-the-portion-of-data-the-slave-missed-while" class="headerlink" title="resync is enough, just passing the portion of data the slave missed while"></a>resync is enough, just passing the portion of data the slave missed while</h1><h1 id="disconnected"><a href="#disconnected" class="headerlink" title="disconnected."></a>disconnected.</h1><h1 id="-61"><a href="#-61" class="headerlink" title></a></h1><h1 id="The-bigger-the-replication-backlog-the-longer-the-time-the-slave-can-be"><a href="#The-bigger-the-replication-backlog-the-longer-the-time-the-slave-can-be" class="headerlink" title="The bigger the replication backlog, the longer the time the slave can be"></a>The bigger the replication backlog, the longer the time the slave can be</h1><h1 id="disconnected-and-later-be-able-to-perform-a-partial-resynchronization"><a href="#disconnected-and-later-be-able-to-perform-a-partial-resynchronization" class="headerlink" title="disconnected and later be able to perform a partial resynchronization."></a>disconnected and later be able to perform a partial resynchronization.</h1><h1 id="-62"><a href="#-62" class="headerlink" title></a></h1><h1 id="The-backlog-is-only-allocated-once-there-is-at-least-a-slave-connected"><a href="#The-backlog-is-only-allocated-once-there-is-at-least-a-slave-connected" class="headerlink" title="The backlog is only allocated once there is at least a slave connected."></a>The backlog is only allocated once there is at least a slave connected.</h1><h1 id="-63"><a href="#-63" class="headerlink" title></a></h1><h1 id="repl-backlog-size-1mb"><a href="#repl-backlog-size-1mb" class="headerlink" title="repl-backlog-size 1mb"></a>repl-backlog-size 1mb</h1><h1 id="After-a-master-has-no-longer-connected-slaves-for-some-time-the-backlog"><a href="#After-a-master-has-no-longer-connected-slaves-for-some-time-the-backlog" class="headerlink" title="After a master has no longer connected slaves for some time, the backlog"></a>After a master has no longer connected slaves for some time, the backlog</h1><h1 id="will-be-freed-The-following-option-configures-the-amount-of-seconds-that"><a href="#will-be-freed-The-following-option-configures-the-amount-of-seconds-that" class="headerlink" title="will be freed. The following option configures the amount of seconds that"></a>will be freed. The following option configures the amount of seconds that</h1><h1 id="need-to-elapse-starting-from-the-time-the-last-slave-disconnected-for"><a href="#need-to-elapse-starting-from-the-time-the-last-slave-disconnected-for" class="headerlink" title="need to elapse, starting from the time the last slave disconnected, for"></a>need to elapse, starting from the time the last slave disconnected, for</h1><h1 id="the-backlog-buffer-to-be-freed"><a href="#the-backlog-buffer-to-be-freed" class="headerlink" title="the backlog buffer to be freed."></a>the backlog buffer to be freed.</h1><h1 id="-64"><a href="#-64" class="headerlink" title></a></h1><h1 id="A-value-of-0-means-to-never-release-the-backlog"><a href="#A-value-of-0-means-to-never-release-the-backlog" class="headerlink" title="A value of 0 means to never release the backlog."></a>A value of 0 means to never release the backlog.</h1><h1 id="-65"><a href="#-65" class="headerlink" title></a></h1><h1 id="repl-backlog-ttl-3600"><a href="#repl-backlog-ttl-3600" class="headerlink" title="repl-backlog-ttl 3600"></a>repl-backlog-ttl 3600</h1><h1 id="The-slave-priority-is-an-integer-number-published-by-Redis-in-the-INFO-output"><a href="#The-slave-priority-is-an-integer-number-published-by-Redis-in-the-INFO-output" class="headerlink" title="The slave priority is an integer number published by Redis in the INFO output."></a>The slave priority is an integer number published by Redis in the INFO output.</h1><h1 id="It-is-used-by-Redis-Sentinel-in-order-to-select-a-slave-to-promote-into-a"><a href="#It-is-used-by-Redis-Sentinel-in-order-to-select-a-slave-to-promote-into-a" class="headerlink" title="It is used by Redis Sentinel in order to select a slave to promote into a"></a>It is used by Redis Sentinel in order to select a slave to promote into a</h1><h1 id="master-if-the-master-is-no-longer-working-correctly"><a href="#master-if-the-master-is-no-longer-working-correctly" class="headerlink" title="master if the master is no longer working correctly."></a>master if the master is no longer working correctly.</h1><h1 id="-66"><a href="#-66" class="headerlink" title></a></h1><h1 id="A-slave-with-a-low-priority-number-is-considered-better-for-promotion-so"><a href="#A-slave-with-a-low-priority-number-is-considered-better-for-promotion-so" class="headerlink" title="A slave with a low priority number is considered better for promotion, so"></a>A slave with a low priority number is considered better for promotion, so</h1><h1 id="for-instance-if-there-are-three-slaves-with-priority-10-100-25-Sentinel-will"><a href="#for-instance-if-there-are-three-slaves-with-priority-10-100-25-Sentinel-will" class="headerlink" title="for instance if there are three slaves with priority 10, 100, 25 Sentinel will"></a>for instance if there are three slaves with priority 10, 100, 25 Sentinel will</h1><h1 id="pick-the-one-with-priority-10-that-is-the-lowest"><a href="#pick-the-one-with-priority-10-that-is-the-lowest" class="headerlink" title="pick the one with priority 10, that is the lowest."></a>pick the one with priority 10, that is the lowest.</h1><h1 id="-67"><a href="#-67" class="headerlink" title></a></h1><h1 id="However-a-special-priority-of-0-marks-the-slave-as-not-able-to-perform-the"><a href="#However-a-special-priority-of-0-marks-the-slave-as-not-able-to-perform-the" class="headerlink" title="However a special priority of 0 marks the slave as not able to perform the"></a>However a special priority of 0 marks the slave as not able to perform the</h1><h1 id="role-of-master-so-a-slave-with-priority-of-0-will-never-be-selected-by"><a href="#role-of-master-so-a-slave-with-priority-of-0-will-never-be-selected-by" class="headerlink" title="role of master, so a slave with priority of 0 will never be selected by"></a>role of master, so a slave with priority of 0 will never be selected by</h1><h1 id="Redis-Sentinel-for-promotion"><a href="#Redis-Sentinel-for-promotion" class="headerlink" title="Redis Sentinel for promotion."></a>Redis Sentinel for promotion.</h1><h1 id="-68"><a href="#-68" class="headerlink" title></a></h1><h1 id="By-default-the-priority-is-100"><a href="#By-default-the-priority-is-100" class="headerlink" title="By default the priority is 100."></a>By default the priority is 100.</h1><p>slave-priority 100  </p>
<h1 id="It-is-possible-for-a-master-to-stop-accepting-writes-if-there-are-less-than"><a href="#It-is-possible-for-a-master-to-stop-accepting-writes-if-there-are-less-than" class="headerlink" title="It is possible for a master to stop accepting writes if there are less than"></a>It is possible for a master to stop accepting writes if there are less than</h1><h1 id="N-slaves-connected-having-a-lag-less-or-equal-than-M-seconds"><a href="#N-slaves-connected-having-a-lag-less-or-equal-than-M-seconds" class="headerlink" title="N slaves connected, having a lag less or equal than M seconds."></a>N slaves connected, having a lag less or equal than M seconds.</h1><h1 id="-69"><a href="#-69" class="headerlink" title></a></h1><h1 id="The-N-slaves-need-to-be-in-“online”-state"><a href="#The-N-slaves-need-to-be-in-“online”-state" class="headerlink" title="The N slaves need to be in “online” state."></a>The N slaves need to be in “online” state.</h1><h1 id="-70"><a href="#-70" class="headerlink" title></a></h1><h1 id="The-lag-in-seconds-that-must-be-lt-the-specified-value-is-calculated-from"><a href="#The-lag-in-seconds-that-must-be-lt-the-specified-value-is-calculated-from" class="headerlink" title="The lag in seconds, that must be &lt;= the specified value, is calculated from"></a>The lag in seconds, that must be &lt;= the specified value, is calculated from</h1><h1 id="the-last-ping-received-from-the-slave-that-is-usually-sent-every-second"><a href="#the-last-ping-received-from-the-slave-that-is-usually-sent-every-second" class="headerlink" title="the last ping received from the slave, that is usually sent every second."></a>the last ping received from the slave, that is usually sent every second.</h1><h1 id="-71"><a href="#-71" class="headerlink" title></a></h1><h1 id="This-option-does-not-GUARANTEE-that-N-replicas-will-accept-the-write-but"><a href="#This-option-does-not-GUARANTEE-that-N-replicas-will-accept-the-write-but" class="headerlink" title="This option does not GUARANTEE that N replicas will accept the write, but"></a>This option does not GUARANTEE that N replicas will accept the write, but</h1><h1 id="will-limit-the-window-of-exposure-for-lost-writes-in-case-not-enough-slaves"><a href="#will-limit-the-window-of-exposure-for-lost-writes-in-case-not-enough-slaves" class="headerlink" title="will limit the window of exposure for lost writes in case not enough slaves"></a>will limit the window of exposure for lost writes in case not enough slaves</h1><h1 id="are-available-to-the-specified-number-of-seconds"><a href="#are-available-to-the-specified-number-of-seconds" class="headerlink" title="are available, to the specified number of seconds."></a>are available, to the specified number of seconds.</h1><h1 id="-72"><a href="#-72" class="headerlink" title></a></h1><h1 id="For-example-to-require-at-least-3-slaves-with-a-lag-lt-10-seconds-use"><a href="#For-example-to-require-at-least-3-slaves-with-a-lag-lt-10-seconds-use" class="headerlink" title="For example to require at least 3 slaves with a lag &lt;= 10 seconds use:"></a>For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</h1><h1 id="-73"><a href="#-73" class="headerlink" title></a></h1><h1 id="min-slaves-to-write-3"><a href="#min-slaves-to-write-3" class="headerlink" title="min-slaves-to-write 3"></a>min-slaves-to-write 3</h1><h1 id="min-slaves-max-lag-10"><a href="#min-slaves-max-lag-10" class="headerlink" title="min-slaves-max-lag 10"></a>min-slaves-max-lag 10</h1><h1 id="-74"><a href="#-74" class="headerlink" title></a></h1><h1 id="Setting-one-or-the-other-to-0-disables-the-feature"><a href="#Setting-one-or-the-other-to-0-disables-the-feature" class="headerlink" title="Setting one or the other to 0 disables the feature."></a>Setting one or the other to 0 disables the feature.</h1><h1 id="-75"><a href="#-75" class="headerlink" title></a></h1><h1 id="By-default-min-slaves-to-write-is-set-to-0-feature-disabled-and"><a href="#By-default-min-slaves-to-write-is-set-to-0-feature-disabled-and" class="headerlink" title="By default min-slaves-to-write is set to 0 (feature disabled) and"></a>By default min-slaves-to-write is set to 0 (feature disabled) and</h1><h1 id="min-slaves-max-lag-is-set-to-10"><a href="#min-slaves-max-lag-is-set-to-10" class="headerlink" title="min-slaves-max-lag is set to 10."></a>min-slaves-max-lag is set to 10.</h1><h1 id="A-Redis-master-is-able-to-list-the-address-and-port-of-the-attached"><a href="#A-Redis-master-is-able-to-list-the-address-and-port-of-the-attached" class="headerlink" title="A Redis master is able to list the address and port of the attached"></a>A Redis master is able to list the address and port of the attached</h1><h1 id="slaves-in-different-ways-For-example-the-“INFO-replication”-section"><a href="#slaves-in-different-ways-For-example-the-“INFO-replication”-section" class="headerlink" title="slaves in different ways. For example the “INFO replication” section"></a>slaves in different ways. For example the “INFO replication” section</h1><h1 id="offers-this-information-which-is-used-among-other-tools-by"><a href="#offers-this-information-which-is-used-among-other-tools-by" class="headerlink" title="offers this information, which is used, among other tools, by"></a>offers this information, which is used, among other tools, by</h1><h1 id="Redis-Sentinel-in-order-to-discover-slave-instances"><a href="#Redis-Sentinel-in-order-to-discover-slave-instances" class="headerlink" title="Redis Sentinel in order to discover slave instances."></a>Redis Sentinel in order to discover slave instances.</h1><h1 id="Another-place-where-this-info-is-available-is-in-the-output-of-the"><a href="#Another-place-where-this-info-is-available-is-in-the-output-of-the" class="headerlink" title="Another place where this info is available is in the output of the"></a>Another place where this info is available is in the output of the</h1><h1 id="“ROLE”-command-of-a-masteer"><a href="#“ROLE”-command-of-a-masteer" class="headerlink" title="“ROLE” command of a masteer."></a>“ROLE” command of a masteer.</h1><h1 id="-76"><a href="#-76" class="headerlink" title></a></h1><h1 id="The-listed-IP-and-address-normally-reported-by-a-slave-is-obtained"><a href="#The-listed-IP-and-address-normally-reported-by-a-slave-is-obtained" class="headerlink" title="The listed IP and address normally reported by a slave is obtained"></a>The listed IP and address normally reported by a slave is obtained</h1><h1 id="in-the-following-way"><a href="#in-the-following-way" class="headerlink" title="in the following way:"></a>in the following way:</h1><h1 id="-77"><a href="#-77" class="headerlink" title></a></h1><h1 id="IP-The-address-is-auto-detected-by-checking-the-peer-address"><a href="#IP-The-address-is-auto-detected-by-checking-the-peer-address" class="headerlink" title="IP: The address is auto detected by checking the peer address"></a>IP: The address is auto detected by checking the peer address</h1><h1 id="of-the-socket-used-by-the-slave-to-connect-with-the-master"><a href="#of-the-socket-used-by-the-slave-to-connect-with-the-master" class="headerlink" title="of the socket used by the slave to connect with the master."></a>of the socket used by the slave to connect with the master.</h1><h1 id="-78"><a href="#-78" class="headerlink" title></a></h1><h1 id="Port-The-port-is-communicated-by-the-slave-during-the-replication"><a href="#Port-The-port-is-communicated-by-the-slave-during-the-replication" class="headerlink" title="Port: The port is communicated by the slave during the replication"></a>Port: The port is communicated by the slave during the replication</h1><h1 id="handshake-and-is-normally-the-port-that-the-slave-is-using-to"><a href="#handshake-and-is-normally-the-port-that-the-slave-is-using-to" class="headerlink" title="handshake, and is normally the port that the slave is using to"></a>handshake, and is normally the port that the slave is using to</h1><h1 id="list-for-connections"><a href="#list-for-connections" class="headerlink" title="list for connections."></a>list for connections.</h1><h1 id="-79"><a href="#-79" class="headerlink" title></a></h1><h1 id="However-when-port-forwarding-or-Network-Address-Translation-NAT-is"><a href="#However-when-port-forwarding-or-Network-Address-Translation-NAT-is" class="headerlink" title="However when port forwarding or Network Address Translation (NAT) is"></a>However when port forwarding or Network Address Translation (NAT) is</h1><h1 id="used-the-slave-may-be-actually-reachable-via-different-IP-and-port"><a href="#used-the-slave-may-be-actually-reachable-via-different-IP-and-port" class="headerlink" title="used, the slave may be actually reachable via different IP and port"></a>used, the slave may be actually reachable via different IP and port</h1><h1 id="pairs-The-following-two-options-can-be-used-by-a-slave-in-order-to"><a href="#pairs-The-following-two-options-can-be-used-by-a-slave-in-order-to" class="headerlink" title="pairs. The following two options can be used by a slave in order to"></a>pairs. The following two options can be used by a slave in order to</h1><h1 id="report-to-its-master-a-specific-set-of-IP-and-port-so-that-both-INFO"><a href="#report-to-its-master-a-specific-set-of-IP-and-port-so-that-both-INFO" class="headerlink" title="report to its master a specific set of IP and port, so that both INFO"></a>report to its master a specific set of IP and port, so that both INFO</h1><h1 id="and-ROLE-will-report-those-values"><a href="#and-ROLE-will-report-those-values" class="headerlink" title="and ROLE will report those values."></a>and ROLE will report those values.</h1><h1 id="-80"><a href="#-80" class="headerlink" title></a></h1><h1 id="There-is-no-need-to-use-both-the-options-if-you-need-to-override-just"><a href="#There-is-no-need-to-use-both-the-options-if-you-need-to-override-just" class="headerlink" title="There is no need to use both the options if you need to override just"></a>There is no need to use both the options if you need to override just</h1><h1 id="the-port-or-the-IP-address"><a href="#the-port-or-the-IP-address" class="headerlink" title="the port or the IP address."></a>the port or the IP address.</h1><h1 id="-81"><a href="#-81" class="headerlink" title></a></h1><h1 id="slave-announce-ip-5-5-5-5"><a href="#slave-announce-ip-5-5-5-5" class="headerlink" title="slave-announce-ip 5.5.5.5"></a>slave-announce-ip 5.5.5.5</h1><h1 id="slave-announce-port-1234"><a href="#slave-announce-port-1234" class="headerlink" title="slave-announce-port 1234"></a>slave-announce-port 1234</h1><p>################################## SECURITY ###################################  </p>
<h1 id="Require-clients-to-issue-AUTH-before-processing-any-other"><a href="#Require-clients-to-issue-AUTH-before-processing-any-other" class="headerlink" title="Require clients to issue AUTH  before processing any other"></a>Require clients to issue AUTH <password> before processing any other</password></h1><h1 id="commands-This-might-be-useful-in-environments-in-which-you-do-not-trust"><a href="#commands-This-might-be-useful-in-environments-in-which-you-do-not-trust" class="headerlink" title="commands.  This might be useful in environments in which you do not trust"></a>commands.  This might be useful in environments in which you do not trust</h1><h1 id="others-with-access-to-the-host-running-redis-server"><a href="#others-with-access-to-the-host-running-redis-server" class="headerlink" title="others with access to the host running redis-server."></a>others with access to the host running redis-server.</h1><h1 id="-82"><a href="#-82" class="headerlink" title></a></h1><h1 id="This-should-stay-commented-out-for-backward-compatibility-and-because-most"><a href="#This-should-stay-commented-out-for-backward-compatibility-and-because-most" class="headerlink" title="This should stay commented out for backward compatibility and because most"></a>This should stay commented out for backward compatibility and because most</h1><h1 id="people-do-not-need-auth-e-g-they-run-their-own-servers"><a href="#people-do-not-need-auth-e-g-they-run-their-own-servers" class="headerlink" title="people do not need auth (e.g. they run their own servers)."></a>people do not need auth (e.g. they run their own servers).</h1><h1 id="-83"><a href="#-83" class="headerlink" title></a></h1><h1 id="Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to"><a href="#Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to" class="headerlink" title="Warning: since Redis is pretty fast an outside user can try up to"></a>Warning: since Redis is pretty fast an outside user can try up to</h1><h1 id="150k-passwords-per-second-against-a-good-box-This-means-that-you-should"><a href="#150k-passwords-per-second-against-a-good-box-This-means-that-you-should" class="headerlink" title="150k passwords per second against a good box. This means that you should"></a>150k passwords per second against a good box. This means that you should</h1><h1 id="use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break"><a href="#use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break" class="headerlink" title="use a very strong password otherwise it will be very easy to break."></a>use a very strong password otherwise it will be very easy to break.</h1><h1 id="-84"><a href="#-84" class="headerlink" title></a></h1><h1 id="requirepass-foobared"><a href="#requirepass-foobared" class="headerlink" title="requirepass foobared"></a>requirepass foobared</h1><h1 id="Command-renaming"><a href="#Command-renaming" class="headerlink" title="Command renaming."></a>Command renaming.</h1><h1 id="-85"><a href="#-85" class="headerlink" title></a></h1><h1 id="It-is-possible-to-change-the-name-of-dangerous-commands-in-a-shared"><a href="#It-is-possible-to-change-the-name-of-dangerous-commands-in-a-shared" class="headerlink" title="It is possible to change the name of dangerous commands in a shared"></a>It is possible to change the name of dangerous commands in a shared</h1><h1 id="environment-For-instance-the-CONFIG-command-may-be-renamed-into-something"><a href="#environment-For-instance-the-CONFIG-command-may-be-renamed-into-something" class="headerlink" title="environment. For instance the CONFIG command may be renamed into something"></a>environment. For instance the CONFIG command may be renamed into something</h1><h1 id="hard-to-guess-so-that-it-will-still-be-available-for-internal-use-tools"><a href="#hard-to-guess-so-that-it-will-still-be-available-for-internal-use-tools" class="headerlink" title="hard to guess so that it will still be available for internal-use tools"></a>hard to guess so that it will still be available for internal-use tools</h1><h1 id="but-not-available-for-general-clients"><a href="#but-not-available-for-general-clients" class="headerlink" title="but not available for general clients."></a>but not available for general clients.</h1><h1 id="-86"><a href="#-86" class="headerlink" title></a></h1><h1 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h1><h1 id="-87"><a href="#-87" class="headerlink" title></a></h1><h1 id="rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52"><a href="#rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52" class="headerlink" title="rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52"></a>rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</h1><h1 id="-88"><a href="#-88" class="headerlink" title></a></h1><h1 id="It-is-also-possible-to-completely-kill-a-command-by-renaming-it-into"><a href="#It-is-also-possible-to-completely-kill-a-command-by-renaming-it-into" class="headerlink" title="It is also possible to completely kill a command by renaming it into"></a>It is also possible to completely kill a command by renaming it into</h1><h1 id="an-empty-string"><a href="#an-empty-string" class="headerlink" title="an empty string:"></a>an empty string:</h1><h1 id="-89"><a href="#-89" class="headerlink" title></a></h1><h1 id="rename-command-CONFIG-“”"><a href="#rename-command-CONFIG-“”" class="headerlink" title="rename-command CONFIG “”"></a>rename-command CONFIG “”</h1><h1 id="-90"><a href="#-90" class="headerlink" title></a></h1><h1 id="Please-note-that-changing-the-name-of-commands-that-are-logged-into-the"><a href="#Please-note-that-changing-the-name-of-commands-that-are-logged-into-the" class="headerlink" title="Please note that changing the name of commands that are logged into the"></a>Please note that changing the name of commands that are logged into the</h1><h1 id="AOF-file-or-transmitted-to-slaves-may-cause-problems"><a href="#AOF-file-or-transmitted-to-slaves-may-cause-problems" class="headerlink" title="AOF file or transmitted to slaves may cause problems."></a>AOF file or transmitted to slaves may cause problems.</h1><p>################################### LIMITS ####################################  </p>
<h1 id="Set-the-max-number-of-connected-clients-at-the-same-time-By-default"><a href="#Set-the-max-number-of-connected-clients-at-the-same-time-By-default" class="headerlink" title="Set the max number of connected clients at the same time. By default"></a>Set the max number of connected clients at the same time. By default</h1><h1 id="this-limit-is-set-to-10000-clients-however-if-the-Redis-server-is-not"><a href="#this-limit-is-set-to-10000-clients-however-if-the-Redis-server-is-not" class="headerlink" title="this limit is set to 10000 clients, however if the Redis server is not"></a>this limit is set to 10000 clients, however if the Redis server is not</h1><h1 id="able-to-configure-the-process-file-limit-to-allow-for-the-specified-limit"><a href="#able-to-configure-the-process-file-limit-to-allow-for-the-specified-limit" class="headerlink" title="able to configure the process file limit to allow for the specified limit"></a>able to configure the process file limit to allow for the specified limit</h1><h1 id="the-max-number-of-allowed-clients-is-set-to-the-current-file-limit"><a href="#the-max-number-of-allowed-clients-is-set-to-the-current-file-limit" class="headerlink" title="the max number of allowed clients is set to the current file limit"></a>the max number of allowed clients is set to the current file limit</h1><h1 id="minus-32-as-Redis-reserves-a-few-file-descriptors-for-internal-uses"><a href="#minus-32-as-Redis-reserves-a-few-file-descriptors-for-internal-uses" class="headerlink" title="minus 32 (as Redis reserves a few file descriptors for internal uses)."></a>minus 32 (as Redis reserves a few file descriptors for internal uses).</h1><h1 id="-91"><a href="#-91" class="headerlink" title></a></h1><h1 id="Once-the-limit-is-reached-Redis-will-close-all-the-new-connections-sending"><a href="#Once-the-limit-is-reached-Redis-will-close-all-the-new-connections-sending" class="headerlink" title="Once the limit is reached Redis will close all the new connections sending"></a>Once the limit is reached Redis will close all the new connections sending</h1><h1 id="an-error-‘max-number-of-clients-reached’"><a href="#an-error-‘max-number-of-clients-reached’" class="headerlink" title="an error ‘max number of clients reached’."></a>an error ‘max number of clients reached’.</h1><h1 id="-92"><a href="#-92" class="headerlink" title></a></h1><h1 id="maxclients-10000"><a href="#maxclients-10000" class="headerlink" title="maxclients 10000"></a>maxclients 10000</h1><h1 id="Don’t-use-more-memory-than-the-specified-amount-of-bytes"><a href="#Don’t-use-more-memory-than-the-specified-amount-of-bytes" class="headerlink" title="Don’t use more memory than the specified amount of bytes."></a>Don’t use more memory than the specified amount of bytes.</h1><h1 id="When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys"><a href="#When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys" class="headerlink" title="When the memory limit is reached Redis will try to remove keys"></a>When the memory limit is reached Redis will try to remove keys</h1><h1 id="according-to-the-eviction-policy-selected-see-maxmemory-policy"><a href="#according-to-the-eviction-policy-selected-see-maxmemory-policy" class="headerlink" title="according to the eviction policy selected (see maxmemory-policy)."></a>according to the eviction policy selected (see maxmemory-policy).</h1><h1 id="-93"><a href="#-93" class="headerlink" title></a></h1><h1 id="If-Redis-can’t-remove-keys-according-to-the-policy-or-if-the-policy-is"><a href="#If-Redis-can’t-remove-keys-according-to-the-policy-or-if-the-policy-is" class="headerlink" title="If Redis can’t remove keys according to the policy, or if the policy is"></a>If Redis can’t remove keys according to the policy, or if the policy is</h1><h1 id="set-to-‘noeviction’-Redis-will-start-to-reply-with-errors-to-commands"><a href="#set-to-‘noeviction’-Redis-will-start-to-reply-with-errors-to-commands" class="headerlink" title="set to ‘noeviction’, Redis will start to reply with errors to commands"></a>set to ‘noeviction’, Redis will start to reply with errors to commands</h1><h1 id="that-would-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue"><a href="#that-would-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue" class="headerlink" title="that would use more memory, like SET, LPUSH, and so on, and will continue"></a>that would use more memory, like SET, LPUSH, and so on, and will continue</h1><h1 id="to-reply-to-read-only-commands-like-GET"><a href="#to-reply-to-read-only-commands-like-GET" class="headerlink" title="to reply to read-only commands like GET."></a>to reply to read-only commands like GET.</h1><h1 id="-94"><a href="#-94" class="headerlink" title></a></h1><h1 id="This-option-is-usually-useful-when-using-Redis-as-an-LRU-cache-or-to-set"><a href="#This-option-is-usually-useful-when-using-Redis-as-an-LRU-cache-or-to-set" class="headerlink" title="This option is usually useful when using Redis as an LRU cache, or to set"></a>This option is usually useful when using Redis as an LRU cache, or to set</h1><h1 id="a-hard-memory-limit-for-an-instance-using-the-‘noeviction’-policy"><a href="#a-hard-memory-limit-for-an-instance-using-the-‘noeviction’-policy" class="headerlink" title="a hard memory limit for an instance (using the ‘noeviction’ policy)."></a>a hard memory limit for an instance (using the ‘noeviction’ policy).</h1><h1 id="-95"><a href="#-95" class="headerlink" title></a></h1><h1 id="WARNING-If-you-have-slaves-attached-to-an-instance-with-maxmemory-on"><a href="#WARNING-If-you-have-slaves-attached-to-an-instance-with-maxmemory-on" class="headerlink" title="WARNING: If you have slaves attached to an instance with maxmemory on,"></a>WARNING: If you have slaves attached to an instance with maxmemory on,</h1><h1 id="the-size-of-the-output-buffers-needed-to-feed-the-slaves-are-subtracted"><a href="#the-size-of-the-output-buffers-needed-to-feed-the-slaves-are-subtracted" class="headerlink" title="the size of the output buffers needed to feed the slaves are subtracted"></a>the size of the output buffers needed to feed the slaves are subtracted</h1><h1 id="from-the-used-memory-count-so-that-network-problems-resyncs-will"><a href="#from-the-used-memory-count-so-that-network-problems-resyncs-will" class="headerlink" title="from the used memory count, so that network problems / resyncs will"></a>from the used memory count, so that network problems / resyncs will</h1><h1 id="not-trigger-a-loop-where-keys-are-evicted-and-in-turn-the-output"><a href="#not-trigger-a-loop-where-keys-are-evicted-and-in-turn-the-output" class="headerlink" title="not trigger a loop where keys are evicted, and in turn the output"></a>not trigger a loop where keys are evicted, and in turn the output</h1><h1 id="buffer-of-slaves-is-full-with-DELs-of-keys-evicted-triggering-the-deletion"><a href="#buffer-of-slaves-is-full-with-DELs-of-keys-evicted-triggering-the-deletion" class="headerlink" title="buffer of slaves is full with DELs of keys evicted triggering the deletion"></a>buffer of slaves is full with DELs of keys evicted triggering the deletion</h1><h1 id="of-more-keys-and-so-forth-until-the-database-is-completely-emptied"><a href="#of-more-keys-and-so-forth-until-the-database-is-completely-emptied" class="headerlink" title="of more keys, and so forth until the database is completely emptied."></a>of more keys, and so forth until the database is completely emptied.</h1><h1 id="-96"><a href="#-96" class="headerlink" title></a></h1><h1 id="In-short…-if-you-have-slaves-attached-it-is-suggested-that-you-set-a-lower"><a href="#In-short…-if-you-have-slaves-attached-it-is-suggested-that-you-set-a-lower" class="headerlink" title="In short… if you have slaves attached it is suggested that you set a lower"></a>In short… if you have slaves attached it is suggested that you set a lower</h1><h1 id="limit-for-maxmemory-so-that-there-is-some-free-RAM-on-the-system-for-slave"><a href="#limit-for-maxmemory-so-that-there-is-some-free-RAM-on-the-system-for-slave" class="headerlink" title="limit for maxmemory so that there is some free RAM on the system for slave"></a>limit for maxmemory so that there is some free RAM on the system for slave</h1><h1 id="output-buffers-but-this-is-not-needed-if-the-policy-is-‘noeviction’"><a href="#output-buffers-but-this-is-not-needed-if-the-policy-is-‘noeviction’" class="headerlink" title="output buffers (but this is not needed if the policy is ‘noeviction’)."></a>output buffers (but this is not needed if the policy is ‘noeviction’).</h1><h1 id="-97"><a href="#-97" class="headerlink" title></a></h1><h1 id="maxmemory"><a href="#maxmemory" class="headerlink" title="maxmemory "></a>maxmemory <bytes></bytes></h1><h1 id="MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory"><a href="#MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory" class="headerlink" title="MAXMEMORY POLICY: how Redis will select what to remove when maxmemory"></a>MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</h1><h1 id="is-reached-You-can-select-among-five-behaviors"><a href="#is-reached-You-can-select-among-five-behaviors" class="headerlink" title="is reached. You can select among five behaviors:"></a>is reached. You can select among five behaviors:</h1><h1 id="-98"><a href="#-98" class="headerlink" title></a></h1><h1 id="volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm"><a href="#volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm" class="headerlink" title="volatile-lru -&gt; remove the key with an expire set using an LRU algorithm"></a>volatile-lru -&gt; remove the key with an expire set using an LRU algorithm</h1><h1 id="allkeys-lru-gt-remove-any-key-according-to-the-LRU-algorithm"><a href="#allkeys-lru-gt-remove-any-key-according-to-the-LRU-algorithm" class="headerlink" title="allkeys-lru -&gt; remove any key according to the LRU algorithm"></a>allkeys-lru -&gt; remove any key according to the LRU algorithm</h1><h1 id="volatile-random-gt-remove-a-random-key-with-an-expire-set"><a href="#volatile-random-gt-remove-a-random-key-with-an-expire-set" class="headerlink" title="volatile-random -&gt; remove a random key with an expire set"></a>volatile-random -&gt; remove a random key with an expire set</h1><h1 id="allkeys-random-gt-remove-a-random-key-any-key"><a href="#allkeys-random-gt-remove-a-random-key-any-key" class="headerlink" title="allkeys-random -&gt; remove a random key, any key"></a>allkeys-random -&gt; remove a random key, any key</h1><h1 id="volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL"><a href="#volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL" class="headerlink" title="volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)"></a>volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)</h1><h1 id="noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations"><a href="#noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations" class="headerlink" title="noeviction -&gt; don’t expire at all, just return an error on write operations"></a>noeviction -&gt; don’t expire at all, just return an error on write operations</h1><h1 id="-99"><a href="#-99" class="headerlink" title></a></h1><h1 id="Note-with-any-of-the-above-policies-Redis-will-return-an-error-on-write"><a href="#Note-with-any-of-the-above-policies-Redis-will-return-an-error-on-write" class="headerlink" title="Note: with any of the above policies, Redis will return an error on write"></a>Note: with any of the above policies, Redis will return an error on write</h1><h1 id="operations-when-there-are-no-suitable-keys-for-eviction"><a href="#operations-when-there-are-no-suitable-keys-for-eviction" class="headerlink" title="operations, when there are no suitable keys for eviction."></a>operations, when there are no suitable keys for eviction.</h1><h1 id="-100"><a href="#-100" class="headerlink" title></a></h1><h1 id="At-the-date-of-writing-these-commands-are-set-setnx-setex-append"><a href="#At-the-date-of-writing-these-commands-are-set-setnx-setex-append" class="headerlink" title="At the date of writing these commands are: set setnx setex append"></a>At the date of writing these commands are: set setnx setex append</h1><h1 id="incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd"><a href="#incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd" class="headerlink" title="incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd"></a>incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</h1><h1 id="sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby"><a href="#sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby" class="headerlink" title="sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby"></a>sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</h1><h1 id="zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby"><a href="#zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby" class="headerlink" title="zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby"></a>zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</h1><h1 id="getset-mset-msetnx-exec-sort"><a href="#getset-mset-msetnx-exec-sort" class="headerlink" title="getset mset msetnx exec sort"></a>getset mset msetnx exec sort</h1><h1 id="-101"><a href="#-101" class="headerlink" title></a></h1><h1 id="The-default-is"><a href="#The-default-is" class="headerlink" title="The default is:"></a>The default is:</h1><h1 id="-102"><a href="#-102" class="headerlink" title></a></h1><h1 id="maxmemory-policy-noeviction"><a href="#maxmemory-policy-noeviction" class="headerlink" title="maxmemory-policy noeviction"></a>maxmemory-policy noeviction</h1><h1 id="LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated"><a href="#LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated" class="headerlink" title="LRU and minimal TTL algorithms are not precise algorithms but approximated"></a>LRU and minimal TTL algorithms are not precise algorithms but approximated</h1><h1 id="algorithms-in-order-to-save-memory-so-you-can-tune-it-for-speed-or"><a href="#algorithms-in-order-to-save-memory-so-you-can-tune-it-for-speed-or" class="headerlink" title="algorithms (in order to save memory), so you can tune it for speed or"></a>algorithms (in order to save memory), so you can tune it for speed or</h1><h1 id="accuracy-For-default-Redis-will-check-five-keys-and-pick-the-one-that-was"><a href="#accuracy-For-default-Redis-will-check-five-keys-and-pick-the-one-that-was" class="headerlink" title="accuracy. For default Redis will check five keys and pick the one that was"></a>accuracy. For default Redis will check five keys and pick the one that was</h1><h1 id="used-less-recently-you-can-change-the-sample-size-using-the-following"><a href="#used-less-recently-you-can-change-the-sample-size-using-the-following" class="headerlink" title="used less recently, you can change the sample size using the following"></a>used less recently, you can change the sample size using the following</h1><h1 id="configuration-directive"><a href="#configuration-directive" class="headerlink" title="configuration directive."></a>configuration directive.</h1><h1 id="-103"><a href="#-103" class="headerlink" title></a></h1><h1 id="The-default-of-5-produces-good-enough-results-10-Approximates-very-closely"><a href="#The-default-of-5-produces-good-enough-results-10-Approximates-very-closely" class="headerlink" title="The default of 5 produces good enough results. 10 Approximates very closely"></a>The default of 5 produces good enough results. 10 Approximates very closely</h1><h1 id="true-LRU-but-costs-a-bit-more-CPU-3-is-very-fast-but-not-very-accurate"><a href="#true-LRU-but-costs-a-bit-more-CPU-3-is-very-fast-but-not-very-accurate" class="headerlink" title="true LRU but costs a bit more CPU. 3 is very fast but not very accurate."></a>true LRU but costs a bit more CPU. 3 is very fast but not very accurate.</h1><h1 id="-104"><a href="#-104" class="headerlink" title></a></h1><h1 id="maxmemory-samples-5"><a href="#maxmemory-samples-5" class="headerlink" title="maxmemory-samples 5"></a>maxmemory-samples 5</h1><p>############################## APPEND ONLY MODE ###############################  </p>
<h1 id="By-default-Redis-asynchronously-dumps-the-dataset-on-disk-This-mode-is"><a href="#By-default-Redis-asynchronously-dumps-the-dataset-on-disk-This-mode-is" class="headerlink" title="By default Redis asynchronously dumps the dataset on disk. This mode is"></a>By default Redis asynchronously dumps the dataset on disk. This mode is</h1><h1 id="good-enough-in-many-applications-but-an-issue-with-the-Redis-process-or"><a href="#good-enough-in-many-applications-but-an-issue-with-the-Redis-process-or" class="headerlink" title="good enough in many applications, but an issue with the Redis process or"></a>good enough in many applications, but an issue with the Redis process or</h1><h1 id="a-power-outage-may-result-into-a-few-minutes-of-writes-lost-depending-on"><a href="#a-power-outage-may-result-into-a-few-minutes-of-writes-lost-depending-on" class="headerlink" title="a power outage may result into a few minutes of writes lost (depending on"></a>a power outage may result into a few minutes of writes lost (depending on</h1><h1 id="the-configured-save-points"><a href="#the-configured-save-points" class="headerlink" title="the configured save points)."></a>the configured save points).</h1><h1 id="-105"><a href="#-105" class="headerlink" title></a></h1><h1 id="The-Append-Only-File-is-an-alternative-persistence-mode-that-provides"><a href="#The-Append-Only-File-is-an-alternative-persistence-mode-that-provides" class="headerlink" title="The Append Only File is an alternative persistence mode that provides"></a>The Append Only File is an alternative persistence mode that provides</h1><h1 id="much-better-durability-For-instance-using-the-default-data-fsync-policy"><a href="#much-better-durability-For-instance-using-the-default-data-fsync-policy" class="headerlink" title="much better durability. For instance using the default data fsync policy"></a>much better durability. For instance using the default data fsync policy</h1><h1 id="see-later-in-the-config-file-Redis-can-lose-just-one-second-of-writes-in-a"><a href="#see-later-in-the-config-file-Redis-can-lose-just-one-second-of-writes-in-a" class="headerlink" title="(see later in the config file) Redis can lose just one second of writes in a"></a>(see later in the config file) Redis can lose just one second of writes in a</h1><h1 id="dramatic-event-like-a-server-power-outage-or-a-single-write-if-something"><a href="#dramatic-event-like-a-server-power-outage-or-a-single-write-if-something" class="headerlink" title="dramatic event like a server power outage, or a single write if something"></a>dramatic event like a server power outage, or a single write if something</h1><h1 id="wrong-with-the-Redis-process-itself-happens-but-the-operating-system-is"><a href="#wrong-with-the-Redis-process-itself-happens-but-the-operating-system-is" class="headerlink" title="wrong with the Redis process itself happens, but the operating system is"></a>wrong with the Redis process itself happens, but the operating system is</h1><h1 id="still-running-correctly"><a href="#still-running-correctly" class="headerlink" title="still running correctly."></a>still running correctly.</h1><h1 id="-106"><a href="#-106" class="headerlink" title></a></h1><h1 id="AOF-and-RDB-persistence-can-be-enabled-at-the-same-time-without-problems"><a href="#AOF-and-RDB-persistence-can-be-enabled-at-the-same-time-without-problems" class="headerlink" title="AOF and RDB persistence can be enabled at the same time without problems."></a>AOF and RDB persistence can be enabled at the same time without problems.</h1><h1 id="If-the-AOF-is-enabled-on-startup-Redis-will-load-the-AOF-that-is-the-file"><a href="#If-the-AOF-is-enabled-on-startup-Redis-will-load-the-AOF-that-is-the-file" class="headerlink" title="If the AOF is enabled on startup Redis will load the AOF, that is the file"></a>If the AOF is enabled on startup Redis will load the AOF, that is the file</h1><h1 id="with-the-better-durability-guarantees"><a href="#with-the-better-durability-guarantees" class="headerlink" title="with the better durability guarantees."></a>with the better durability guarantees.</h1><h1 id="-107"><a href="#-107" class="headerlink" title></a></h1><h1 id="Please-check-http-redis-io-topics-persistence-for-more-information"><a href="#Please-check-http-redis-io-topics-persistence-for-more-information" class="headerlink" title="Please check http://redis.io/topics/persistence for more information."></a>Please check <a href="http://redis.io/topics/persistence" target="_blank" rel="noopener">http://redis.io/topics/persistence</a> for more information.</h1><p>appendonly no  </p>
<h1 id="The-name-of-the-append-only-file-default-“appendonly-aof”"><a href="#The-name-of-the-append-only-file-default-“appendonly-aof”" class="headerlink" title="The name of the append only file (default: “appendonly.aof”)"></a>The name of the append only file (default: “appendonly.aof”)</h1><p>appendfilename “appendonly.aof”  </p>
<h1 id="The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk"><a href="#The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk" class="headerlink" title="The fsync() call tells the Operating System to actually write data on disk"></a>The fsync() call tells the Operating System to actually write data on disk</h1><h1 id="instead-of-waiting-for-more-data-in-the-output-buffer-Some-OS-will-really-flush"><a href="#instead-of-waiting-for-more-data-in-the-output-buffer-Some-OS-will-really-flush" class="headerlink" title="instead of waiting for more data in the output buffer. Some OS will really flush"></a>instead of waiting for more data in the output buffer. Some OS will really flush</h1><h1 id="data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP"><a href="#data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP" class="headerlink" title="data on disk, some other OS will just try to do it ASAP."></a>data on disk, some other OS will just try to do it ASAP.</h1><h1 id="-108"><a href="#-108" class="headerlink" title></a></h1><h1 id="Redis-supports-three-different-modes"><a href="#Redis-supports-three-different-modes" class="headerlink" title="Redis supports three different modes:"></a>Redis supports three different modes:</h1><h1 id="-109"><a href="#-109" class="headerlink" title></a></h1><h1 id="no-don’t-fsync-just-let-the-OS-flush-the-data-when-it-wants-Faster"><a href="#no-don’t-fsync-just-let-the-OS-flush-the-data-when-it-wants-Faster" class="headerlink" title="no: don’t fsync, just let the OS flush the data when it wants. Faster."></a>no: don’t fsync, just let the OS flush the data when it wants. Faster.</h1><h1 id="always-fsync-after-every-write-to-the-append-only-log-Slow-Safest"><a href="#always-fsync-after-every-write-to-the-append-only-log-Slow-Safest" class="headerlink" title="always: fsync after every write to the append only log. Slow, Safest."></a>always: fsync after every write to the append only log. Slow, Safest.</h1><h1 id="everysec-fsync-only-one-time-every-second-Compromise"><a href="#everysec-fsync-only-one-time-every-second-Compromise" class="headerlink" title="everysec: fsync only one time every second. Compromise."></a>everysec: fsync only one time every second. Compromise.</h1><h1 id="-110"><a href="#-110" class="headerlink" title></a></h1><h1 id="The-default-is-“everysec”-as-that’s-usually-the-right-compromise-between"><a href="#The-default-is-“everysec”-as-that’s-usually-the-right-compromise-between" class="headerlink" title="The default is “everysec”, as that’s usually the right compromise between"></a>The default is “everysec”, as that’s usually the right compromise between</h1><h1 id="speed-and-data-safety-It’s-up-to-you-to-understand-if-you-can-relax-this-to"><a href="#speed-and-data-safety-It’s-up-to-you-to-understand-if-you-can-relax-this-to" class="headerlink" title="speed and data safety. It’s up to you to understand if you can relax this to"></a>speed and data safety. It’s up to you to understand if you can relax this to</h1><h1 id="“no”-that-will-let-the-operating-system-flush-the-output-buffer-when"><a href="#“no”-that-will-let-the-operating-system-flush-the-output-buffer-when" class="headerlink" title="“no” that will let the operating system flush the output buffer when"></a>“no” that will let the operating system flush the output buffer when</h1><h1 id="it-wants-for-better-performances-but-if-you-can-live-with-the-idea-of"><a href="#it-wants-for-better-performances-but-if-you-can-live-with-the-idea-of" class="headerlink" title="it wants, for better performances (but if you can live with the idea of"></a>it wants, for better performances (but if you can live with the idea of</h1><h1 id="some-data-loss-consider-the-default-persistence-mode-that’s-snapshotting"><a href="#some-data-loss-consider-the-default-persistence-mode-that’s-snapshotting" class="headerlink" title="some data loss consider the default persistence mode that’s snapshotting),"></a>some data loss consider the default persistence mode that’s snapshotting),</h1><h1 id="or-on-the-contrary-use-“always”-that’s-very-slow-but-a-bit-safer-than"><a href="#or-on-the-contrary-use-“always”-that’s-very-slow-but-a-bit-safer-than" class="headerlink" title="or on the contrary, use “always” that’s very slow but a bit safer than"></a>or on the contrary, use “always” that’s very slow but a bit safer than</h1><h1 id="everysec"><a href="#everysec" class="headerlink" title="everysec."></a>everysec.</h1><h1 id="-111"><a href="#-111" class="headerlink" title></a></h1><h1 id="More-details-please-check-the-following-article"><a href="#More-details-please-check-the-following-article" class="headerlink" title="More details please check the following article:"></a>More details please check the following article:</h1><h1 id="http-antirez-com-post-redis-persistence-demystified-html"><a href="#http-antirez-com-post-redis-persistence-demystified-html" class="headerlink" title="http://antirez.com/post/redis-persistence-demystified.html"></a><a href="http://antirez.com/post/redis-persistence-demystified.html" target="_blank" rel="noopener">http://antirez.com/post/redis-persistence-demystified.html</a></h1><h1 id="-112"><a href="#-112" class="headerlink" title></a></h1><h1 id="If-unsure-use-“everysec”"><a href="#If-unsure-use-“everysec”" class="headerlink" title="If unsure, use “everysec”."></a>If unsure, use “everysec”.</h1><h1 id="appendfsync-always"><a href="#appendfsync-always" class="headerlink" title="appendfsync always"></a>appendfsync always</h1><p>appendfsync everysec  </p>
<h1 id="appendfsync-no"><a href="#appendfsync-no" class="headerlink" title="appendfsync no"></a>appendfsync no</h1><h1 id="When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background"><a href="#When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background" class="headerlink" title="When the AOF fsync policy is set to always or everysec, and a background"></a>When the AOF fsync policy is set to always or everysec, and a background</h1><h1 id="saving-process-a-background-save-or-AOF-log-background-rewriting-is"><a href="#saving-process-a-background-save-or-AOF-log-background-rewriting-is" class="headerlink" title="saving process (a background save or AOF log background rewriting) is"></a>saving process (a background save or AOF log background rewriting) is</h1><h1 id="performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations"><a href="#performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations" class="headerlink" title="performing a lot of I/O against the disk, in some Linux configurations"></a>performing a lot of I/O against the disk, in some Linux configurations</h1><h1 id="Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for"><a href="#Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for" class="headerlink" title="Redis may block too long on the fsync() call. Note that there is no fix for"></a>Redis may block too long on the fsync() call. Note that there is no fix for</h1><h1 id="this-currently-as-even-performing-fsync-in-a-different-thread-will-block"><a href="#this-currently-as-even-performing-fsync-in-a-different-thread-will-block" class="headerlink" title="this currently, as even performing fsync in a different thread will block"></a>this currently, as even performing fsync in a different thread will block</h1><h1 id="our-synchronous-write-2-call"><a href="#our-synchronous-write-2-call" class="headerlink" title="our synchronous write(2) call."></a>our synchronous write(2) call.</h1><h1 id="-113"><a href="#-113" class="headerlink" title></a></h1><h1 id="In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option"><a href="#In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option" class="headerlink" title="In order to mitigate this problem it’s possible to use the following option"></a>In order to mitigate this problem it’s possible to use the following option</h1><h1 id="that-will-prevent-fsync-from-being-called-in-the-main-process-while-a"><a href="#that-will-prevent-fsync-from-being-called-in-the-main-process-while-a" class="headerlink" title="that will prevent fsync() from being called in the main process while a"></a>that will prevent fsync() from being called in the main process while a</h1><h1 id="BGSAVE-or-BGREWRITEAOF-is-in-progress"><a href="#BGSAVE-or-BGREWRITEAOF-is-in-progress" class="headerlink" title="BGSAVE or BGREWRITEAOF is in progress."></a>BGSAVE or BGREWRITEAOF is in progress.</h1><h1 id="-114"><a href="#-114" class="headerlink" title></a></h1><h1 id="This-means-that-while-another-child-is-saving-the-durability-of-Redis-is"><a href="#This-means-that-while-another-child-is-saving-the-durability-of-Redis-is" class="headerlink" title="This means that while another child is saving, the durability of Redis is"></a>This means that while another child is saving, the durability of Redis is</h1><h1 id="the-same-as-“appendfsync-none”-In-practical-terms-this-means-that-it-is"><a href="#the-same-as-“appendfsync-none”-In-practical-terms-this-means-that-it-is" class="headerlink" title="the same as “appendfsync none”. In practical terms, this means that it is"></a>the same as “appendfsync none”. In practical terms, this means that it is</h1><h1 id="possible-to-lose-up-to-30-seconds-of-log-in-the-worst-scenario-with-the"><a href="#possible-to-lose-up-to-30-seconds-of-log-in-the-worst-scenario-with-the" class="headerlink" title="possible to lose up to 30 seconds of log in the worst scenario (with the"></a>possible to lose up to 30 seconds of log in the worst scenario (with the</h1><h1 id="default-Linux-settings"><a href="#default-Linux-settings" class="headerlink" title="default Linux settings)."></a>default Linux settings).</h1><h1 id="-115"><a href="#-115" class="headerlink" title></a></h1><h1 id="If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as"><a href="#If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as" class="headerlink" title="If you have latency problems turn this to “yes”. Otherwise leave it as"></a>If you have latency problems turn this to “yes”. Otherwise leave it as</h1><h1 id="“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability"><a href="#“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability" class="headerlink" title="“no” that is the safest pick from the point of view of durability."></a>“no” that is the safest pick from the point of view of durability.</h1><p>no-appendfsync-on-rewrite no  </p>
<h1 id="Automatic-rewrite-of-the-append-only-file"><a href="#Automatic-rewrite-of-the-append-only-file" class="headerlink" title="Automatic rewrite of the append only file."></a>Automatic rewrite of the append only file.</h1><h1 id="Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling"><a href="#Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling" class="headerlink" title="Redis is able to automatically rewrite the log file implicitly calling"></a>Redis is able to automatically rewrite the log file implicitly calling</h1><h1 id="BGREWRITEAOF-when-the-AOF-log-size-grows-by-the-specified-percentage"><a href="#BGREWRITEAOF-when-the-AOF-log-size-grows-by-the-specified-percentage" class="headerlink" title="BGREWRITEAOF when the AOF log size grows by the specified percentage."></a>BGREWRITEAOF when the AOF log size grows by the specified percentage.</h1><h1 id="-116"><a href="#-116" class="headerlink" title></a></h1><h1 id="This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the"><a href="#This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the" class="headerlink" title="This is how it works: Redis remembers the size of the AOF file after the"></a>This is how it works: Redis remembers the size of the AOF file after the</h1><h1 id="latest-rewrite-if-no-rewrite-has-happened-since-the-restart-the-size-of"><a href="#latest-rewrite-if-no-rewrite-has-happened-since-the-restart-the-size-of" class="headerlink" title="latest rewrite (if no rewrite has happened since the restart, the size of"></a>latest rewrite (if no rewrite has happened since the restart, the size of</h1><h1 id="the-AOF-at-startup-is-used"><a href="#the-AOF-at-startup-is-used" class="headerlink" title="the AOF at startup is used)."></a>the AOF at startup is used).</h1><h1 id="-117"><a href="#-117" class="headerlink" title></a></h1><h1 id="This-base-size-is-compared-to-the-current-size-If-the-current-size-is"><a href="#This-base-size-is-compared-to-the-current-size-If-the-current-size-is" class="headerlink" title="This base size is compared to the current size. If the current size is"></a>This base size is compared to the current size. If the current size is</h1><h1 id="bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also"><a href="#bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also" class="headerlink" title="bigger than the specified percentage, the rewrite is triggered. Also"></a>bigger than the specified percentage, the rewrite is triggered. Also</h1><h1 id="you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this"><a href="#you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this" class="headerlink" title="you need to specify a minimal size for the AOF file to be rewritten, this"></a>you need to specify a minimal size for the AOF file to be rewritten, this</h1><h1 id="is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase"><a href="#is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase" class="headerlink" title="is useful to avoid rewriting the AOF file even if the percentage increase"></a>is useful to avoid rewriting the AOF file even if the percentage increase</h1><h1 id="is-reached-but-it-is-still-pretty-small"><a href="#is-reached-but-it-is-still-pretty-small" class="headerlink" title="is reached but it is still pretty small."></a>is reached but it is still pretty small.</h1><h1 id="-118"><a href="#-118" class="headerlink" title></a></h1><h1 id="Specify-a-percentage-of-zero-in-order-to-disable-the-automatic-AOF"><a href="#Specify-a-percentage-of-zero-in-order-to-disable-the-automatic-AOF" class="headerlink" title="Specify a percentage of zero in order to disable the automatic AOF"></a>Specify a percentage of zero in order to disable the automatic AOF</h1><h1 id="rewrite-feature"><a href="#rewrite-feature" class="headerlink" title="rewrite feature."></a>rewrite feature.</h1><p>auto-aof-rewrite-percentage 100<br>auto-aof-rewrite-min-size 64mb  </p>
<h1 id="An-AOF-file-may-be-found-to-be-truncated-at-the-end-during-the-Redis"><a href="#An-AOF-file-may-be-found-to-be-truncated-at-the-end-during-the-Redis" class="headerlink" title="An AOF file may be found to be truncated at the end during the Redis"></a>An AOF file may be found to be truncated at the end during the Redis</h1><h1 id="startup-process-when-the-AOF-data-gets-loaded-back-into-memory"><a href="#startup-process-when-the-AOF-data-gets-loaded-back-into-memory" class="headerlink" title="startup process, when the AOF data gets loaded back into memory."></a>startup process, when the AOF data gets loaded back into memory.</h1><h1 id="This-may-happen-when-the-system-where-Redis-is-running"><a href="#This-may-happen-when-the-system-where-Redis-is-running" class="headerlink" title="This may happen when the system where Redis is running"></a>This may happen when the system where Redis is running</h1><h1 id="crashes-especially-when-an-ext4-filesystem-is-mounted-without-the"><a href="#crashes-especially-when-an-ext4-filesystem-is-mounted-without-the" class="headerlink" title="crashes, especially when an ext4 filesystem is mounted without the"></a>crashes, especially when an ext4 filesystem is mounted without the</h1><h1 id="data-ordered-option-however-this-can’t-happen-when-Redis-itself"><a href="#data-ordered-option-however-this-can’t-happen-when-Redis-itself" class="headerlink" title="data=ordered option (however this can’t happen when Redis itself"></a>data=ordered option (however this can’t happen when Redis itself</h1><h1 id="crashes-or-aborts-but-the-operating-system-still-works-correctly"><a href="#crashes-or-aborts-but-the-operating-system-still-works-correctly" class="headerlink" title="crashes or aborts but the operating system still works correctly)."></a>crashes or aborts but the operating system still works correctly).</h1><h1 id="-119"><a href="#-119" class="headerlink" title></a></h1><h1 id="Redis-can-either-exit-with-an-error-when-this-happens-or-load-as-much"><a href="#Redis-can-either-exit-with-an-error-when-this-happens-or-load-as-much" class="headerlink" title="Redis can either exit with an error when this happens, or load as much"></a>Redis can either exit with an error when this happens, or load as much</h1><h1 id="data-as-possible-the-default-now-and-start-if-the-AOF-file-is-found"><a href="#data-as-possible-the-default-now-and-start-if-the-AOF-file-is-found" class="headerlink" title="data as possible (the default now) and start if the AOF file is found"></a>data as possible (the default now) and start if the AOF file is found</h1><h1 id="to-be-truncated-at-the-end-The-following-option-controls-this-behavior"><a href="#to-be-truncated-at-the-end-The-following-option-controls-this-behavior" class="headerlink" title="to be truncated at the end. The following option controls this behavior."></a>to be truncated at the end. The following option controls this behavior.</h1><h1 id="-120"><a href="#-120" class="headerlink" title></a></h1><h1 id="If-aof-load-truncated-is-set-to-yes-a-truncated-AOF-file-is-loaded-and"><a href="#If-aof-load-truncated-is-set-to-yes-a-truncated-AOF-file-is-loaded-and" class="headerlink" title="If aof-load-truncated is set to yes, a truncated AOF file is loaded and"></a>If aof-load-truncated is set to yes, a truncated AOF file is loaded and</h1><h1 id="the-Redis-server-starts-emitting-a-log-to-inform-the-user-of-the-event"><a href="#the-Redis-server-starts-emitting-a-log-to-inform-the-user-of-the-event" class="headerlink" title="the Redis server starts emitting a log to inform the user of the event."></a>the Redis server starts emitting a log to inform the user of the event.</h1><h1 id="Otherwise-if-the-option-is-set-to-no-the-server-aborts-with-an-error"><a href="#Otherwise-if-the-option-is-set-to-no-the-server-aborts-with-an-error" class="headerlink" title="Otherwise if the option is set to no, the server aborts with an error"></a>Otherwise if the option is set to no, the server aborts with an error</h1><h1 id="and-refuses-to-start-When-the-option-is-set-to-no-the-user-requires"><a href="#and-refuses-to-start-When-the-option-is-set-to-no-the-user-requires" class="headerlink" title="and refuses to start. When the option is set to no, the user requires"></a>and refuses to start. When the option is set to no, the user requires</h1><h1 id="to-fix-the-AOF-file-using-the-“redis-check-aof”-utility-before-to-restart"><a href="#to-fix-the-AOF-file-using-the-“redis-check-aof”-utility-before-to-restart" class="headerlink" title="to fix the AOF file using the “redis-check-aof” utility before to restart"></a>to fix the AOF file using the “redis-check-aof” utility before to restart</h1><h1 id="the-server"><a href="#the-server" class="headerlink" title="the server."></a>the server.</h1><h1 id="-121"><a href="#-121" class="headerlink" title></a></h1><h1 id="Note-that-if-the-AOF-file-will-be-found-to-be-corrupted-in-the-middle"><a href="#Note-that-if-the-AOF-file-will-be-found-to-be-corrupted-in-the-middle" class="headerlink" title="Note that if the AOF file will be found to be corrupted in the middle"></a>Note that if the AOF file will be found to be corrupted in the middle</h1><h1 id="the-server-will-still-exit-with-an-error-This-option-only-applies-when"><a href="#the-server-will-still-exit-with-an-error-This-option-only-applies-when" class="headerlink" title="the server will still exit with an error. This option only applies when"></a>the server will still exit with an error. This option only applies when</h1><h1 id="Redis-will-try-to-read-more-data-from-the-AOF-file-but-not-enough-bytes"><a href="#Redis-will-try-to-read-more-data-from-the-AOF-file-but-not-enough-bytes" class="headerlink" title="Redis will try to read more data from the AOF file but not enough bytes"></a>Redis will try to read more data from the AOF file but not enough bytes</h1><h1 id="will-be-found"><a href="#will-be-found" class="headerlink" title="will be found."></a>will be found.</h1><p>aof-load-truncated yes  </p>
<p>################################ LUA SCRIPTING  ###############################  </p>
<h1 id="Max-execution-time-of-a-Lua-script-in-milliseconds"><a href="#Max-execution-time-of-a-Lua-script-in-milliseconds" class="headerlink" title="Max execution time of a Lua script in milliseconds."></a>Max execution time of a Lua script in milliseconds.</h1><h1 id="-122"><a href="#-122" class="headerlink" title></a></h1><h1 id="If-the-maximum-execution-time-is-reached-Redis-will-log-that-a-script-is"><a href="#If-the-maximum-execution-time-is-reached-Redis-will-log-that-a-script-is" class="headerlink" title="If the maximum execution time is reached Redis will log that a script is"></a>If the maximum execution time is reached Redis will log that a script is</h1><h1 id="still-in-execution-after-the-maximum-allowed-time-and-will-start-to"><a href="#still-in-execution-after-the-maximum-allowed-time-and-will-start-to" class="headerlink" title="still in execution after the maximum allowed time and will start to"></a>still in execution after the maximum allowed time and will start to</h1><h1 id="reply-to-queries-with-an-error"><a href="#reply-to-queries-with-an-error" class="headerlink" title="reply to queries with an error."></a>reply to queries with an error.</h1><h1 id="-123"><a href="#-123" class="headerlink" title></a></h1><h1 id="When-a-long-running-script-exceeds-the-maximum-execution-time-only-the"><a href="#When-a-long-running-script-exceeds-the-maximum-execution-time-only-the" class="headerlink" title="When a long running script exceeds the maximum execution time only the"></a>When a long running script exceeds the maximum execution time only the</h1><h1 id="SCRIPT-KILL-and-SHUTDOWN-NOSAVE-commands-are-available-The-first-can-be"><a href="#SCRIPT-KILL-and-SHUTDOWN-NOSAVE-commands-are-available-The-first-can-be" class="headerlink" title="SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be"></a>SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</h1><h1 id="used-to-stop-a-script-that-did-not-yet-called-write-commands-The-second"><a href="#used-to-stop-a-script-that-did-not-yet-called-write-commands-The-second" class="headerlink" title="used to stop a script that did not yet called write commands. The second"></a>used to stop a script that did not yet called write commands. The second</h1><h1 id="is-the-only-way-to-shut-down-the-server-in-the-case-a-write-command-was"><a href="#is-the-only-way-to-shut-down-the-server-in-the-case-a-write-command-was" class="headerlink" title="is the only way to shut down the server in the case a write command was"></a>is the only way to shut down the server in the case a write command was</h1><h1 id="already-issued-by-the-script-but-the-user-doesn’t-want-to-wait-for-the-natural"><a href="#already-issued-by-the-script-but-the-user-doesn’t-want-to-wait-for-the-natural" class="headerlink" title="already issued by the script but the user doesn’t want to wait for the natural"></a>already issued by the script but the user doesn’t want to wait for the natural</h1><h1 id="termination-of-the-script"><a href="#termination-of-the-script" class="headerlink" title="termination of the script."></a>termination of the script.</h1><h1 id="-124"><a href="#-124" class="headerlink" title></a></h1><h1 id="Set-it-to-0-or-a-negative-value-for-unlimited-execution-without-warnings"><a href="#Set-it-to-0-or-a-negative-value-for-unlimited-execution-without-warnings" class="headerlink" title="Set it to 0 or a negative value for unlimited execution without warnings."></a>Set it to 0 or a negative value for unlimited execution without warnings.</h1><p>lua-time-limit 5000  </p>
<p>################################ REDIS CLUSTER  ###############################  </p>
<h1 id="-125"><a href="#-125" class="headerlink" title></a></h1><h1 id="-126"><a href="#-126" class="headerlink" title="++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"></a>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</h1><h1 id="WARNING-EXPERIMENTAL-Redis-Cluster-is-considered-to-be-stable-code-however"><a href="#WARNING-EXPERIMENTAL-Redis-Cluster-is-considered-to-be-stable-code-however" class="headerlink" title="WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however"></a>WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however</h1><h1 id="in-order-to-mark-it-as-“mature”-we-need-to-wait-for-a-non-trivial-percentage"><a href="#in-order-to-mark-it-as-“mature”-we-need-to-wait-for-a-non-trivial-percentage" class="headerlink" title="in order to mark it as “mature” we need to wait for a non trivial percentage"></a>in order to mark it as “mature” we need to wait for a non trivial percentage</h1><h1 id="of-users-to-deploy-it-in-production"><a href="#of-users-to-deploy-it-in-production" class="headerlink" title="of users to deploy it in production."></a>of users to deploy it in production.</h1><h1 id="-127"><a href="#-127" class="headerlink" title="++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"></a>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</h1><h1 id="-128"><a href="#-128" class="headerlink" title></a></h1><h1 id="Normal-Redis-instances-can’t-be-part-of-a-Redis-Cluster-only-nodes-that-are"><a href="#Normal-Redis-instances-can’t-be-part-of-a-Redis-Cluster-only-nodes-that-are" class="headerlink" title="Normal Redis instances can’t be part of a Redis Cluster; only nodes that are"></a>Normal Redis instances can’t be part of a Redis Cluster; only nodes that are</h1><h1 id="started-as-cluster-nodes-can-In-order-to-start-a-Redis-instance-as-a"><a href="#started-as-cluster-nodes-can-In-order-to-start-a-Redis-instance-as-a" class="headerlink" title="started as cluster nodes can. In order to start a Redis instance as a"></a>started as cluster nodes can. In order to start a Redis instance as a</h1><h1 id="cluster-node-enable-the-cluster-support-uncommenting-the-following"><a href="#cluster-node-enable-the-cluster-support-uncommenting-the-following" class="headerlink" title="cluster node enable the cluster support uncommenting the following:"></a>cluster node enable the cluster support uncommenting the following:</h1><h1 id="-129"><a href="#-129" class="headerlink" title></a></h1><h1 id="cluster-enabled-yes"><a href="#cluster-enabled-yes" class="headerlink" title="cluster-enabled yes"></a>cluster-enabled yes</h1><h1 id="Every-cluster-node-has-a-cluster-configuration-file-This-file-is-not"><a href="#Every-cluster-node-has-a-cluster-configuration-file-This-file-is-not" class="headerlink" title="Every cluster node has a cluster configuration file. This file is not"></a>Every cluster node has a cluster configuration file. This file is not</h1><h1 id="intended-to-be-edited-by-hand-It-is-created-and-updated-by-Redis-nodes"><a href="#intended-to-be-edited-by-hand-It-is-created-and-updated-by-Redis-nodes" class="headerlink" title="intended to be edited by hand. It is created and updated by Redis nodes."></a>intended to be edited by hand. It is created and updated by Redis nodes.</h1><h1 id="Every-Redis-Cluster-node-requires-a-different-cluster-configuration-file"><a href="#Every-Redis-Cluster-node-requires-a-different-cluster-configuration-file" class="headerlink" title="Every Redis Cluster node requires a different cluster configuration file."></a>Every Redis Cluster node requires a different cluster configuration file.</h1><h1 id="Make-sure-that-instances-running-in-the-same-system-do-not-have"><a href="#Make-sure-that-instances-running-in-the-same-system-do-not-have" class="headerlink" title="Make sure that instances running in the same system do not have"></a>Make sure that instances running in the same system do not have</h1><h1 id="overlapping-cluster-configuration-file-names"><a href="#overlapping-cluster-configuration-file-names" class="headerlink" title="overlapping cluster configuration file names."></a>overlapping cluster configuration file names.</h1><h1 id="-130"><a href="#-130" class="headerlink" title></a></h1><h1 id="cluster-config-file-nodes-6379-conf"><a href="#cluster-config-file-nodes-6379-conf" class="headerlink" title="cluster-config-file nodes-6379.conf"></a>cluster-config-file nodes-6379.conf</h1><h1 id="Cluster-node-timeout-is-the-amount-of-milliseconds-a-node-must-be-unreachable"><a href="#Cluster-node-timeout-is-the-amount-of-milliseconds-a-node-must-be-unreachable" class="headerlink" title="Cluster node timeout is the amount of milliseconds a node must be unreachable"></a>Cluster node timeout is the amount of milliseconds a node must be unreachable</h1><h1 id="for-it-to-be-considered-in-failure-state"><a href="#for-it-to-be-considered-in-failure-state" class="headerlink" title="for it to be considered in failure state."></a>for it to be considered in failure state.</h1><h1 id="Most-other-internal-time-limits-are-multiple-of-the-node-timeout"><a href="#Most-other-internal-time-limits-are-multiple-of-the-node-timeout" class="headerlink" title="Most other internal time limits are multiple of the node timeout."></a>Most other internal time limits are multiple of the node timeout.</h1><h1 id="-131"><a href="#-131" class="headerlink" title></a></h1><h1 id="cluster-node-timeout-15000"><a href="#cluster-node-timeout-15000" class="headerlink" title="cluster-node-timeout 15000"></a>cluster-node-timeout 15000</h1><h1 id="A-slave-of-a-failing-master-will-avoid-to-start-a-failover-if-its-data"><a href="#A-slave-of-a-failing-master-will-avoid-to-start-a-failover-if-its-data" class="headerlink" title="A slave of a failing master will avoid to start a failover if its data"></a>A slave of a failing master will avoid to start a failover if its data</h1><h1 id="looks-too-old"><a href="#looks-too-old" class="headerlink" title="looks too old."></a>looks too old.</h1><h1 id="-132"><a href="#-132" class="headerlink" title></a></h1><h1 id="There-is-no-simple-way-for-a-slave-to-actually-have-a-exact-measure-of"><a href="#There-is-no-simple-way-for-a-slave-to-actually-have-a-exact-measure-of" class="headerlink" title="There is no simple way for a slave to actually have a exact measure of"></a>There is no simple way for a slave to actually have a exact measure of</h1><h1 id="its-“data-age”-so-the-following-two-checks-are-performed"><a href="#its-“data-age”-so-the-following-two-checks-are-performed" class="headerlink" title="its “data age”, so the following two checks are performed:"></a>its “data age”, so the following two checks are performed:</h1><h1 id="-133"><a href="#-133" class="headerlink" title></a></h1><h1 id="1-If-there-are-multiple-slaves-able-to-failover-they-exchange-messages"><a href="#1-If-there-are-multiple-slaves-able-to-failover-they-exchange-messages" class="headerlink" title="1) If there are multiple slaves able to failover, they exchange messages"></a>1) If there are multiple slaves able to failover, they exchange messages</h1><h1 id="in-order-to-try-to-give-an-advantage-to-the-slave-with-the-best"><a href="#in-order-to-try-to-give-an-advantage-to-the-slave-with-the-best" class="headerlink" title="in order to try to give an advantage to the slave with the best"></a>in order to try to give an advantage to the slave with the best</h1><h1 id="replication-offset-more-data-from-the-master-processed"><a href="#replication-offset-more-data-from-the-master-processed" class="headerlink" title="replication offset (more data from the master processed)."></a>replication offset (more data from the master processed).</h1><h1 id="Slaves-will-try-to-get-their-rank-by-offset-and-apply-to-the-start"><a href="#Slaves-will-try-to-get-their-rank-by-offset-and-apply-to-the-start" class="headerlink" title="Slaves will try to get their rank by offset, and apply to the start"></a>Slaves will try to get their rank by offset, and apply to the start</h1><h1 id="of-the-failover-a-delay-proportional-to-their-rank"><a href="#of-the-failover-a-delay-proportional-to-their-rank" class="headerlink" title="of the failover a delay proportional to their rank."></a>of the failover a delay proportional to their rank.</h1><h1 id="-134"><a href="#-134" class="headerlink" title></a></h1><h1 id="2-Every-single-slave-computes-the-time-of-the-last-interaction-with"><a href="#2-Every-single-slave-computes-the-time-of-the-last-interaction-with" class="headerlink" title="2) Every single slave computes the time of the last interaction with"></a>2) Every single slave computes the time of the last interaction with</h1><h1 id="its-master-This-can-be-the-last-ping-or-command-received-if-the-master"><a href="#its-master-This-can-be-the-last-ping-or-command-received-if-the-master" class="headerlink" title="its master. This can be the last ping or command received (if the master"></a>its master. This can be the last ping or command received (if the master</h1><h1 id="is-still-in-the-“connected”-state-or-the-time-that-elapsed-since-the"><a href="#is-still-in-the-“connected”-state-or-the-time-that-elapsed-since-the" class="headerlink" title="is still in the “connected” state), or the time that elapsed since the"></a>is still in the “connected” state), or the time that elapsed since the</h1><h1 id="disconnection-with-the-master-if-the-replication-link-is-currently-down"><a href="#disconnection-with-the-master-if-the-replication-link-is-currently-down" class="headerlink" title="disconnection with the master (if the replication link is currently down)."></a>disconnection with the master (if the replication link is currently down).</h1><h1 id="If-the-last-interaction-is-too-old-the-slave-will-not-try-to-failover"><a href="#If-the-last-interaction-is-too-old-the-slave-will-not-try-to-failover" class="headerlink" title="If the last interaction is too old, the slave will not try to failover"></a>If the last interaction is too old, the slave will not try to failover</h1><h1 id="at-all"><a href="#at-all" class="headerlink" title="at all."></a>at all.</h1><h1 id="-135"><a href="#-135" class="headerlink" title></a></h1><h1 id="The-point-“2”-can-be-tuned-by-user-Specifically-a-slave-will-not-perform"><a href="#The-point-“2”-can-be-tuned-by-user-Specifically-a-slave-will-not-perform" class="headerlink" title="The point “2” can be tuned by user. Specifically a slave will not perform"></a>The point “2” can be tuned by user. Specifically a slave will not perform</h1><h1 id="the-failover-if-since-the-last-interaction-with-the-master-the-time"><a href="#the-failover-if-since-the-last-interaction-with-the-master-the-time" class="headerlink" title="the failover if, since the last interaction with the master, the time"></a>the failover if, since the last interaction with the master, the time</h1><h1 id="elapsed-is-greater-than"><a href="#elapsed-is-greater-than" class="headerlink" title="elapsed is greater than:"></a>elapsed is greater than:</h1><h1 id="-136"><a href="#-136" class="headerlink" title></a></h1><h1 id="node-timeout-slave-validity-factor-repl-ping-slave-period"><a href="#node-timeout-slave-validity-factor-repl-ping-slave-period" class="headerlink" title="(node-timeout * slave-validity-factor) + repl-ping-slave-period"></a>(node-timeout * slave-validity-factor) + repl-ping-slave-period</h1><h1 id="-137"><a href="#-137" class="headerlink" title></a></h1><h1 id="So-for-example-if-node-timeout-is-30-seconds-and-the-slave-validity-factor"><a href="#So-for-example-if-node-timeout-is-30-seconds-and-the-slave-validity-factor" class="headerlink" title="So for example if node-timeout is 30 seconds, and the slave-validity-factor"></a>So for example if node-timeout is 30 seconds, and the slave-validity-factor</h1><h1 id="is-10-and-assuming-a-default-repl-ping-slave-period-of-10-seconds-the"><a href="#is-10-and-assuming-a-default-repl-ping-slave-period-of-10-seconds-the" class="headerlink" title="is 10, and assuming a default repl-ping-slave-period of 10 seconds, the"></a>is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</h1><h1 id="slave-will-not-try-to-failover-if-it-was-not-able-to-talk-with-the-master"><a href="#slave-will-not-try-to-failover-if-it-was-not-able-to-talk-with-the-master" class="headerlink" title="slave will not try to failover if it was not able to talk with the master"></a>slave will not try to failover if it was not able to talk with the master</h1><h1 id="for-longer-than-310-seconds"><a href="#for-longer-than-310-seconds" class="headerlink" title="for longer than 310 seconds."></a>for longer than 310 seconds.</h1><h1 id="-138"><a href="#-138" class="headerlink" title></a></h1><h1 id="A-large-slave-validity-factor-may-allow-slaves-with-too-old-data-to-failover"><a href="#A-large-slave-validity-factor-may-allow-slaves-with-too-old-data-to-failover" class="headerlink" title="A large slave-validity-factor may allow slaves with too old data to failover"></a>A large slave-validity-factor may allow slaves with too old data to failover</h1><h1 id="a-master-while-a-too-small-value-may-prevent-the-cluster-from-being-able-to"><a href="#a-master-while-a-too-small-value-may-prevent-the-cluster-from-being-able-to" class="headerlink" title="a master, while a too small value may prevent the cluster from being able to"></a>a master, while a too small value may prevent the cluster from being able to</h1><h1 id="elect-a-slave-at-all"><a href="#elect-a-slave-at-all" class="headerlink" title="elect a slave at all."></a>elect a slave at all.</h1><h1 id="-139"><a href="#-139" class="headerlink" title></a></h1><h1 id="For-maximum-availability-it-is-possible-to-set-the-slave-validity-factor"><a href="#For-maximum-availability-it-is-possible-to-set-the-slave-validity-factor" class="headerlink" title="For maximum availability, it is possible to set the slave-validity-factor"></a>For maximum availability, it is possible to set the slave-validity-factor</h1><h1 id="to-a-value-of-0-which-means-that-slaves-will-always-try-to-failover-the"><a href="#to-a-value-of-0-which-means-that-slaves-will-always-try-to-failover-the" class="headerlink" title="to a value of 0, which means, that slaves will always try to failover the"></a>to a value of 0, which means, that slaves will always try to failover the</h1><h1 id="master-regardless-of-the-last-time-they-interacted-with-the-master"><a href="#master-regardless-of-the-last-time-they-interacted-with-the-master" class="headerlink" title="master regardless of the last time they interacted with the master."></a>master regardless of the last time they interacted with the master.</h1><h1 id="However-they’ll-always-try-to-apply-a-delay-proportional-to-their"><a href="#However-they’ll-always-try-to-apply-a-delay-proportional-to-their" class="headerlink" title="(However they’ll always try to apply a delay proportional to their"></a>(However they’ll always try to apply a delay proportional to their</h1><h1 id="offset-rank"><a href="#offset-rank" class="headerlink" title="offset rank)."></a>offset rank).</h1><h1 id="-140"><a href="#-140" class="headerlink" title></a></h1><h1 id="Zero-is-the-only-value-able-to-guarantee-that-when-all-the-partitions-heal"><a href="#Zero-is-the-only-value-able-to-guarantee-that-when-all-the-partitions-heal" class="headerlink" title="Zero is the only value able to guarantee that when all the partitions heal"></a>Zero is the only value able to guarantee that when all the partitions heal</h1><h1 id="the-cluster-will-always-be-able-to-continue"><a href="#the-cluster-will-always-be-able-to-continue" class="headerlink" title="the cluster will always be able to continue."></a>the cluster will always be able to continue.</h1><h1 id="-141"><a href="#-141" class="headerlink" title></a></h1><h1 id="cluster-slave-validity-factor-10"><a href="#cluster-slave-validity-factor-10" class="headerlink" title="cluster-slave-validity-factor 10"></a>cluster-slave-validity-factor 10</h1><h1 id="Cluster-slaves-are-able-to-migrate-to-orphaned-masters-that-are-masters"><a href="#Cluster-slaves-are-able-to-migrate-to-orphaned-masters-that-are-masters" class="headerlink" title="Cluster slaves are able to migrate to orphaned masters, that are masters"></a>Cluster slaves are able to migrate to orphaned masters, that are masters</h1><h1 id="that-are-left-without-working-slaves-This-improves-the-cluster-ability"><a href="#that-are-left-without-working-slaves-This-improves-the-cluster-ability" class="headerlink" title="that are left without working slaves. This improves the cluster ability"></a>that are left without working slaves. This improves the cluster ability</h1><h1 id="to-resist-to-failures-as-otherwise-an-orphaned-master-can’t-be-failed-over"><a href="#to-resist-to-failures-as-otherwise-an-orphaned-master-can’t-be-failed-over" class="headerlink" title="to resist to failures as otherwise an orphaned master can’t be failed over"></a>to resist to failures as otherwise an orphaned master can’t be failed over</h1><h1 id="in-case-of-failure-if-it-has-no-working-slaves"><a href="#in-case-of-failure-if-it-has-no-working-slaves" class="headerlink" title="in case of failure if it has no working slaves."></a>in case of failure if it has no working slaves.</h1><h1 id="-142"><a href="#-142" class="headerlink" title></a></h1><h1 id="Slaves-migrate-to-orphaned-masters-only-if-there-are-still-at-least-a"><a href="#Slaves-migrate-to-orphaned-masters-only-if-there-are-still-at-least-a" class="headerlink" title="Slaves migrate to orphaned masters only if there are still at least a"></a>Slaves migrate to orphaned masters only if there are still at least a</h1><h1 id="given-number-of-other-working-slaves-for-their-old-master-This-number"><a href="#given-number-of-other-working-slaves-for-their-old-master-This-number" class="headerlink" title="given number of other working slaves for their old master. This number"></a>given number of other working slaves for their old master. This number</h1><h1 id="is-the-“migration-barrier”-A-migration-barrier-of-1-means-that-a-slave"><a href="#is-the-“migration-barrier”-A-migration-barrier-of-1-means-that-a-slave" class="headerlink" title="is the “migration barrier”. A migration barrier of 1 means that a slave"></a>is the “migration barrier”. A migration barrier of 1 means that a slave</h1><h1 id="will-migrate-only-if-there-is-at-least-1-other-working-slave-for-its-master"><a href="#will-migrate-only-if-there-is-at-least-1-other-working-slave-for-its-master" class="headerlink" title="will migrate only if there is at least 1 other working slave for its master"></a>will migrate only if there is at least 1 other working slave for its master</h1><h1 id="and-so-forth-It-usually-reflects-the-number-of-slaves-you-want-for-every"><a href="#and-so-forth-It-usually-reflects-the-number-of-slaves-you-want-for-every" class="headerlink" title="and so forth. It usually reflects the number of slaves you want for every"></a>and so forth. It usually reflects the number of slaves you want for every</h1><h1 id="master-in-your-cluster"><a href="#master-in-your-cluster" class="headerlink" title="master in your cluster."></a>master in your cluster.</h1><h1 id="-143"><a href="#-143" class="headerlink" title></a></h1><h1 id="Default-is-1-slaves-migrate-only-if-their-masters-remain-with-at-least"><a href="#Default-is-1-slaves-migrate-only-if-their-masters-remain-with-at-least" class="headerlink" title="Default is 1 (slaves migrate only if their masters remain with at least"></a>Default is 1 (slaves migrate only if their masters remain with at least</h1><h1 id="one-slave-To-disable-migration-just-set-it-to-a-very-large-value"><a href="#one-slave-To-disable-migration-just-set-it-to-a-very-large-value" class="headerlink" title="one slave). To disable migration just set it to a very large value."></a>one slave). To disable migration just set it to a very large value.</h1><h1 id="A-value-of-0-can-be-set-but-is-useful-only-for-debugging-and-dangerous"><a href="#A-value-of-0-can-be-set-but-is-useful-only-for-debugging-and-dangerous" class="headerlink" title="A value of 0 can be set but is useful only for debugging and dangerous"></a>A value of 0 can be set but is useful only for debugging and dangerous</h1><h1 id="in-production"><a href="#in-production" class="headerlink" title="in production."></a>in production.</h1><h1 id="-144"><a href="#-144" class="headerlink" title></a></h1><h1 id="cluster-migration-barrier-1"><a href="#cluster-migration-barrier-1" class="headerlink" title="cluster-migration-barrier 1"></a>cluster-migration-barrier 1</h1><h1 id="By-default-Redis-Cluster-nodes-stop-accepting-queries-if-they-detect-there"><a href="#By-default-Redis-Cluster-nodes-stop-accepting-queries-if-they-detect-there" class="headerlink" title="By default Redis Cluster nodes stop accepting queries if they detect there"></a>By default Redis Cluster nodes stop accepting queries if they detect there</h1><h1 id="is-at-least-an-hash-slot-uncovered-no-available-node-is-serving-it"><a href="#is-at-least-an-hash-slot-uncovered-no-available-node-is-serving-it" class="headerlink" title="is at least an hash slot uncovered (no available node is serving it)."></a>is at least an hash slot uncovered (no available node is serving it).</h1><h1 id="This-way-if-the-cluster-is-partially-down-for-example-a-range-of-hash-slots"><a href="#This-way-if-the-cluster-is-partially-down-for-example-a-range-of-hash-slots" class="headerlink" title="This way if the cluster is partially down (for example a range of hash slots"></a>This way if the cluster is partially down (for example a range of hash slots</h1><h1 id="are-no-longer-covered-all-the-cluster-becomes-eventually-unavailable"><a href="#are-no-longer-covered-all-the-cluster-becomes-eventually-unavailable" class="headerlink" title="are no longer covered) all the cluster becomes, eventually, unavailable."></a>are no longer covered) all the cluster becomes, eventually, unavailable.</h1><h1 id="It-automatically-returns-available-as-soon-as-all-the-slots-are-covered-again"><a href="#It-automatically-returns-available-as-soon-as-all-the-slots-are-covered-again" class="headerlink" title="It automatically returns available as soon as all the slots are covered again."></a>It automatically returns available as soon as all the slots are covered again.</h1><h1 id="-145"><a href="#-145" class="headerlink" title></a></h1><h1 id="However-sometimes-you-want-the-subset-of-the-cluster-which-is-working"><a href="#However-sometimes-you-want-the-subset-of-the-cluster-which-is-working" class="headerlink" title="However sometimes you want the subset of the cluster which is working,"></a>However sometimes you want the subset of the cluster which is working,</h1><h1 id="to-continue-to-accept-queries-for-the-part-of-the-key-space-that-is-still"><a href="#to-continue-to-accept-queries-for-the-part-of-the-key-space-that-is-still" class="headerlink" title="to continue to accept queries for the part of the key space that is still"></a>to continue to accept queries for the part of the key space that is still</h1><h1 id="covered-In-order-to-do-so-just-set-the-cluster-require-full-coverage"><a href="#covered-In-order-to-do-so-just-set-the-cluster-require-full-coverage" class="headerlink" title="covered. In order to do so, just set the cluster-require-full-coverage"></a>covered. In order to do so, just set the cluster-require-full-coverage</h1><h1 id="option-to-no"><a href="#option-to-no" class="headerlink" title="option to no."></a>option to no.</h1><h1 id="-146"><a href="#-146" class="headerlink" title></a></h1><h1 id="cluster-require-full-coverage-yes"><a href="#cluster-require-full-coverage-yes" class="headerlink" title="cluster-require-full-coverage yes"></a>cluster-require-full-coverage yes</h1><h1 id="In-order-to-setup-your-cluster-make-sure-to-read-the-documentation"><a href="#In-order-to-setup-your-cluster-make-sure-to-read-the-documentation" class="headerlink" title="In order to setup your cluster make sure to read the documentation"></a>In order to setup your cluster make sure to read the documentation</h1><h1 id="available-at-http-redis-io-web-site"><a href="#available-at-http-redis-io-web-site" class="headerlink" title="available at http://redis.io web site."></a>available at <a href="http://redis.io" target="_blank" rel="noopener">http://redis.io</a> web site.</h1><p>################################## SLOW LOG ###################################  </p>
<h1 id="The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified"><a href="#The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified" class="headerlink" title="The Redis Slow Log is a system to log queries that exceeded a specified"></a>The Redis Slow Log is a system to log queries that exceeded a specified</h1><h1 id="execution-time-The-execution-time-does-not-include-the-I-O-operations"><a href="#execution-time-The-execution-time-does-not-include-the-I-O-operations" class="headerlink" title="execution time. The execution time does not include the I/O operations"></a>execution time. The execution time does not include the I/O operations</h1><h1 id="like-talking-with-the-client-sending-the-reply-and-so-forth"><a href="#like-talking-with-the-client-sending-the-reply-and-so-forth" class="headerlink" title="like talking with the client, sending the reply and so forth,"></a>like talking with the client, sending the reply and so forth,</h1><h1 id="but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only"><a href="#but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only" class="headerlink" title="but just the time needed to actually execute the command (this is the only"></a>but just the time needed to actually execute the command (this is the only</h1><h1 id="stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve"><a href="#stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve" class="headerlink" title="stage of command execution where the thread is blocked and can not serve"></a>stage of command execution where the thread is blocked and can not serve</h1><h1 id="other-requests-in-the-meantime"><a href="#other-requests-in-the-meantime" class="headerlink" title="other requests in the meantime)."></a>other requests in the meantime).</h1><h1 id="-147"><a href="#-147" class="headerlink" title></a></h1><h1 id="You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis"><a href="#You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis" class="headerlink" title="You can configure the slow log with two parameters: one tells Redis"></a>You can configure the slow log with two parameters: one tells Redis</h1><h1 id="what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the"><a href="#what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the" class="headerlink" title="what is the execution time, in microseconds, to exceed in order for the"></a>what is the execution time, in microseconds, to exceed in order for the</h1><h1 id="command-to-get-logged-and-the-other-parameter-is-the-length-of-the"><a href="#command-to-get-logged-and-the-other-parameter-is-the-length-of-the" class="headerlink" title="command to get logged, and the other parameter is the length of the"></a>command to get logged, and the other parameter is the length of the</h1><h1 id="slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the"><a href="#slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the" class="headerlink" title="slow log. When a new command is logged the oldest one is removed from the"></a>slow log. When a new command is logged the oldest one is removed from the</h1><h1 id="queue-of-logged-commands"><a href="#queue-of-logged-commands" class="headerlink" title="queue of logged commands."></a>queue of logged commands.</h1><h1 id="The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent"><a href="#The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent" class="headerlink" title="The following time is expressed in microseconds, so 1000000 is equivalent"></a>The following time is expressed in microseconds, so 1000000 is equivalent</h1><h1 id="to-one-second-Note-that-a-negative-number-disables-the-slow-log-while"><a href="#to-one-second-Note-that-a-negative-number-disables-the-slow-log-while" class="headerlink" title="to one second. Note that a negative number disables the slow log, while"></a>to one second. Note that a negative number disables the slow log, while</h1><h1 id="a-value-of-zero-forces-the-logging-of-every-command"><a href="#a-value-of-zero-forces-the-logging-of-every-command" class="headerlink" title="a value of zero forces the logging of every command."></a>a value of zero forces the logging of every command.</h1><p>slowlog-log-slower-than 10000  </p>
<h1 id="There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory"><a href="#There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory" class="headerlink" title="There is no limit to this length. Just be aware that it will consume memory."></a>There is no limit to this length. Just be aware that it will consume memory.</h1><h1 id="You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET"><a href="#You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET" class="headerlink" title="You can reclaim memory used by the slow log with SLOWLOG RESET."></a>You can reclaim memory used by the slow log with SLOWLOG RESET.</h1><p>slowlog-max-len 128  </p>
<p>################################ LATENCY MONITOR ##############################  </p>
<h1 id="The-Redis-latency-monitoring-subsystem-samples-different-operations"><a href="#The-Redis-latency-monitoring-subsystem-samples-different-operations" class="headerlink" title="The Redis latency monitoring subsystem samples different operations"></a>The Redis latency monitoring subsystem samples different operations</h1><h1 id="at-runtime-in-order-to-collect-data-related-to-possible-sources-of"><a href="#at-runtime-in-order-to-collect-data-related-to-possible-sources-of" class="headerlink" title="at runtime in order to collect data related to possible sources of"></a>at runtime in order to collect data related to possible sources of</h1><h1 id="latency-of-a-Redis-instance"><a href="#latency-of-a-Redis-instance" class="headerlink" title="latency of a Redis instance."></a>latency of a Redis instance.</h1><h1 id="-148"><a href="#-148" class="headerlink" title></a></h1><h1 id="Via-the-LATENCY-command-this-information-is-available-to-the-user-that-can"><a href="#Via-the-LATENCY-command-this-information-is-available-to-the-user-that-can" class="headerlink" title="Via the LATENCY command this information is available to the user that can"></a>Via the LATENCY command this information is available to the user that can</h1><h1 id="print-graphs-and-obtain-reports"><a href="#print-graphs-and-obtain-reports" class="headerlink" title="print graphs and obtain reports."></a>print graphs and obtain reports.</h1><h1 id="-149"><a href="#-149" class="headerlink" title></a></h1><h1 id="The-system-only-logs-operations-that-were-performed-in-a-time-equal-or"><a href="#The-system-only-logs-operations-that-were-performed-in-a-time-equal-or" class="headerlink" title="The system only logs operations that were performed in a time equal or"></a>The system only logs operations that were performed in a time equal or</h1><h1 id="greater-than-the-amount-of-milliseconds-specified-via-the"><a href="#greater-than-the-amount-of-milliseconds-specified-via-the" class="headerlink" title="greater than the amount of milliseconds specified via the"></a>greater than the amount of milliseconds specified via the</h1><h1 id="latency-monitor-threshold-configuration-directive-When-its-value-is-set"><a href="#latency-monitor-threshold-configuration-directive-When-its-value-is-set" class="headerlink" title="latency-monitor-threshold configuration directive. When its value is set"></a>latency-monitor-threshold configuration directive. When its value is set</h1><h1 id="to-zero-the-latency-monitor-is-turned-off"><a href="#to-zero-the-latency-monitor-is-turned-off" class="headerlink" title="to zero, the latency monitor is turned off."></a>to zero, the latency monitor is turned off.</h1><h1 id="-150"><a href="#-150" class="headerlink" title></a></h1><h1 id="By-default-latency-monitoring-is-disabled-since-it-is-mostly-not-needed"><a href="#By-default-latency-monitoring-is-disabled-since-it-is-mostly-not-needed" class="headerlink" title="By default latency monitoring is disabled since it is mostly not needed"></a>By default latency monitoring is disabled since it is mostly not needed</h1><h1 id="if-you-don’t-have-latency-issues-and-collecting-data-has-a-performance"><a href="#if-you-don’t-have-latency-issues-and-collecting-data-has-a-performance" class="headerlink" title="if you don’t have latency issues, and collecting data has a performance"></a>if you don’t have latency issues, and collecting data has a performance</h1><h1 id="impact-that-while-very-small-can-be-measured-under-big-load-Latency"><a href="#impact-that-while-very-small-can-be-measured-under-big-load-Latency" class="headerlink" title="impact, that while very small, can be measured under big load. Latency"></a>impact, that while very small, can be measured under big load. Latency</h1><h1 id="monitoring-can-easily-be-enabled-at-runtime-using-the-command"><a href="#monitoring-can-easily-be-enabled-at-runtime-using-the-command" class="headerlink" title="monitoring can easily be enabled at runtime using the command"></a>monitoring can easily be enabled at runtime using the command</h1><h1 id="“CONFIG-SET-latency-monitor-threshold-“-if-needed"><a href="#“CONFIG-SET-latency-monitor-threshold-“-if-needed" class="headerlink" title="“CONFIG SET latency-monitor-threshold “ if needed."></a>“CONFIG SET latency-monitor-threshold <milliseconds>“ if needed.</milliseconds></h1><p>latency-monitor-threshold 0  </p>
<p>############################# EVENT NOTIFICATION ##############################  </p>
<h1 id="Redis-can-notify-Pub-Sub-clients-about-events-happening-in-the-key-space"><a href="#Redis-can-notify-Pub-Sub-clients-about-events-happening-in-the-key-space" class="headerlink" title="Redis can notify Pub/Sub clients about events happening in the key space."></a>Redis can notify Pub/Sub clients about events happening in the key space.</h1><h1 id="This-feature-is-documented-at-http-redis-io-topics-notifications"><a href="#This-feature-is-documented-at-http-redis-io-topics-notifications" class="headerlink" title="This feature is documented at http://redis.io/topics/notifications"></a>This feature is documented at <a href="http://redis.io/topics/notifications" target="_blank" rel="noopener">http://redis.io/topics/notifications</a></h1><h1 id="-151"><a href="#-151" class="headerlink" title></a></h1><h1 id="For-instance-if-keyspace-events-notification-is-enabled-and-a-client"><a href="#For-instance-if-keyspace-events-notification-is-enabled-and-a-client" class="headerlink" title="For instance if keyspace events notification is enabled, and a client"></a>For instance if keyspace events notification is enabled, and a client</h1><h1 id="performs-a-DEL-operation-on-key-“foo”-stored-in-the-Database-0-two"><a href="#performs-a-DEL-operation-on-key-“foo”-stored-in-the-Database-0-two" class="headerlink" title="performs a DEL operation on key “foo” stored in the Database 0, two"></a>performs a DEL operation on key “foo” stored in the Database 0, two</h1><h1 id="messages-will-be-published-via-Pub-Sub"><a href="#messages-will-be-published-via-Pub-Sub" class="headerlink" title="messages will be published via Pub/Sub:"></a>messages will be published via Pub/Sub:</h1><h1 id="-152"><a href="#-152" class="headerlink" title></a></h1><h1 id="PUBLISH-keyspace-0-foo-del"><a href="#PUBLISH-keyspace-0-foo-del" class="headerlink" title="PUBLISH keyspace@0:foo del"></a>PUBLISH <strong>keyspace@0</strong>:foo del</h1><h1 id="PUBLISH-keyevent-0-del-foo"><a href="#PUBLISH-keyevent-0-del-foo" class="headerlink" title="PUBLISH keyevent@0:del foo"></a>PUBLISH <strong>keyevent@0</strong>:del foo</h1><h1 id="-153"><a href="#-153" class="headerlink" title></a></h1><h1 id="It-is-possible-to-select-the-events-that-Redis-will-notify-among-a-set"><a href="#It-is-possible-to-select-the-events-that-Redis-will-notify-among-a-set" class="headerlink" title="It is possible to select the events that Redis will notify among a set"></a>It is possible to select the events that Redis will notify among a set</h1><h1 id="of-classes-Every-class-is-identified-by-a-single-character"><a href="#of-classes-Every-class-is-identified-by-a-single-character" class="headerlink" title="of classes. Every class is identified by a single character:"></a>of classes. Every class is identified by a single character:</h1><h1 id="-154"><a href="#-154" class="headerlink" title></a></h1><h1 id="K-Keyspace-events-published-with-keyspace-prefix"><a href="#K-Keyspace-events-published-with-keyspace-prefix" class="headerlink" title="K     Keyspace events, published with keyspace@ prefix."></a>K     Keyspace events, published with <strong>keyspace@<db></db></strong> prefix.</h1><h1 id="E-Keyevent-events-published-with-keyevent-prefix"><a href="#E-Keyevent-events-published-with-keyevent-prefix" class="headerlink" title="E     Keyevent events, published with keyevent@ prefix."></a>E     Keyevent events, published with <strong>keyevent@<db></db></strong> prefix.</h1><h1 id="g-Generic-commands-non-type-specific-like-DEL-EXPIRE-RENAME-…"><a href="#g-Generic-commands-non-type-specific-like-DEL-EXPIRE-RENAME-…" class="headerlink" title="g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, …"></a>g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, …</h1><h1 id="String-commands"><a href="#String-commands" class="headerlink" title="$     String commands"></a>$     String commands</h1><h1 id="l-List-commands"><a href="#l-List-commands" class="headerlink" title="l     List commands"></a>l     List commands</h1><h1 id="s-Set-commands"><a href="#s-Set-commands" class="headerlink" title="s     Set commands"></a>s     Set commands</h1><h1 id="h-Hash-commands"><a href="#h-Hash-commands" class="headerlink" title="h     Hash commands"></a>h     Hash commands</h1><h1 id="z-Sorted-set-commands"><a href="#z-Sorted-set-commands" class="headerlink" title="z     Sorted set commands"></a>z     Sorted set commands</h1><h1 id="x-Expired-events-events-generated-every-time-a-key-expires"><a href="#x-Expired-events-events-generated-every-time-a-key-expires" class="headerlink" title="x     Expired events (events generated every time a key expires)"></a>x     Expired events (events generated every time a key expires)</h1><h1 id="e-Evicted-events-events-generated-when-a-key-is-evicted-for-maxmemory"><a href="#e-Evicted-events-events-generated-when-a-key-is-evicted-for-maxmemory" class="headerlink" title="e     Evicted events (events generated when a key is evicted for maxmemory)"></a>e     Evicted events (events generated when a key is evicted for maxmemory)</h1><h1 id="A-Alias-for-g-lshzxe-so-that-the-“AKE”-string-means-all-the-events"><a href="#A-Alias-for-g-lshzxe-so-that-the-“AKE”-string-means-all-the-events" class="headerlink" title="A     Alias for g$lshzxe, so that the “AKE” string means all the events."></a>A     Alias for g$lshzxe, so that the “AKE” string means all the events.</h1><h1 id="-155"><a href="#-155" class="headerlink" title></a></h1><h1 id="The-“notify-keyspace-events”-takes-as-argument-a-string-that-is-composed"><a href="#The-“notify-keyspace-events”-takes-as-argument-a-string-that-is-composed" class="headerlink" title="The “notify-keyspace-events” takes as argument a string that is composed"></a>The “notify-keyspace-events” takes as argument a string that is composed</h1><h1 id="of-zero-or-multiple-characters-The-empty-string-means-that-notifications"><a href="#of-zero-or-multiple-characters-The-empty-string-means-that-notifications" class="headerlink" title="of zero or multiple characters. The empty string means that notifications"></a>of zero or multiple characters. The empty string means that notifications</h1><h1 id="are-disabled"><a href="#are-disabled" class="headerlink" title="are disabled."></a>are disabled.</h1><h1 id="-156"><a href="#-156" class="headerlink" title></a></h1><h1 id="Example-to-enable-list-and-generic-events-from-the-point-of-view-of-the"><a href="#Example-to-enable-list-and-generic-events-from-the-point-of-view-of-the" class="headerlink" title="Example: to enable list and generic events, from the point of view of the"></a>Example: to enable list and generic events, from the point of view of the</h1><h1 id="event-name-use"><a href="#event-name-use" class="headerlink" title="event name, use:"></a>event name, use:</h1><h1 id="-157"><a href="#-157" class="headerlink" title></a></h1><h1 id="notify-keyspace-events-Elg"><a href="#notify-keyspace-events-Elg" class="headerlink" title="notify-keyspace-events Elg"></a>notify-keyspace-events Elg</h1><h1 id="-158"><a href="#-158" class="headerlink" title></a></h1><h1 id="Example-2-to-get-the-stream-of-the-expired-keys-subscribing-to-channel"><a href="#Example-2-to-get-the-stream-of-the-expired-keys-subscribing-to-channel" class="headerlink" title="Example 2: to get the stream of the expired keys subscribing to channel"></a>Example 2: to get the stream of the expired keys subscribing to channel</h1><h1 id="name-keyevent-0-expired-use"><a href="#name-keyevent-0-expired-use" class="headerlink" title="name keyevent@0:expired use:"></a>name <strong>keyevent@0</strong>:expired use:</h1><h1 id="-159"><a href="#-159" class="headerlink" title></a></h1><h1 id="notify-keyspace-events-Ex"><a href="#notify-keyspace-events-Ex" class="headerlink" title="notify-keyspace-events Ex"></a>notify-keyspace-events Ex</h1><h1 id="-160"><a href="#-160" class="headerlink" title></a></h1><h1 id="By-default-all-notifications-are-disabled-because-most-users-don’t-need"><a href="#By-default-all-notifications-are-disabled-because-most-users-don’t-need" class="headerlink" title="By default all notifications are disabled because most users don’t need"></a>By default all notifications are disabled because most users don’t need</h1><h1 id="this-feature-and-the-feature-has-some-overhead-Note-that-if-you-don’t"><a href="#this-feature-and-the-feature-has-some-overhead-Note-that-if-you-don’t" class="headerlink" title="this feature and the feature has some overhead. Note that if you don’t"></a>this feature and the feature has some overhead. Note that if you don’t</h1><h1 id="specify-at-least-one-of-K-or-E-no-events-will-be-delivered"><a href="#specify-at-least-one-of-K-or-E-no-events-will-be-delivered" class="headerlink" title="specify at least one of K or E, no events will be delivered."></a>specify at least one of K or E, no events will be delivered.</h1><p>notify-keyspace-events “”  </p>
<p>############################### ADVANCED CONFIG ###############################  </p>
<h1 id="Hashes-are-encoded-using-a-memory-efficient-data-structure-when-they-have-a"><a href="#Hashes-are-encoded-using-a-memory-efficient-data-structure-when-they-have-a" class="headerlink" title="Hashes are encoded using a memory efficient data structure when they have a"></a>Hashes are encoded using a memory efficient data structure when they have a</h1><h1 id="small-number-of-entries-and-the-biggest-entry-does-not-exceed-a-given"><a href="#small-number-of-entries-and-the-biggest-entry-does-not-exceed-a-given" class="headerlink" title="small number of entries, and the biggest entry does not exceed a given"></a>small number of entries, and the biggest entry does not exceed a given</h1><h1 id="threshold-These-thresholds-can-be-configured-using-the-following-directives"><a href="#threshold-These-thresholds-can-be-configured-using-the-following-directives" class="headerlink" title="threshold. These thresholds can be configured using the following directives."></a>threshold. These thresholds can be configured using the following directives.</h1><p>hash-max-ziplist-entries 512<br>hash-max-ziplist-value 64  </p>
<h1 id="Lists-are-also-encoded-in-a-special-way-to-save-a-lot-of-space"><a href="#Lists-are-also-encoded-in-a-special-way-to-save-a-lot-of-space" class="headerlink" title="Lists are also encoded in a special way to save a lot of space."></a>Lists are also encoded in a special way to save a lot of space.</h1><h1 id="The-number-of-entries-allowed-per-internal-list-node-can-be-specified"><a href="#The-number-of-entries-allowed-per-internal-list-node-can-be-specified" class="headerlink" title="The number of entries allowed per internal list node can be specified"></a>The number of entries allowed per internal list node can be specified</h1><h1 id="as-a-fixed-maximum-size-or-a-maximum-number-of-elements"><a href="#as-a-fixed-maximum-size-or-a-maximum-number-of-elements" class="headerlink" title="as a fixed maximum size or a maximum number of elements."></a>as a fixed maximum size or a maximum number of elements.</h1><h1 id="For-a-fixed-maximum-size-use-5-through-1-meaning"><a href="#For-a-fixed-maximum-size-use-5-through-1-meaning" class="headerlink" title="For a fixed maximum size, use -5 through -1, meaning:"></a>For a fixed maximum size, use -5 through -1, meaning:</h1><h1 id="5-max-size-64-Kb-lt-–-not-recommended-for-normal-workloads"><a href="#5-max-size-64-Kb-lt-–-not-recommended-for-normal-workloads" class="headerlink" title="-5: max size: 64 Kb  &lt;– not recommended for normal workloads"></a>-5: max size: 64 Kb  &lt;– not recommended for normal workloads</h1><h1 id="4-max-size-32-Kb-lt-–-not-recommended"><a href="#4-max-size-32-Kb-lt-–-not-recommended" class="headerlink" title="-4: max size: 32 Kb  &lt;– not recommended"></a>-4: max size: 32 Kb  &lt;– not recommended</h1><h1 id="3-max-size-16-Kb-lt-–-probably-not-recommended"><a href="#3-max-size-16-Kb-lt-–-probably-not-recommended" class="headerlink" title="-3: max size: 16 Kb  &lt;– probably not recommended"></a>-3: max size: 16 Kb  &lt;– probably not recommended</h1><h1 id="2-max-size-8-Kb-lt-–-good"><a href="#2-max-size-8-Kb-lt-–-good" class="headerlink" title="-2: max size: 8 Kb   &lt;– good"></a>-2: max size: 8 Kb   &lt;– good</h1><h1 id="1-max-size-4-Kb-lt-–-good"><a href="#1-max-size-4-Kb-lt-–-good" class="headerlink" title="-1: max size: 4 Kb   &lt;– good"></a>-1: max size: 4 Kb   &lt;– good</h1><h1 id="Positive-numbers-mean-store-up-to-exactly-that-number-of-elements"><a href="#Positive-numbers-mean-store-up-to-exactly-that-number-of-elements" class="headerlink" title="Positive numbers mean store up to exactly that number of elements"></a>Positive numbers mean store up to <em>exactly</em> that number of elements</h1><h1 id="per-list-node"><a href="#per-list-node" class="headerlink" title="per list node."></a>per list node.</h1><h1 id="The-highest-performing-option-is-usually-2-8-Kb-size-or-1-4-Kb-size"><a href="#The-highest-performing-option-is-usually-2-8-Kb-size-or-1-4-Kb-size" class="headerlink" title="The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),"></a>The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</h1><h1 id="but-if-your-use-case-is-unique-adjust-the-settings-as-necessary"><a href="#but-if-your-use-case-is-unique-adjust-the-settings-as-necessary" class="headerlink" title="but if your use case is unique, adjust the settings as necessary."></a>but if your use case is unique, adjust the settings as necessary.</h1><p>list-max-ziplist-size -2  </p>
<h1 id="Lists-may-also-be-compressed"><a href="#Lists-may-also-be-compressed" class="headerlink" title="Lists may also be compressed."></a>Lists may also be compressed.</h1><h1 id="Compress-depth-is-the-number-of-quicklist-ziplist-nodes-from-each-side-of"><a href="#Compress-depth-is-the-number-of-quicklist-ziplist-nodes-from-each-side-of" class="headerlink" title="Compress depth is the number of quicklist ziplist nodes from each side of"></a>Compress depth is the number of quicklist ziplist nodes from <em>each</em> side of</h1><h1 id="the-list-to-exclude-from-compression-The-head-and-tail-of-the-list"><a href="#the-list-to-exclude-from-compression-The-head-and-tail-of-the-list" class="headerlink" title="the list to exclude from compression.  The head and tail of the list"></a>the list to <em>exclude</em> from compression.  The head and tail of the list</h1><h1 id="are-always-uncompressed-for-fast-push-pop-operations-Settings-are"><a href="#are-always-uncompressed-for-fast-push-pop-operations-Settings-are" class="headerlink" title="are always uncompressed for fast push/pop operations.  Settings are:"></a>are always uncompressed for fast push/pop operations.  Settings are:</h1><h1 id="0-disable-all-list-compression"><a href="#0-disable-all-list-compression" class="headerlink" title="0: disable all list compression"></a>0: disable all list compression</h1><h1 id="1-depth-1-means-“don’t-start-compressing-until-after-1-node-into-the-list"><a href="#1-depth-1-means-“don’t-start-compressing-until-after-1-node-into-the-list" class="headerlink" title="1: depth 1 means “don’t start compressing until after 1 node into the list,"></a>1: depth 1 means “don’t start compressing until after 1 node into the list,</h1><h1 id="going-from-either-the-head-or-tail”"><a href="#going-from-either-the-head-or-tail”" class="headerlink" title="going from either the head or tail”"></a>going from either the head or tail”</h1><h1 id="So-head-gt-node-gt-node-gt-…-gt-node-gt-tail"><a href="#So-head-gt-node-gt-node-gt-…-gt-node-gt-tail" class="headerlink" title="So: [head]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[tail]"></a>So: [head]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[tail]</h1><h1 id="head-tail-will-always-be-uncompressed-inner-nodes-will-compress"><a href="#head-tail-will-always-be-uncompressed-inner-nodes-will-compress" class="headerlink" title="[head], [tail] will always be uncompressed; inner nodes will compress."></a>[head], [tail] will always be uncompressed; inner nodes will compress.</h1><h1 id="2-head-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-tail"><a href="#2-head-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-tail" class="headerlink" title="2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[tail]"></a>2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[tail]</h1><h1 id="2-here-means-don’t-compress-head-or-head-gt-next-or-tail-gt-prev-or-tail"><a href="#2-here-means-don’t-compress-head-or-head-gt-next-or-tail-gt-prev-or-tail" class="headerlink" title="2 here means: don’t compress head or head-&gt;next or tail-&gt;prev or tail,"></a>2 here means: don’t compress head or head-&gt;next or tail-&gt;prev or tail,</h1><h1 id="but-compress-all-nodes-between-them"><a href="#but-compress-all-nodes-between-them" class="headerlink" title="but compress all nodes between them."></a>but compress all nodes between them.</h1><h1 id="3-head-gt-next-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-prev-gt-tail"><a href="#3-head-gt-next-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-prev-gt-tail" class="headerlink" title="3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]"></a>3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</h1><h1 id="etc"><a href="#etc" class="headerlink" title="etc."></a>etc.</h1><p>list-compress-depth 0  </p>
<h1 id="Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed"><a href="#Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed" class="headerlink" title="Sets have a special encoding in just one case: when a set is composed"></a>Sets have a special encoding in just one case: when a set is composed</h1><h1 id="of-just-strings-that-happen-to-be-integers-in-radix-10-in-the-range"><a href="#of-just-strings-that-happen-to-be-integers-in-radix-10-in-the-range" class="headerlink" title="of just strings that happen to be integers in radix 10 in the range"></a>of just strings that happen to be integers in radix 10 in the range</h1><h1 id="of-64-bit-signed-integers"><a href="#of-64-bit-signed-integers" class="headerlink" title="of 64 bit signed integers."></a>of 64 bit signed integers.</h1><h1 id="The-following-configuration-setting-sets-the-limit-in-the-size-of-the"><a href="#The-following-configuration-setting-sets-the-limit-in-the-size-of-the" class="headerlink" title="The following configuration setting sets the limit in the size of the"></a>The following configuration setting sets the limit in the size of the</h1><h1 id="set-in-order-to-use-this-special-memory-saving-encoding"><a href="#set-in-order-to-use-this-special-memory-saving-encoding" class="headerlink" title="set in order to use this special memory saving encoding."></a>set in order to use this special memory saving encoding.</h1><p>set-max-intset-entries 512  </p>
<h1 id="Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in"><a href="#Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in" class="headerlink" title="Similarly to hashes and lists, sorted sets are also specially encoded in"></a>Similarly to hashes and lists, sorted sets are also specially encoded in</h1><h1 id="order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and"><a href="#order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and" class="headerlink" title="order to save a lot of space. This encoding is only used when the length and"></a>order to save a lot of space. This encoding is only used when the length and</h1><h1 id="elements-of-a-sorted-set-are-below-the-following-limits"><a href="#elements-of-a-sorted-set-are-below-the-following-limits" class="headerlink" title="elements of a sorted set are below the following limits:"></a>elements of a sorted set are below the following limits:</h1><p>zset-max-ziplist-entries 128<br>zset-max-ziplist-value 64  </p>
<h1 id="HyperLogLog-sparse-representation-bytes-limit-The-limit-includes-the"><a href="#HyperLogLog-sparse-representation-bytes-limit-The-limit-includes-the" class="headerlink" title="HyperLogLog sparse representation bytes limit. The limit includes the"></a>HyperLogLog sparse representation bytes limit. The limit includes the</h1><h1 id="16-bytes-header-When-an-HyperLogLog-using-the-sparse-representation-crosses"><a href="#16-bytes-header-When-an-HyperLogLog-using-the-sparse-representation-crosses" class="headerlink" title="16 bytes header. When an HyperLogLog using the sparse representation crosses"></a>16 bytes header. When an HyperLogLog using the sparse representation crosses</h1><h1 id="this-limit-it-is-converted-into-the-dense-representation"><a href="#this-limit-it-is-converted-into-the-dense-representation" class="headerlink" title="this limit, it is converted into the dense representation."></a>this limit, it is converted into the dense representation.</h1><h1 id="-161"><a href="#-161" class="headerlink" title></a></h1><h1 id="A-value-greater-than-16000-is-totally-useless-since-at-that-point-the"><a href="#A-value-greater-than-16000-is-totally-useless-since-at-that-point-the" class="headerlink" title="A value greater than 16000 is totally useless, since at that point the"></a>A value greater than 16000 is totally useless, since at that point the</h1><h1 id="dense-representation-is-more-memory-efficient"><a href="#dense-representation-is-more-memory-efficient" class="headerlink" title="dense representation is more memory efficient."></a>dense representation is more memory efficient.</h1><h1 id="-162"><a href="#-162" class="headerlink" title></a></h1><h1 id="The-suggested-value-is-3000-in-order-to-have-the-benefits-of"><a href="#The-suggested-value-is-3000-in-order-to-have-the-benefits-of" class="headerlink" title="The suggested value is ~ 3000 in order to have the benefits of"></a>The suggested value is ~ 3000 in order to have the benefits of</h1><h1 id="the-space-efficient-encoding-without-slowing-down-too-much-PFADD"><a href="#the-space-efficient-encoding-without-slowing-down-too-much-PFADD" class="headerlink" title="the space efficient encoding without slowing down too much PFADD,"></a>the space efficient encoding without slowing down too much PFADD,</h1><h1 id="which-is-O-N-with-the-sparse-encoding-The-value-can-be-raised-to"><a href="#which-is-O-N-with-the-sparse-encoding-The-value-can-be-raised-to" class="headerlink" title="which is O(N) with the sparse encoding. The value can be raised to"></a>which is O(N) with the sparse encoding. The value can be raised to</h1><h1 id="10000-when-CPU-is-not-a-concern-but-space-is-and-the-data-set-is"><a href="#10000-when-CPU-is-not-a-concern-but-space-is-and-the-data-set-is" class="headerlink" title="~ 10000 when CPU is not a concern, but space is, and the data set is"></a>~ 10000 when CPU is not a concern, but space is, and the data set is</h1><h1 id="composed-of-many-HyperLogLogs-with-cardinality-in-the-0-15000-range"><a href="#composed-of-many-HyperLogLogs-with-cardinality-in-the-0-15000-range" class="headerlink" title="composed of many HyperLogLogs with cardinality in the 0 - 15000 range."></a>composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</h1><p>hll-sparse-max-bytes 3000  </p>
<h1 id="Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in"><a href="#Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in" class="headerlink" title="Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in"></a>Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</h1><h1 id="order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level"><a href="#order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level" class="headerlink" title="order to help rehashing the main Redis hash table (the one mapping top-level"></a>order to help rehashing the main Redis hash table (the one mapping top-level</h1><h1 id="keys-to-values-The-hash-table-implementation-Redis-uses-see-dict-c"><a href="#keys-to-values-The-hash-table-implementation-Redis-uses-see-dict-c" class="headerlink" title="keys to values). The hash table implementation Redis uses (see dict.c)"></a>keys to values). The hash table implementation Redis uses (see dict.c)</h1><h1 id="performs-a-lazy-rehashing-the-more-operation-you-run-into-a-hash-table"><a href="#performs-a-lazy-rehashing-the-more-operation-you-run-into-a-hash-table" class="headerlink" title="performs a lazy rehashing: the more operation you run into a hash table"></a>performs a lazy rehashing: the more operation you run into a hash table</h1><h1 id="that-is-rehashing-the-more-rehashing-“steps”-are-performed-so-if-the"><a href="#that-is-rehashing-the-more-rehashing-“steps”-are-performed-so-if-the" class="headerlink" title="that is rehashing, the more rehashing “steps” are performed, so if the"></a>that is rehashing, the more rehashing “steps” are performed, so if the</h1><h1 id="server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used"><a href="#server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used" class="headerlink" title="server is idle the rehashing is never complete and some more memory is used"></a>server is idle the rehashing is never complete and some more memory is used</h1><h1 id="by-the-hash-table"><a href="#by-the-hash-table" class="headerlink" title="by the hash table."></a>by the hash table.</h1><h1 id="-163"><a href="#-163" class="headerlink" title></a></h1><h1 id="The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to"><a href="#The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to" class="headerlink" title="The default is to use this millisecond 10 times every second in order to"></a>The default is to use this millisecond 10 times every second in order to</h1><h1 id="actively-rehash-the-main-dictionaries-freeing-memory-when-possible"><a href="#actively-rehash-the-main-dictionaries-freeing-memory-when-possible" class="headerlink" title="actively rehash the main dictionaries, freeing memory when possible."></a>actively rehash the main dictionaries, freeing memory when possible.</h1><h1 id="-164"><a href="#-164" class="headerlink" title></a></h1><h1 id="If-unsure"><a href="#If-unsure" class="headerlink" title="If unsure:"></a>If unsure:</h1><h1 id="use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is"><a href="#use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is" class="headerlink" title="use “activerehashing no” if you have hard latency requirements and it is"></a>use “activerehashing no” if you have hard latency requirements and it is</h1><h1 id="not-a-good-thing-in-your-environment-that-Redis-can-reply-from-time-to-time"><a href="#not-a-good-thing-in-your-environment-that-Redis-can-reply-from-time-to-time" class="headerlink" title="not a good thing in your environment that Redis can reply from time to time"></a>not a good thing in your environment that Redis can reply from time to time</h1><h1 id="to-queries-with-2-milliseconds-delay"><a href="#to-queries-with-2-milliseconds-delay" class="headerlink" title="to queries with 2 milliseconds delay."></a>to queries with 2 milliseconds delay.</h1><h1 id="-165"><a href="#-165" class="headerlink" title></a></h1><h1 id="use-“activerehashing-yes”-if-you-don’t-have-such-hard-requirements-but"><a href="#use-“activerehashing-yes”-if-you-don’t-have-such-hard-requirements-but" class="headerlink" title="use “activerehashing yes” if you don’t have such hard requirements but"></a>use “activerehashing yes” if you don’t have such hard requirements but</h1><h1 id="want-to-free-memory-asap-when-possible"><a href="#want-to-free-memory-asap-when-possible" class="headerlink" title="want to free memory asap when possible."></a>want to free memory asap when possible.</h1><p>activerehashing yes  </p>
<h1 id="The-client-output-buffer-limits-can-be-used-to-force-disconnection-of-clients"><a href="#The-client-output-buffer-limits-can-be-used-to-force-disconnection-of-clients" class="headerlink" title="The client output buffer limits can be used to force disconnection of clients"></a>The client output buffer limits can be used to force disconnection of clients</h1><h1 id="that-are-not-reading-data-from-the-server-fast-enough-for-some-reason-a"><a href="#that-are-not-reading-data-from-the-server-fast-enough-for-some-reason-a" class="headerlink" title="that are not reading data from the server fast enough for some reason (a"></a>that are not reading data from the server fast enough for some reason (a</h1><h1 id="common-reason-is-that-a-Pub-Sub-client-can’t-consume-messages-as-fast-as-the"><a href="#common-reason-is-that-a-Pub-Sub-client-can’t-consume-messages-as-fast-as-the" class="headerlink" title="common reason is that a Pub/Sub client can’t consume messages as fast as the"></a>common reason is that a Pub/Sub client can’t consume messages as fast as the</h1><h1 id="publisher-can-produce-them"><a href="#publisher-can-produce-them" class="headerlink" title="publisher can produce them)."></a>publisher can produce them).</h1><h1 id="-166"><a href="#-166" class="headerlink" title></a></h1><h1 id="The-limit-can-be-set-differently-for-the-three-different-classes-of-clients"><a href="#The-limit-can-be-set-differently-for-the-three-different-classes-of-clients" class="headerlink" title="The limit can be set differently for the three different classes of clients:"></a>The limit can be set differently for the three different classes of clients:</h1><h1 id="-167"><a href="#-167" class="headerlink" title></a></h1><h1 id="normal-gt-normal-clients-including-MONITOR-clients"><a href="#normal-gt-normal-clients-including-MONITOR-clients" class="headerlink" title="normal -&gt; normal clients including MONITOR clients"></a>normal -&gt; normal clients including MONITOR clients</h1><h1 id="slave-gt-slave-clients"><a href="#slave-gt-slave-clients" class="headerlink" title="slave  -&gt; slave clients"></a>slave  -&gt; slave clients</h1><h1 id="pubsub-gt-clients-subscribed-to-at-least-one-pubsub-channel-or-pattern"><a href="#pubsub-gt-clients-subscribed-to-at-least-one-pubsub-channel-or-pattern" class="headerlink" title="pubsub -&gt; clients subscribed to at least one pubsub channel or pattern"></a>pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</h1><h1 id="-168"><a href="#-168" class="headerlink" title></a></h1><h1 id="The-syntax-of-every-client-output-buffer-limit-directive-is-the-following"><a href="#The-syntax-of-every-client-output-buffer-limit-directive-is-the-following" class="headerlink" title="The syntax of every client-output-buffer-limit directive is the following:"></a>The syntax of every client-output-buffer-limit directive is the following:</h1><h1 id="-169"><a href="#-169" class="headerlink" title></a></h1><h1 id="client-output-buffer-limit"><a href="#client-output-buffer-limit" class="headerlink" title="client-output-buffer-limit    "></a>client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds></soft></soft></hard></class></h1><h1 id="-170"><a href="#-170" class="headerlink" title></a></h1><h1 id="A-client-is-immediately-disconnected-once-the-hard-limit-is-reached-or-if"><a href="#A-client-is-immediately-disconnected-once-the-hard-limit-is-reached-or-if" class="headerlink" title="A client is immediately disconnected once the hard limit is reached, or if"></a>A client is immediately disconnected once the hard limit is reached, or if</h1><h1 id="the-soft-limit-is-reached-and-remains-reached-for-the-specified-number-of"><a href="#the-soft-limit-is-reached-and-remains-reached-for-the-specified-number-of" class="headerlink" title="the soft limit is reached and remains reached for the specified number of"></a>the soft limit is reached and remains reached for the specified number of</h1><h1 id="seconds-continuously"><a href="#seconds-continuously" class="headerlink" title="seconds (continuously)."></a>seconds (continuously).</h1><h1 id="So-for-instance-if-the-hard-limit-is-32-megabytes-and-the-soft-limit-is"><a href="#So-for-instance-if-the-hard-limit-is-32-megabytes-and-the-soft-limit-is" class="headerlink" title="So for instance if the hard limit is 32 megabytes and the soft limit is"></a>So for instance if the hard limit is 32 megabytes and the soft limit is</h1><h1 id="16-megabytes-10-seconds-the-client-will-get-disconnected-immediately"><a href="#16-megabytes-10-seconds-the-client-will-get-disconnected-immediately" class="headerlink" title="16 megabytes / 10 seconds, the client will get disconnected immediately"></a>16 megabytes / 10 seconds, the client will get disconnected immediately</h1><h1 id="if-the-size-of-the-output-buffers-reach-32-megabytes-but-will-also-get"><a href="#if-the-size-of-the-output-buffers-reach-32-megabytes-but-will-also-get" class="headerlink" title="if the size of the output buffers reach 32 megabytes, but will also get"></a>if the size of the output buffers reach 32 megabytes, but will also get</h1><h1 id="disconnected-if-the-client-reaches-16-megabytes-and-continuously-overcomes"><a href="#disconnected-if-the-client-reaches-16-megabytes-and-continuously-overcomes" class="headerlink" title="disconnected if the client reaches 16 megabytes and continuously overcomes"></a>disconnected if the client reaches 16 megabytes and continuously overcomes</h1><h1 id="the-limit-for-10-seconds"><a href="#the-limit-for-10-seconds" class="headerlink" title="the limit for 10 seconds."></a>the limit for 10 seconds.</h1><h1 id="-171"><a href="#-171" class="headerlink" title></a></h1><h1 id="By-default-normal-clients-are-not-limited-because-they-don’t-receive-data"><a href="#By-default-normal-clients-are-not-limited-because-they-don’t-receive-data" class="headerlink" title="By default normal clients are not limited because they don’t receive data"></a>By default normal clients are not limited because they don’t receive data</h1><h1 id="without-asking-in-a-push-way-but-just-after-a-request-so-only"><a href="#without-asking-in-a-push-way-but-just-after-a-request-so-only" class="headerlink" title="without asking (in a push way), but just after a request, so only"></a>without asking (in a push way), but just after a request, so only</h1><h1 id="asynchronous-clients-may-create-a-scenario-where-data-is-requested-faster"><a href="#asynchronous-clients-may-create-a-scenario-where-data-is-requested-faster" class="headerlink" title="asynchronous clients may create a scenario where data is requested faster"></a>asynchronous clients may create a scenario where data is requested faster</h1><h1 id="than-it-can-read"><a href="#than-it-can-read" class="headerlink" title="than it can read."></a>than it can read.</h1><h1 id="-172"><a href="#-172" class="headerlink" title></a></h1><h1 id="Instead-there-is-a-default-limit-for-pubsub-and-slave-clients-since"><a href="#Instead-there-is-a-default-limit-for-pubsub-and-slave-clients-since" class="headerlink" title="Instead there is a default limit for pubsub and slave clients, since"></a>Instead there is a default limit for pubsub and slave clients, since</h1><h1 id="subscribers-and-slaves-receive-data-in-a-push-fashion"><a href="#subscribers-and-slaves-receive-data-in-a-push-fashion" class="headerlink" title="subscribers and slaves receive data in a push fashion."></a>subscribers and slaves receive data in a push fashion.</h1><h1 id="-173"><a href="#-173" class="headerlink" title></a></h1><h1 id="Both-the-hard-or-the-soft-limit-can-be-disabled-by-setting-them-to-zero"><a href="#Both-the-hard-or-the-soft-limit-can-be-disabled-by-setting-them-to-zero" class="headerlink" title="Both the hard or the soft limit can be disabled by setting them to zero."></a>Both the hard or the soft limit can be disabled by setting them to zero.</h1><p>client-output-buffer-limit normal 0 0 0<br>client-output-buffer-limit slave 256mb 64mb 60<br>client-output-buffer-limit pubsub 32mb 8mb 60  </p>
<h1 id="Redis-calls-an-internal-function-to-perform-many-background-tasks-like"><a href="#Redis-calls-an-internal-function-to-perform-many-background-tasks-like" class="headerlink" title="Redis calls an internal function to perform many background tasks, like"></a>Redis calls an internal function to perform many background tasks, like</h1><h1 id="closing-connections-of-clients-in-timeout-purging-expired-keys-that-are"><a href="#closing-connections-of-clients-in-timeout-purging-expired-keys-that-are" class="headerlink" title="closing connections of clients in timeout, purging expired keys that are"></a>closing connections of clients in timeout, purging expired keys that are</h1><h1 id="never-requested-and-so-forth"><a href="#never-requested-and-so-forth" class="headerlink" title="never requested, and so forth."></a>never requested, and so forth.</h1><h1 id="-174"><a href="#-174" class="headerlink" title></a></h1><h1 id="Not-all-tasks-are-performed-with-the-same-frequency-but-Redis-checks-for"><a href="#Not-all-tasks-are-performed-with-the-same-frequency-but-Redis-checks-for" class="headerlink" title="Not all tasks are performed with the same frequency, but Redis checks for"></a>Not all tasks are performed with the same frequency, but Redis checks for</h1><h1 id="tasks-to-perform-according-to-the-specified-“hz”-value"><a href="#tasks-to-perform-according-to-the-specified-“hz”-value" class="headerlink" title="tasks to perform according to the specified “hz” value."></a>tasks to perform according to the specified “hz” value.</h1><h1 id="-175"><a href="#-175" class="headerlink" title></a></h1><h1 id="By-default-“hz”-is-set-to-10-Raising-the-value-will-use-more-CPU-when"><a href="#By-default-“hz”-is-set-to-10-Raising-the-value-will-use-more-CPU-when" class="headerlink" title="By default “hz” is set to 10. Raising the value will use more CPU when"></a>By default “hz” is set to 10. Raising the value will use more CPU when</h1><h1 id="Redis-is-idle-but-at-the-same-time-will-make-Redis-more-responsive-when"><a href="#Redis-is-idle-but-at-the-same-time-will-make-Redis-more-responsive-when" class="headerlink" title="Redis is idle, but at the same time will make Redis more responsive when"></a>Redis is idle, but at the same time will make Redis more responsive when</h1><h1 id="there-are-many-keys-expiring-at-the-same-time-and-timeouts-may-be"><a href="#there-are-many-keys-expiring-at-the-same-time-and-timeouts-may-be" class="headerlink" title="there are many keys expiring at the same time, and timeouts may be"></a>there are many keys expiring at the same time, and timeouts may be</h1><h1 id="handled-with-more-precision"><a href="#handled-with-more-precision" class="headerlink" title="handled with more precision."></a>handled with more precision.</h1><h1 id="-176"><a href="#-176" class="headerlink" title></a></h1><h1 id="The-range-is-between-1-and-500-however-a-value-over-100-is-usually-not"><a href="#The-range-is-between-1-and-500-however-a-value-over-100-is-usually-not" class="headerlink" title="The range is between 1 and 500, however a value over 100 is usually not"></a>The range is between 1 and 500, however a value over 100 is usually not</h1><h1 id="a-good-idea-Most-users-should-use-the-default-of-10-and-raise-this-up-to"><a href="#a-good-idea-Most-users-should-use-the-default-of-10-and-raise-this-up-to" class="headerlink" title="a good idea. Most users should use the default of 10 and raise this up to"></a>a good idea. Most users should use the default of 10 and raise this up to</h1><h1 id="100-only-in-environments-where-very-low-latency-is-required"><a href="#100-only-in-environments-where-very-low-latency-is-required" class="headerlink" title="100 only in environments where very low latency is required."></a>100 only in environments where very low latency is required.</h1><p>hz 10  </p>
<h1 id="When-a-child-rewrites-the-AOF-file-if-the-following-option-is-enabled"><a href="#When-a-child-rewrites-the-AOF-file-if-the-following-option-is-enabled" class="headerlink" title="When a child rewrites the AOF file, if the following option is enabled"></a>When a child rewrites the AOF file, if the following option is enabled</h1><h1 id="the-file-will-be-fsync-ed-every-32-MB-of-data-generated-This-is-useful"><a href="#the-file-will-be-fsync-ed-every-32-MB-of-data-generated-This-is-useful" class="headerlink" title="the file will be fsync-ed every 32 MB of data generated. This is useful"></a>the file will be fsync-ed every 32 MB of data generated. This is useful</h1><h1 id="in-order-to-commit-the-file-to-the-disk-more-incrementally-and-avoid"><a href="#in-order-to-commit-the-file-to-the-disk-more-incrementally-and-avoid" class="headerlink" title="in order to commit the file to the disk more incrementally and avoid"></a>in order to commit the file to the disk more incrementally and avoid</h1><h1 id="big-latency-spikes"><a href="#big-latency-spikes" class="headerlink" title="big latency spikes."></a>big latency spikes.</h1><p>aof-rewrite-incremental-fsync yes</p>
<p>4.2.3 测试 redis-cli 连接上来   der exec -it 运行着 Rediis 服务的容器 ID redis-cliock</p>
<p><img src="https://img-blog.csdnimg.cn/20190214175940479.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>4.2.4 测试持久化文件生成</p>
<p><img src="https://img-blog.csdnimg.cn/20190214180103450.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p><em><strong>八）本地镜像发布到阿里云</strong></em></p>
<ol>
<li>本地镜像发布到阿里云流程</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20190214180312456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<ol start="2">
<li>镜像的生成方法</li>
</ol>
<p>2.1 前面的 DockerFile </p>
<p>2.2  从容器创建一个新的镜像<br>docker commit [OPTIONS] 容器 ID [REPOSITORY[:TAG]]</p>
<p>OPTIONS 说明：<br>-a : 提交的镜像作者；<br>-m : 提交时的说明文字；</p>
<p><img src="https://img-blog.csdnimg.cn/20190214180429598.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.3 将本地镜像推送到阿里云</p>
<p>2.3.1 本地镜像素材原型</p>
<p><img src="https://img-blog.csdnimg.cn/20190214180516228.png" alt></p>
<p>2.3.2 阿里云开发者平台   <a href="https://dev.aliyun.com/search.html" target="_blank" rel="noopener">https://dev.aliyun.com/search.html</a></p>
<p><img src="https://img-blog.csdnimg.cn/20190214180541449.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.3.3 创建仓库镜像 </p>
<p><img src="https://img-blog.csdnimg.cn/20190214180656547.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt>  命名空间  仓库名称</p>
<p>2.3.4 将镜像推送到 registry</p>
<p><img src="https://img-blog.csdnimg.cn/20190214180826297.png" alt></p>
<p><img src="https://img-blog.csdnimg.cn/20190214180859535.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.3.5 公有云可以查询到</p>
<p><img src="https://img-blog.csdnimg.cn/20190214180926563.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.3.6 查看详情</p>
<p><img src="https://img-blog.csdnimg.cn/20190214181003547.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>
<p>2.4 将阿里云上的镜像下载到本地</p>
<p><img src="https://img-blog.csdnimg.cn/20190214181055918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llZG9uZ2ZlbmdfMTMxNA==,size_16,color_FFFFFF,t_70" alt></p>

    </div>

    
    
    
    <div>
    
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
    
    </div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"># docker</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2020/02/15/Java%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%85%A8%E9%9D%A2%E6%B5%85%E6%9E%90/" rel="next" title="(转载)学习Java内存分配全面解析">
                  <i class="fa fa-chevron-left"></i> (转载)学习Java内存分配全面解析
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2020/03/07/%E5%A4%9A%E6%80%81%E6%80%A7%EF%BC%8C%E7%88%B6%E7%B1%BB%E5%BC%95%E7%94%A8%E6%8C%87%E5%90%91%E5%AD%90%E7%B1%BB%E5%AF%B9%E8%B1%A1/" rel="prev" title="多态性，父类引用指向子类对象">
                  多态性，父类引用指向子类对象 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker-学习整理"><span class="nav-text">Docker 学习整理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网易云"><span class="nav-text">网易云</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#阿里云"><span class="nav-text">阿里云</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volume-test"><span class="nav-text">volume test</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-configuration-file-example"><span class="nav-text">Redis configuration file example.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#null"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-in-order-to-read-the-configuration-file-Redis-must-be"><span class="nav-text">Note that in order to read the configuration file, Redis must be</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#started-with-the-file-path-as-first-argument"><span class="nav-text">started with the file path as first argument:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-1"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redis-server-path-to-redis-conf"><span class="nav-text">./redis-server /path/to/redis.conf</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-on-units-when-memory-size-is-needed-it-is-possible-to-specify"><span class="nav-text">Note on units: when memory size is needed, it is possible to specify</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#it-in-the-usual-form-of-1k-5GB-4M-and-so-forth"><span class="nav-text">it in the usual form of 1k 5GB 4M and so forth:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-2"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1k-gt-1000-bytes"><span class="nav-text">1k =&gt; 1000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1kb-gt-1024-bytes"><span class="nav-text">1kb =&gt; 1024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1m-gt-1000000-bytes"><span class="nav-text">1m =&gt; 1000000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1mb-gt-1024-1024-bytes"><span class="nav-text">1mb =&gt; 1024*1024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1g-gt-1000000000-bytes"><span class="nav-text">1g =&gt; 1000000000 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1gb-gt-102410241024-bytes"><span class="nav-text">1gb =&gt; 102410241024 bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-3"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#units-are-case-insensitive-so-1GB-1Gb-1gB-are-all-the-same"><span class="nav-text">units are case insensitive so 1GB 1Gb 1gB are all the same.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Include-one-or-more-other-config-files-here-This-is-useful-if-you"><span class="nav-text">Include one or more other config files here.  This is useful if you</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#have-a-standard-template-that-goes-to-all-Redis-servers-but-also-need"><span class="nav-text">have a standard template that goes to all Redis servers but also need</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-customize-a-few-per-server-settings-Include-files-can-include"><span class="nav-text">to customize a few per-server settings.  Include files can include</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#other-files-so-use-this-wisely"><span class="nav-text">other files, so use this wisely.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-4"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Notice-option-“include”-won’t-be-rewritten-by-command”CONFIG-REWRITE”"><span class="nav-text">Notice option “include” won’t be rewritten by command”CONFIG REWRITE”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#from-admin-or-Redis-Sentinel-Since-Redis-always-uses-the-last-processed"><span class="nav-text">from admin or Redis Sentinel. Since Redis always uses the last processed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#line-as-value-of-a-configuration-directive-you’d-better-put-includes"><span class="nav-text">line as value of a configuration directive, you’d better put includes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#at-the-beginning-of-this-file-to-avoid-overwriting-config-change-at-runtime"><span class="nav-text">at the beginning of this file to avoid overwriting config change at runtime.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-5"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-instead-you-are-interested-in-using-includes-to-override-configuration"><span class="nav-text">If instead you are interested in using includes to override configuration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#options-it-is-better-to-use-include-as-the-last-line"><span class="nav-text">options, it is better to use include as the last line.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-6"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#include-path-to-local-conf"><span class="nav-text">include /path/to/local.conf</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#include-path-to-other-conf"><span class="nav-text">include /path/to/other.conf</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-if-no-“bind”-configuration-directive-is-specified-Redis-listens"><span class="nav-text">By default, if no “bind” configuration directive is specified, Redis listens</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-connections-from-all-the-network-interfaces-available-on-the-server"><span class="nav-text">for connections from all the network interfaces available on the server.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-possible-to-listen-to-just-one-or-multiple-selected-interfaces-using"><span class="nav-text">It is possible to listen to just one or multiple selected interfaces using</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-“bind”-configuration-directive-followed-by-one-or-more-IP-addresses"><span class="nav-text">the “bind” configuration directive, followed by one or more IP addresses.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-7"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Examples"><span class="nav-text">Examples:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-8"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bind-192-168-1-100-10-0-0-1"><span class="nav-text">bind 192.168.1.100 10.0.0.1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bind-127-0-0-1-1"><span class="nav-text">bind 127.0.0.1 ::1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-9"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-If-the-computer-running-Redis-is-directly-exposed-to-the"><span class="nav-text">~ WARNING ~ If the computer running Redis is directly exposed to the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#internet-binding-to-all-the-interfaces-is-dangerous-and-will-expose-the"><span class="nav-text">internet, binding to all the interfaces is dangerous and will expose the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#instance-to-everybody-on-the-internet-So-by-default-we-uncomment-the"><span class="nav-text">instance to everybody on the internet. So by default we uncomment the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#following-bind-directive-that-will-force-Redis-to-listen-only-into"><span class="nav-text">following bind directive, that will force Redis to listen only into</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-IPv4-lookback-interface-address-this-means-Redis-will-be-able-to"><span class="nav-text">the IPv4 lookback interface address (this means Redis will be able to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#accept-connections-only-from-clients-running-into-the-same-computer-it"><span class="nav-text">accept connections only from clients running into the same computer it</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-running"><span class="nav-text">is running).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-10"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IF-YOU-ARE-SURE-YOU-WANT-YOUR-INSTANCE-TO-LISTEN-TO-ALL-THE-INTERFACES"><span class="nav-text">IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JUST-COMMENT-THE-FOLLOWING-LINE"><span class="nav-text">JUST COMMENT THE FOLLOWING LINE.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-11"><span class="nav-text">~</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Protected-mode-is-a-layer-of-security-protection-in-order-to-avoid-that"><span class="nav-text">Protected mode is a layer of security protection, in order to avoid that</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-instances-left-open-on-the-internet-are-accessed-and-exploited"><span class="nav-text">Redis instances left open on the internet are accessed and exploited.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-12"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-protected-mode-is-on-and-if"><span class="nav-text">When protected mode is on and if:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-13"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-The-server-is-not-binding-explicitly-to-a-set-of-addresses-using-the"><span class="nav-text">1) The server is not binding explicitly to a set of addresses using the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“bind”-directive"><span class="nav-text">“bind” directive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-No-password-is-configured"><span class="nav-text">2) No password is configured.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-14"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-server-only-accepts-connections-from-clients-connecting-from-the"><span class="nav-text">The server only accepts connections from clients connecting from the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IPv4-and-IPv6-loopback-addresses-127-0-0-1-and-1-and-from-Unix-domain"><span class="nav-text">IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sockets"><span class="nav-text">sockets.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-15"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-protected-mode-is-enabled-You-should-disable-it-only-if"><span class="nav-text">By default protected mode is enabled. You should disable it only if</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#you-are-sure-you-want-clients-from-other-hosts-to-connect-to-Redis"><span class="nav-text">you are sure you want clients from other hosts to connect to Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#even-if-no-authentication-is-configured-nor-a-specific-set-of-interfaces"><span class="nav-text">even if no authentication is configured, nor a specific set of interfaces</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-explicitly-listed-using-the-“bind”-directive"><span class="nav-text">are explicitly listed using the “bind” directive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Accept-connections-on-the-specified-port-default-is-6379-IANA-815344"><span class="nav-text">Accept connections on the specified port, default is 6379 (IANA #815344).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-port-0-is-specified-Redis-will-not-listen-on-a-TCP-socket"><span class="nav-text">If port 0 is specified Redis will not listen on a TCP socket.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TCP-listen-backlog"><span class="nav-text">TCP listen() backlog.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-16"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-high-requests-per-second-environments-you-need-an-high-backlog-in-order"><span class="nav-text">In high requests-per-second environments you need an high backlog in order</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-avoid-slow-clients-connections-issues-Note-that-the-Linux-kernel"><span class="nav-text">to avoid slow clients connections issues. Note that the Linux kernel</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-silently-truncate-it-to-the-value-of-proc-sys-net-core-somaxconn-so"><span class="nav-text">will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#make-sure-to-raise-both-the-value-of-somaxconn-and-tcp-max-syn-backlog"><span class="nav-text">make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-order-to-get-the-desired-effect"><span class="nav-text">in order to get the desired effect.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Unix-socket"><span class="nav-text">Unix socket.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-17"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-path-for-the-Unix-socket-that-will-be-used-to-listen-for"><span class="nav-text">Specify the path for the Unix socket that will be used to listen for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#incoming-connections-There-is-no-default-so-Redis-will-not-listen"><span class="nav-text">incoming connections. There is no default, so Redis will not listen</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#on-a-unix-socket-when-not-specified"><span class="nav-text">on a unix socket when not specified.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-18"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unixsocket-tmp-redis-sock"><span class="nav-text">unixsocket /tmp/redis.sock</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#unixsocketperm-700"><span class="nav-text">unixsocketperm 700</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Close-the-connection-after-a-client-is-idle-for-N-seconds-0-to-disable"><span class="nav-text">Close the connection after a client is idle for N seconds (0 to disable)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TCP-keepalive"><span class="nav-text">TCP keepalive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-19"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-non-zero-use-SO-KEEPALIVE-to-send-TCP-ACKs-to-clients-in-absence"><span class="nav-text">If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-communication-This-is-useful-for-two-reasons"><span class="nav-text">of communication. This is useful for two reasons:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-20"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Detect-dead-peers"><span class="nav-text">1) Detect dead peers.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Take-the-connection-alive-from-the-point-of-view-of-network"><span class="nav-text">2) Take the connection alive from the point of view of network</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#equipment-in-the-middle"><span class="nav-text">equipment in the middle.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-21"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#On-Linux-the-specified-value-in-seconds-is-the-period-used-to-send-ACKs"><span class="nav-text">On Linux, the specified value (in seconds) is the period used to send ACKs.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-to-close-the-connection-the-double-of-the-time-is-needed"><span class="nav-text">Note that to close the connection the double of the time is needed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#On-other-kernels-the-period-depends-on-the-kernel-configuration"><span class="nav-text">On other kernels the period depends on the kernel configuration.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-22"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-reasonable-value-for-this-option-is-300-seconds-which-is-the-new"><span class="nav-text">A reasonable value for this option is 300 seconds, which is the new</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-default-starting-with-Redis-3-2-1"><span class="nav-text">Redis default starting with Redis 3.2.1.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-Redis-does-not-run-as-a-daemon-Use-‘yes’-if-you-need-it"><span class="nav-text">By default Redis does not run as a daemon. Use ‘yes’ if you need it.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-Redis-will-write-a-pid-file-in-var-run-redis-pid-when-daemonized"><span class="nav-text">Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-run-Redis-from-upstart-or-systemd-Redis-can-interact-with-your"><span class="nav-text">If you run Redis from upstart or systemd, Redis can interact with your</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#supervision-tree-Options"><span class="nav-text">supervision tree. Options:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#supervised-no-no-supervision-interaction"><span class="nav-text">supervised no      - no supervision interaction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#supervised-upstart-signal-upstart-by-putting-Redis-into-SIGSTOP-mode"><span class="nav-text">supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#supervised-systemd-signal-systemd-by-writing-READY-1-to-NOTIFY-SOCKET"><span class="nav-text">supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#supervised-auto-detect-upstart-or-systemd-method-based-on"><span class="nav-text">supervised auto    - detect upstart or systemd method based on</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UPSTART-JOB-or-NOTIFY-SOCKET-environment-variables"><span class="nav-text">UPSTART_JOB or NOTIFY_SOCKET environment variables</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-these-supervision-methods-only-signal-“process-is-ready-”"><span class="nav-text">Note: these supervision methods only signal “process is ready.”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#They-do-not-enable-continuous-liveness-pings-back-to-your-supervisor"><span class="nav-text">They do not enable continuous liveness pings back to your supervisor.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-a-pid-file-is-specified-Redis-writes-it-where-specified-at-startup"><span class="nav-text">If a pid file is specified, Redis writes it where specified at startup</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-removes-it-at-exit"><span class="nav-text">and removes it at exit.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-23"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-the-server-runs-non-daemonized-no-pid-file-is-created-if-none-is"><span class="nav-text">When the server runs non daemonized, no pid file is created if none is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#specified-in-the-configuration-When-the-server-is-daemonized-the-pid-file"><span class="nav-text">specified in the configuration. When the server is daemonized, the pid file</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-used-even-if-not-specified-defaulting-to-“-var-run-redis-pid”"><span class="nav-text">is used even if not specified, defaulting to “/var/run/redis.pid”.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-24"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Creating-a-pid-file-is-best-effort-if-Redis-is-not-able-to-create-it"><span class="nav-text">Creating a pid file is best effort: if Redis is not able to create it</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#nothing-bad-happens-the-server-will-start-and-run-normally"><span class="nav-text">nothing bad happens, the server will start and run normally.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-server-verbosity-level"><span class="nav-text">Specify the server verbosity level.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-can-be-one-of"><span class="nav-text">This can be one of:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#debug-a-lot-of-information-useful-for-development-testing"><span class="nav-text">debug (a lot of information, useful for development/testing)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#verbose-many-rarely-useful-info-but-not-a-mess-like-the-debug-level"><span class="nav-text">verbose (many rarely useful info, but not a mess like the debug level)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#notice-moderately-verbose-what-you-want-in-production-probably"><span class="nav-text">notice (moderately verbose, what you want in production probably)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#warning-only-very-important-critical-messages-are-logged"><span class="nav-text">warning (only very important / critical messages are logged)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-log-file-name-Also-the-empty-string-can-be-used-to-force"><span class="nav-text">Specify the log file name. Also the empty string can be used to force</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-to-log-on-the-standard-output-Note-that-if-you-use-standard"><span class="nav-text">Redis to log on the standard output. Note that if you use standard</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#output-for-logging-but-daemonize-logs-will-be-sent-to-dev-null"><span class="nav-text">output for logging but daemonize, logs will be sent to /dev/null</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#To-enable-logging-to-the-system-logger-just-set-‘syslog-enabled’-to-yes"><span class="nav-text">To enable logging to the system logger, just set ‘syslog-enabled’ to yes,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-optionally-update-the-other-syslog-parameters-to-suit-your-needs"><span class="nav-text">and optionally update the other syslog parameters to suit your needs.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-enabled-no"><span class="nav-text">syslog-enabled no</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-syslog-identity"><span class="nav-text">Specify the syslog identity.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-ident-redis"><span class="nav-text">syslog-ident redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-the-syslog-facility-Must-be-USER-or-between-LOCAL0-LOCAL7"><span class="nav-text">Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#syslog-facility-local0"><span class="nav-text">syslog-facility local0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Set-the-number-of-databases-The-default-database-is-DB-0-you-can-select"><span class="nav-text">Set the number of databases. The default database is DB 0, you can select</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-different-one-on-a-per-connection-basis-using-SELECT-where"><span class="nav-text">a different one on a per-connection basis using SELECT  where</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dbid-is-a-number-between-0-and-‘databases’-1"><span class="nav-text">dbid is a number between 0 and ‘databases’-1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-25"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Save-the-DB-on-disk"><span class="nav-text">Save the DB on disk:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-26"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#save"><span class="nav-text">save  </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-27"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Will-save-the-DB-if-both-the-given-number-of-seconds-and-the-given"><span class="nav-text">Will save the DB if both the given number of seconds and the given</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#number-of-write-operations-against-the-DB-occurred"><span class="nav-text">number of write operations against the DB occurred.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-28"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-the-example-below-the-behaviour-will-be-to-save"><span class="nav-text">In the example below the behaviour will be to save:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#after-900-sec-15-min-if-at-least-1-key-changed"><span class="nav-text">after 900 sec (15 min) if at least 1 key changed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#after-300-sec-5-min-if-at-least-10-keys-changed"><span class="nav-text">after 300 sec (5 min) if at least 10 keys changed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#after-60-sec-if-at-least-10000-keys-changed"><span class="nav-text">after 60 sec if at least 10000 keys changed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-29"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-you-can-disable-saving-completely-by-commenting-out-all-“save”-lines"><span class="nav-text">Note: you can disable saving completely by commenting out all “save” lines.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-30"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-also-possible-to-remove-all-the-previously-configured-save"><span class="nav-text">It is also possible to remove all the previously configured save</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#points-by-adding-a-save-directive-with-a-single-empty-string-argument"><span class="nav-text">points by adding a save directive with a single empty string argument</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#like-in-the-following-example"><span class="nav-text">like in the following example:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-31"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#save-“”"><span class="nav-text">save “”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-Redis-will-stop-accepting-writes-if-RDB-snapshots-are-enabled"><span class="nav-text">By default Redis will stop accepting writes if RDB snapshots are enabled</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#at-least-one-save-point-and-the-latest-background-save-failed"><span class="nav-text">(at least one save point) and the latest background save failed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-will-make-the-user-aware-in-a-hard-way-that-data-is-not-persisting"><span class="nav-text">This will make the user aware (in a hard way) that data is not persisting</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#on-disk-properly-otherwise-chances-are-that-no-one-will-notice-and-some"><span class="nav-text">on disk properly, otherwise chances are that no one will notice and some</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#disaster-will-happen"><span class="nav-text">disaster will happen.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-32"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-the-background-saving-process-will-start-working-again-Redis-will"><span class="nav-text">If the background saving process will start working again Redis will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#automatically-allow-writes-again"><span class="nav-text">automatically allow writes again.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-33"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#However-if-you-have-setup-your-proper-monitoring-of-the-Redis-server"><span class="nav-text">However if you have setup your proper monitoring of the Redis server</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-persistence-you-may-want-to-disable-this-feature-so-that-Redis-will"><span class="nav-text">and persistence, you may want to disable this feature so that Redis will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#continue-to-work-as-usual-even-if-there-are-problems-with-disk"><span class="nav-text">continue to work as usual even if there are problems with disk,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#permissions-and-so-forth"><span class="nav-text">permissions, and so forth.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Compress-string-objects-using-LZF-when-dump-rdb-databases"><span class="nav-text">Compress string objects using LZF when dump .rdb databases?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#For-default-that’s-set-to’yes’as-it’s-almost-always-a-win"><span class="nav-text">For default that’s set to’yes’as it’s almost always a win.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-want-to-save-some-CPU-in-the-saving-child-set-it-to-‘no’-but"><span class="nav-text">If you want to save some CPU in the saving child set it to ‘no’ but</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-dataset-will-likely-be-bigger-if-you-have-compressible-values-or-keys"><span class="nav-text">the dataset will likely be bigger if you have compressible values or keys.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Since-version-5-of-RDB-a-CRC64-checksum-is-placed-at-the-end-of-the-file"><span class="nav-text">Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-makes-the-format-more-resistant-to-corruption-but-there-is-a-performance"><span class="nav-text">This makes the format more resistant to corruption but there is a performance</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hit-to-pay-around-10-when-saving-and-loading-RDB-files-so-you-can-disable-it"><span class="nav-text">hit to pay (around 10%) when saving and loading RDB files, so you can disable it</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-maximum-performances"><span class="nav-text">for maximum performances.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-34"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDB-files-created-with-checksum-disabled-have-a-checksum-of-zero-that-will"><span class="nav-text">RDB files created with checksum disabled have a checksum of zero that will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tell-the-loading-code-to-skip-the-check"><span class="nav-text">tell the loading code to skip the check.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-filename-where-to-dump-the-DB"><span class="nav-text">The filename where to dump the DB</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-working-directory"><span class="nav-text">The working directory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-35"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-DB-will-be-written-inside-this-directory-with-the-filename-specified"><span class="nav-text">The DB will be written inside this directory, with the filename specified</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#above-using-the-‘dbfilename’-configuration-directive"><span class="nav-text">above using the ‘dbfilename’ configuration directive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-36"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Append-Only-File-will-also-be-created-inside-this-directory"><span class="nav-text">The Append Only File will also be created inside this directory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-37"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-you-must-specify-a-directory-here-not-a-file-name"><span class="nav-text">Note that you must specify a directory here, not a file name.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Master-Slave-replication-Use-slaveof-to-make-a-Redis-instance-a-copy-of"><span class="nav-text">Master-Slave replication. Use slaveof to make a Redis instance a copy of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#another-Redis-server-A-few-things-to-understand-ASAP-about-Redis-replication"><span class="nav-text">another Redis server. A few things to understand ASAP about Redis replication.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-38"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Redis-replication-is-asynchronous-but-you-can-configure-a-master-to"><span class="nav-text">1) Redis replication is asynchronous, but you can configure a master to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#stop-accepting-writes-if-it-appears-to-be-not-connected-with-at-least"><span class="nav-text">stop accepting writes if it appears to be not connected with at least</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-given-number-of-slaves"><span class="nav-text">a given number of slaves.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Redis-slaves-are-able-to-perform-a-partial-resynchronization-with-the"><span class="nav-text">2) Redis slaves are able to perform a partial resynchronization with the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#master-if-the-replication-link-is-lost-for-a-relatively-small-amount-of"><span class="nav-text">master if the replication link is lost for a relatively small amount of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#time-You-may-want-to-configure-the-replication-backlog-size-see-the-next"><span class="nav-text">time. You may want to configure the replication backlog size (see the next</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sections-of-this-file-with-a-sensible-value-depending-on-your-needs"><span class="nav-text">sections of this file) with a sensible value depending on your needs.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Replication-is-automatic-and-does-not-need-user-intervention-After-a"><span class="nav-text">3) Replication is automatic and does not need user intervention. After a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#network-partition-slaves-automatically-try-to-reconnect-to-masters"><span class="nav-text">network partition slaves automatically try to reconnect to masters</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-resynchronize-with-them"><span class="nav-text">and resynchronize with them.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-39"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slaveof"><span class="nav-text">slaveof  </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-the-master-is-password-protected-using-the-“requirepass”-configuration"><span class="nav-text">If the master is password protected (using the “requirepass” configuration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#directive-below-it-is-possible-to-tell-the-slave-to-authenticate-before"><span class="nav-text">directive below) it is possible to tell the slave to authenticate before</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#starting-the-replication-synchronization-process-otherwise-the-master-will"><span class="nav-text">starting the replication synchronization process, otherwise the master will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#refuse-the-slave-request"><span class="nav-text">refuse the slave request.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-40"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#masterauth"><span class="nav-text">masterauth </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-a-slave-loses-its-connection-with-the-master-or-when-the-replication"><span class="nav-text">When a slave loses its connection with the master, or when the replication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-still-in-progress-the-slave-can-act-in-two-different-ways"><span class="nav-text">is still in progress, the slave can act in two different ways:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-41"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-if-slave-serve-stale-data-is-set-to-‘yes’-the-default-the-slave-will"><span class="nav-text">1) if slave-serve-stale-data is set to ‘yes’ (the default) the slave will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#still-reply-to-client-requests-possibly-with-out-of-date-data-or-the"><span class="nav-text">still reply to client requests, possibly with out of date data, or the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-set-may-just-be-empty-if-this-is-the-first-synchronization"><span class="nav-text">data set may just be empty if this is the first synchronization.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-42"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-if-slave-serve-stale-data-is-set-to-‘no’-the-slave-will-reply-with"><span class="nav-text">2) if slave-serve-stale-data is set to ‘no’ the slave will reply with</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#an-error-“SYNC-with-master-in-progress”-to-all-the-kind-of-commands"><span class="nav-text">an error “SYNC with master in progress” to all the kind of commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-to-INFO-and-SLAVEOF"><span class="nav-text">but to INFO and SLAVEOF.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-43"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#You-can-configure-a-slave-instance-to-accept-writes-or-not-Writing-against"><span class="nav-text">You can configure a slave instance to accept writes or not. Writing against</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-slave-instance-may-be-useful-to-store-some-ephemeral-data-because-data"><span class="nav-text">a slave instance may be useful to store some ephemeral data (because data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#written-on-a-slave-will-be-easily-deleted-after-resync-with-the-master-but"><span class="nav-text">written on a slave will be easily deleted after resync with the master) but</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#may-also-cause-problems-if-clients-are-writing-to-it-because-of-a"><span class="nav-text">may also cause problems if clients are writing to it because of a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#misconfiguration"><span class="nav-text">misconfiguration.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-44"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Since-Redis-2-6-by-default-slaves-are-read-only"><span class="nav-text">Since Redis 2.6 by default slaves are read-only.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-45"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-read-only-slaves-are-not-designed-to-be-exposed-to-untrusted-clients"><span class="nav-text">Note: read only slaves are not designed to be exposed to untrusted clients</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#on-the-internet-It’s-just-a-protection-layer-against-misuse-of-the-instance"><span class="nav-text">on the internet. It’s just a protection layer against misuse of the instance.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Still-a-read-only-slave-exports-by-default-all-the-administrative-commands"><span class="nav-text">Still a read only slave exports by default all the administrative commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#such-as-CONFIG-DEBUG-and-so-forth-To-a-limited-extent-you-can-improve"><span class="nav-text">such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#security-of-read-only-slaves-using-‘rename-command’-to-shadow-all-the"><span class="nav-text">security of read only slaves using ‘rename-command’ to shadow all the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#administrative-dangerous-commands"><span class="nav-text">administrative / dangerous commands.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Replication-SYNC-strategy-disk-or-socket"><span class="nav-text">Replication SYNC strategy: disk or socket.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-46"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#——————————————————"><span class="nav-text">——————————————————-</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-DISKLESS-REPLICATION-IS-EXPERIMENTAL-CURRENTLY"><span class="nav-text">WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#——————————————————-1"><span class="nav-text">——————————————————-</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-47"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#New-slaves-and-reconnecting-slaves-that-are-not-able-to-continue-the-replication"><span class="nav-text">New slaves and reconnecting slaves that are not able to continue the replication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#process-just-receiving-differences-need-to-do-what-is-called-a-“full"><span class="nav-text">process just receiving differences, need to do what is called a “full</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#synchronization”-An-RDB-file-is-transmitted-from-the-master-to-the-slaves"><span class="nav-text">synchronization”. An RDB file is transmitted from the master to the slaves.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-transmission-can-happen-in-two-different-ways"><span class="nav-text">The transmission can happen in two different ways:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-48"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Disk-backed-The-Redis-master-creates-a-new-process-that-writes-the-RDB"><span class="nav-text">1) Disk-backed: The Redis master creates a new process that writes the RDB</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#file-on-disk-Later-the-file-is-transferred-by-the-parent"><span class="nav-text">file on disk. Later the file is transferred by the parent</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#process-to-the-slaves-incrementally"><span class="nav-text">process to the slaves incrementally.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Diskless-The-Redis-master-creates-a-new-process-that-directly-writes-the"><span class="nav-text">2) Diskless: The Redis master creates a new process that directly writes the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RDB-file-to-slave-sockets-without-touching-the-disk-at-all"><span class="nav-text">RDB file to slave sockets, without touching the disk at all.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-49"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#With-disk-backed-replication-while-the-RDB-file-is-generated-more-slaves"><span class="nav-text">With disk-backed replication, while the RDB file is generated, more slaves</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#can-be-queued-and-served-with-the-RDB-file-as-soon-as-the-current-child-producing"><span class="nav-text">can be queued and served with the RDB file as soon as the current child producing</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-RDB-file-finishes-its-work-With-diskless-replication-instead-once"><span class="nav-text">the RDB file finishes its work. With diskless replication instead once</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-transfer-starts-new-slaves-arriving-will-be-queued-and-a-new-transfer"><span class="nav-text">the transfer starts, new slaves arriving will be queued and a new transfer</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-start-when-the-current-one-terminates"><span class="nav-text">will start when the current one terminates.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-50"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-diskless-replication-is-used-the-master-waits-a-configurable-amount-of"><span class="nav-text">When diskless replication is used, the master waits a configurable amount of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#time-in-seconds-before-starting-the-transfer-in-the-hope-that-multiple-slaves"><span class="nav-text">time (in seconds) before starting the transfer in the hope that multiple slaves</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-arrive-and-the-transfer-can-be-parallelized"><span class="nav-text">will arrive and the transfer can be parallelized.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-51"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#With-slow-disks-and-fast-large-bandwidth-networks-diskless-replication"><span class="nav-text">With slow disks and fast (large bandwidth) networks, diskless replication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#works-better"><span class="nav-text">works better.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-diskless-replication-is-enabled-it-is-possible-to-configure-the-delay"><span class="nav-text">When diskless replication is enabled, it is possible to configure the delay</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-server-waits-in-order-to-spawn-the-child-that-transfers-the-RDB-via-socket"><span class="nav-text">the server waits in order to spawn the child that transfers the RDB via socket</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-the-slaves"><span class="nav-text">to the slaves.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-52"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-is-important-since-once-the-transfer-starts-it-is-not-possible-to-serve"><span class="nav-text">This is important since once the transfer starts, it is not possible to serve</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#new-slaves-arriving-that-will-be-queued-for-the-next-RDB-transfer-so-the-server"><span class="nav-text">new slaves arriving, that will be queued for the next RDB transfer, so the server</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#waits-a-delay-in-order-to-let-more-slaves-arrive"><span class="nav-text">waits a delay in order to let more slaves arrive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-53"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-delay-is-specified-in-seconds-and-by-default-is-5-seconds-To-disable"><span class="nav-text">The delay is specified in seconds, and by default is 5 seconds. To disable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#it-entirely-just-set-it-to-0-seconds-and-the-transfer-will-start-ASAP"><span class="nav-text">it entirely just set it to 0 seconds and the transfer will start ASAP.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Slaves-send-PINGs-to-server-in-a-predefined-interval-It’s-possible-to-change"><span class="nav-text">Slaves send PINGs to server in a predefined interval. It’s possible to change</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-interval-with-the-repl-ping-slave-period-option-The-default-value-is-10"><span class="nav-text">this interval with the repl_ping_slave_period option. The default value is 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#seconds"><span class="nav-text">seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-54"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-ping-slave-period-10"><span class="nav-text">repl-ping-slave-period 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-option-sets-the-replication-timeout-for"><span class="nav-text">The following option sets the replication timeout for:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-55"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Bulk-transfer-I-O-during-SYNC-from-the-point-of-view-of-slave"><span class="nav-text">1) Bulk transfer I/O during SYNC, from the point of view of slave.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Master-timeout-from-the-point-of-view-of-slaves-data-pings"><span class="nav-text">2) Master timeout from the point of view of slaves (data, pings).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Slave-timeout-from-the-point-of-view-of-masters-REPLCONF-ACK-pings"><span class="nav-text">3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-56"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-important-to-make-sure-that-this-value-is-greater-than-the-value"><span class="nav-text">It is important to make sure that this value is greater than the value</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#specified-for-repl-ping-slave-period-otherwise-a-timeout-will-be-detected"><span class="nav-text">specified for repl-ping-slave-period otherwise a timeout will be detected</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#every-time-there-is-low-traffic-between-the-master-and-the-slave"><span class="nav-text">every time there is low traffic between the master and the slave.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-57"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-timeout-60"><span class="nav-text">repl-timeout 60</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Disable-TCP-NODELAY-on-the-slave-socket-after-SYNC"><span class="nav-text">Disable TCP_NODELAY on the slave socket after SYNC?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-58"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-select-“yes”-Redis-will-use-a-smaller-number-of-TCP-packets-and"><span class="nav-text">If you select “yes” Redis will use a smaller number of TCP packets and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#less-bandwidth-to-send-data-to-slaves-But-this-can-add-a-delay-for"><span class="nav-text">less bandwidth to send data to slaves. But this can add a delay for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-data-to-appear-on-the-slave-side-up-to-40-milliseconds-with"><span class="nav-text">the data to appear on the slave side, up to 40 milliseconds with</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux-kernels-using-a-default-configuration"><span class="nav-text">Linux kernels using a default configuration.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-59"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-select-“no”-the-delay-for-data-to-appear-on-the-slave-side-will"><span class="nav-text">If you select “no” the delay for data to appear on the slave side will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#be-reduced-but-more-bandwidth-will-be-used-for-replication"><span class="nav-text">be reduced but more bandwidth will be used for replication.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-60"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-we-optimize-for-low-latency-but-in-very-high-traffic-conditions"><span class="nav-text">By default we optimize for low latency, but in very high traffic conditions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#or-when-the-master-and-slaves-are-many-hops-away-turning-this-to-“yes”-may"><span class="nav-text">or when the master and slaves are many hops away, turning this to “yes” may</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#be-a-good-idea"><span class="nav-text">be a good idea.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Set-the-replication-backlog-size-The-backlog-is-a-buffer-that-accumulates"><span class="nav-text">Set the replication backlog size. The backlog is a buffer that accumulates</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slave-data-when-slaves-are-disconnected-for-some-time-so-that-when-a-slave"><span class="nav-text">slave data when slaves are disconnected for some time, so that when a slave</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wants-to-reconnect-again-often-a-full-resync-is-not-needed-but-a-partial"><span class="nav-text">wants to reconnect again, often a full resync is not needed, but a partial</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#resync-is-enough-just-passing-the-portion-of-data-the-slave-missed-while"><span class="nav-text">resync is enough, just passing the portion of data the slave missed while</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#disconnected"><span class="nav-text">disconnected.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-61"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-bigger-the-replication-backlog-the-longer-the-time-the-slave-can-be"><span class="nav-text">The bigger the replication backlog, the longer the time the slave can be</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#disconnected-and-later-be-able-to-perform-a-partial-resynchronization"><span class="nav-text">disconnected and later be able to perform a partial resynchronization.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-62"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-backlog-is-only-allocated-once-there-is-at-least-a-slave-connected"><span class="nav-text">The backlog is only allocated once there is at least a slave connected.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-63"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-backlog-size-1mb"><span class="nav-text">repl-backlog-size 1mb</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#After-a-master-has-no-longer-connected-slaves-for-some-time-the-backlog"><span class="nav-text">After a master has no longer connected slaves for some time, the backlog</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-be-freed-The-following-option-configures-the-amount-of-seconds-that"><span class="nav-text">will be freed. The following option configures the amount of seconds that</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#need-to-elapse-starting-from-the-time-the-last-slave-disconnected-for"><span class="nav-text">need to elapse, starting from the time the last slave disconnected, for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-backlog-buffer-to-be-freed"><span class="nav-text">the backlog buffer to be freed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-64"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-value-of-0-means-to-never-release-the-backlog"><span class="nav-text">A value of 0 means to never release the backlog.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-65"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#repl-backlog-ttl-3600"><span class="nav-text">repl-backlog-ttl 3600</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-slave-priority-is-an-integer-number-published-by-Redis-in-the-INFO-output"><span class="nav-text">The slave priority is an integer number published by Redis in the INFO output.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-used-by-Redis-Sentinel-in-order-to-select-a-slave-to-promote-into-a"><span class="nav-text">It is used by Redis Sentinel in order to select a slave to promote into a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#master-if-the-master-is-no-longer-working-correctly"><span class="nav-text">master if the master is no longer working correctly.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-66"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-slave-with-a-low-priority-number-is-considered-better-for-promotion-so"><span class="nav-text">A slave with a low priority number is considered better for promotion, so</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-instance-if-there-are-three-slaves-with-priority-10-100-25-Sentinel-will"><span class="nav-text">for instance if there are three slaves with priority 10, 100, 25 Sentinel will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pick-the-one-with-priority-10-that-is-the-lowest"><span class="nav-text">pick the one with priority 10, that is the lowest.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-67"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#However-a-special-priority-of-0-marks-the-slave-as-not-able-to-perform-the"><span class="nav-text">However a special priority of 0 marks the slave as not able to perform the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#role-of-master-so-a-slave-with-priority-of-0-will-never-be-selected-by"><span class="nav-text">role of master, so a slave with priority of 0 will never be selected by</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-Sentinel-for-promotion"><span class="nav-text">Redis Sentinel for promotion.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-68"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-the-priority-is-100"><span class="nav-text">By default the priority is 100.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-possible-for-a-master-to-stop-accepting-writes-if-there-are-less-than"><span class="nav-text">It is possible for a master to stop accepting writes if there are less than</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#N-slaves-connected-having-a-lag-less-or-equal-than-M-seconds"><span class="nav-text">N slaves connected, having a lag less or equal than M seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-69"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-N-slaves-need-to-be-in-“online”-state"><span class="nav-text">The N slaves need to be in “online” state.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-70"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-lag-in-seconds-that-must-be-lt-the-specified-value-is-calculated-from"><span class="nav-text">The lag in seconds, that must be &lt;= the specified value, is calculated from</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-last-ping-received-from-the-slave-that-is-usually-sent-every-second"><span class="nav-text">the last ping received from the slave, that is usually sent every second.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-71"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-option-does-not-GUARANTEE-that-N-replicas-will-accept-the-write-but"><span class="nav-text">This option does not GUARANTEE that N replicas will accept the write, but</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-limit-the-window-of-exposure-for-lost-writes-in-case-not-enough-slaves"><span class="nav-text">will limit the window of exposure for lost writes in case not enough slaves</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-available-to-the-specified-number-of-seconds"><span class="nav-text">are available, to the specified number of seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-72"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#For-example-to-require-at-least-3-slaves-with-a-lag-lt-10-seconds-use"><span class="nav-text">For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-73"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#min-slaves-to-write-3"><span class="nav-text">min-slaves-to-write 3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#min-slaves-max-lag-10"><span class="nav-text">min-slaves-max-lag 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-74"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Setting-one-or-the-other-to-0-disables-the-feature"><span class="nav-text">Setting one or the other to 0 disables the feature.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-75"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-min-slaves-to-write-is-set-to-0-feature-disabled-and"><span class="nav-text">By default min-slaves-to-write is set to 0 (feature disabled) and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#min-slaves-max-lag-is-set-to-10"><span class="nav-text">min-slaves-max-lag is set to 10.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-Redis-master-is-able-to-list-the-address-and-port-of-the-attached"><span class="nav-text">A Redis master is able to list the address and port of the attached</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slaves-in-different-ways-For-example-the-“INFO-replication”-section"><span class="nav-text">slaves in different ways. For example the “INFO replication” section</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#offers-this-information-which-is-used-among-other-tools-by"><span class="nav-text">offers this information, which is used, among other tools, by</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-Sentinel-in-order-to-discover-slave-instances"><span class="nav-text">Redis Sentinel in order to discover slave instances.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Another-place-where-this-info-is-available-is-in-the-output-of-the"><span class="nav-text">Another place where this info is available is in the output of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“ROLE”-command-of-a-masteer"><span class="nav-text">“ROLE” command of a masteer.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-76"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-listed-IP-and-address-normally-reported-by-a-slave-is-obtained"><span class="nav-text">The listed IP and address normally reported by a slave is obtained</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-the-following-way"><span class="nav-text">in the following way:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-77"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IP-The-address-is-auto-detected-by-checking-the-peer-address"><span class="nav-text">IP: The address is auto detected by checking the peer address</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-the-socket-used-by-the-slave-to-connect-with-the-master"><span class="nav-text">of the socket used by the slave to connect with the master.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-78"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Port-The-port-is-communicated-by-the-slave-during-the-replication"><span class="nav-text">Port: The port is communicated by the slave during the replication</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#handshake-and-is-normally-the-port-that-the-slave-is-using-to"><span class="nav-text">handshake, and is normally the port that the slave is using to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#list-for-connections"><span class="nav-text">list for connections.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-79"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#However-when-port-forwarding-or-Network-Address-Translation-NAT-is"><span class="nav-text">However when port forwarding or Network Address Translation (NAT) is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#used-the-slave-may-be-actually-reachable-via-different-IP-and-port"><span class="nav-text">used, the slave may be actually reachable via different IP and port</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pairs-The-following-two-options-can-be-used-by-a-slave-in-order-to"><span class="nav-text">pairs. The following two options can be used by a slave in order to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#report-to-its-master-a-specific-set-of-IP-and-port-so-that-both-INFO"><span class="nav-text">report to its master a specific set of IP and port, so that both INFO</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-ROLE-will-report-those-values"><span class="nav-text">and ROLE will report those values.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-80"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#There-is-no-need-to-use-both-the-options-if-you-need-to-override-just"><span class="nav-text">There is no need to use both the options if you need to override just</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-port-or-the-IP-address"><span class="nav-text">the port or the IP address.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-81"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slave-announce-ip-5-5-5-5"><span class="nav-text">slave-announce-ip 5.5.5.5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slave-announce-port-1234"><span class="nav-text">slave-announce-port 1234</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Require-clients-to-issue-AUTH-before-processing-any-other"><span class="nav-text">Require clients to issue AUTH  before processing any other</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#commands-This-might-be-useful-in-environments-in-which-you-do-not-trust"><span class="nav-text">commands.  This might be useful in environments in which you do not trust</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#others-with-access-to-the-host-running-redis-server"><span class="nav-text">others with access to the host running redis-server.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-82"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-should-stay-commented-out-for-backward-compatibility-and-because-most"><span class="nav-text">This should stay commented out for backward compatibility and because most</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#people-do-not-need-auth-e-g-they-run-their-own-servers"><span class="nav-text">people do not need auth (e.g. they run their own servers).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-83"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Warning-since-Redis-is-pretty-fast-an-outside-user-can-try-up-to"><span class="nav-text">Warning: since Redis is pretty fast an outside user can try up to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#150k-passwords-per-second-against-a-good-box-This-means-that-you-should"><span class="nav-text">150k passwords per second against a good box. This means that you should</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-a-very-strong-password-otherwise-it-will-be-very-easy-to-break"><span class="nav-text">use a very strong password otherwise it will be very easy to break.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-84"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#requirepass-foobared"><span class="nav-text">requirepass foobared</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Command-renaming"><span class="nav-text">Command renaming.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-85"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-possible-to-change-the-name-of-dangerous-commands-in-a-shared"><span class="nav-text">It is possible to change the name of dangerous commands in a shared</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#environment-For-instance-the-CONFIG-command-may-be-renamed-into-something"><span class="nav-text">environment. For instance the CONFIG command may be renamed into something</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hard-to-guess-so-that-it-will-still-be-available-for-internal-use-tools"><span class="nav-text">hard to guess so that it will still be available for internal-use tools</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-not-available-for-general-clients"><span class="nav-text">but not available for general clients.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-86"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Example"><span class="nav-text">Example:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-87"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rename-command-CONFIG-b840fc02d524045429941cc15f59e41cb7be6c52"><span class="nav-text">rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-88"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-also-possible-to-completely-kill-a-command-by-renaming-it-into"><span class="nav-text">It is also possible to completely kill a command by renaming it into</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#an-empty-string"><span class="nav-text">an empty string:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-89"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rename-command-CONFIG-“”"><span class="nav-text">rename-command CONFIG “”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-90"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Please-note-that-changing-the-name-of-commands-that-are-logged-into-the"><span class="nav-text">Please note that changing the name of commands that are logged into the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AOF-file-or-transmitted-to-slaves-may-cause-problems"><span class="nav-text">AOF file or transmitted to slaves may cause problems.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Set-the-max-number-of-connected-clients-at-the-same-time-By-default"><span class="nav-text">Set the max number of connected clients at the same time. By default</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-limit-is-set-to-10000-clients-however-if-the-Redis-server-is-not"><span class="nav-text">this limit is set to 10000 clients, however if the Redis server is not</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#able-to-configure-the-process-file-limit-to-allow-for-the-specified-limit"><span class="nav-text">able to configure the process file limit to allow for the specified limit</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-max-number-of-allowed-clients-is-set-to-the-current-file-limit"><span class="nav-text">the max number of allowed clients is set to the current file limit</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#minus-32-as-Redis-reserves-a-few-file-descriptors-for-internal-uses"><span class="nav-text">minus 32 (as Redis reserves a few file descriptors for internal uses).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-91"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Once-the-limit-is-reached-Redis-will-close-all-the-new-connections-sending"><span class="nav-text">Once the limit is reached Redis will close all the new connections sending</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#an-error-‘max-number-of-clients-reached’"><span class="nav-text">an error ‘max number of clients reached’.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-92"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxclients-10000"><span class="nav-text">maxclients 10000</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Don’t-use-more-memory-than-the-specified-amount-of-bytes"><span class="nav-text">Don’t use more memory than the specified amount of bytes.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-the-memory-limit-is-reached-Redis-will-try-to-remove-keys"><span class="nav-text">When the memory limit is reached Redis will try to remove keys</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#according-to-the-eviction-policy-selected-see-maxmemory-policy"><span class="nav-text">according to the eviction policy selected (see maxmemory-policy).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-93"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-Redis-can’t-remove-keys-according-to-the-policy-or-if-the-policy-is"><span class="nav-text">If Redis can’t remove keys according to the policy, or if the policy is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#set-to-‘noeviction’-Redis-will-start-to-reply-with-errors-to-commands"><span class="nav-text">set to ‘noeviction’, Redis will start to reply with errors to commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-would-use-more-memory-like-SET-LPUSH-and-so-on-and-will-continue"><span class="nav-text">that would use more memory, like SET, LPUSH, and so on, and will continue</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-reply-to-read-only-commands-like-GET"><span class="nav-text">to reply to read-only commands like GET.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-94"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-option-is-usually-useful-when-using-Redis-as-an-LRU-cache-or-to-set"><span class="nav-text">This option is usually useful when using Redis as an LRU cache, or to set</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-hard-memory-limit-for-an-instance-using-the-‘noeviction’-policy"><span class="nav-text">a hard memory limit for an instance (using the ‘noeviction’ policy).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-95"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-If-you-have-slaves-attached-to-an-instance-with-maxmemory-on"><span class="nav-text">WARNING: If you have slaves attached to an instance with maxmemory on,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-size-of-the-output-buffers-needed-to-feed-the-slaves-are-subtracted"><span class="nav-text">the size of the output buffers needed to feed the slaves are subtracted</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#from-the-used-memory-count-so-that-network-problems-resyncs-will"><span class="nav-text">from the used memory count, so that network problems / resyncs will</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#not-trigger-a-loop-where-keys-are-evicted-and-in-turn-the-output"><span class="nav-text">not trigger a loop where keys are evicted, and in turn the output</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#buffer-of-slaves-is-full-with-DELs-of-keys-evicted-triggering-the-deletion"><span class="nav-text">buffer of slaves is full with DELs of keys evicted triggering the deletion</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-more-keys-and-so-forth-until-the-database-is-completely-emptied"><span class="nav-text">of more keys, and so forth until the database is completely emptied.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-96"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-short…-if-you-have-slaves-attached-it-is-suggested-that-you-set-a-lower"><span class="nav-text">In short… if you have slaves attached it is suggested that you set a lower</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#limit-for-maxmemory-so-that-there-is-some-free-RAM-on-the-system-for-slave"><span class="nav-text">limit for maxmemory so that there is some free RAM on the system for slave</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#output-buffers-but-this-is-not-needed-if-the-policy-is-‘noeviction’"><span class="nav-text">output buffers (but this is not needed if the policy is ‘noeviction’).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-97"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory"><span class="nav-text">maxmemory </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MAXMEMORY-POLICY-how-Redis-will-select-what-to-remove-when-maxmemory"><span class="nav-text">MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-reached-You-can-select-among-five-behaviors"><span class="nav-text">is reached. You can select among five behaviors:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-98"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-lru-gt-remove-the-key-with-an-expire-set-using-an-LRU-algorithm"><span class="nav-text">volatile-lru -&gt; remove the key with an expire set using an LRU algorithm</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#allkeys-lru-gt-remove-any-key-according-to-the-LRU-algorithm"><span class="nav-text">allkeys-lru -&gt; remove any key according to the LRU algorithm</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-random-gt-remove-a-random-key-with-an-expire-set"><span class="nav-text">volatile-random -&gt; remove a random key with an expire set</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#allkeys-random-gt-remove-a-random-key-any-key"><span class="nav-text">allkeys-random -&gt; remove a random key, any key</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#volatile-ttl-gt-remove-the-key-with-the-nearest-expire-time-minor-TTL"><span class="nav-text">volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#noeviction-gt-don’t-expire-at-all-just-return-an-error-on-write-operations"><span class="nav-text">noeviction -&gt; don’t expire at all, just return an error on write operations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-99"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-with-any-of-the-above-policies-Redis-will-return-an-error-on-write"><span class="nav-text">Note: with any of the above policies, Redis will return an error on write</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#operations-when-there-are-no-suitable-keys-for-eviction"><span class="nav-text">operations, when there are no suitable keys for eviction.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-100"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#At-the-date-of-writing-these-commands-are-set-setnx-setex-append"><span class="nav-text">At the date of writing these commands are: set setnx setex append</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#incr-decr-rpush-lpush-rpushx-lpushx-linsert-lset-rpoplpush-sadd"><span class="nav-text">incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sinter-sinterstore-sunion-sunionstore-sdiff-sdiffstore-zadd-zincrby"><span class="nav-text">sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zunionstore-zinterstore-hset-hsetnx-hmset-hincrby-incrby-decrby"><span class="nav-text">zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#getset-mset-msetnx-exec-sort"><span class="nav-text">getset mset msetnx exec sort</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-101"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-is"><span class="nav-text">The default is:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-102"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory-policy-noeviction"><span class="nav-text">maxmemory-policy noeviction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LRU-and-minimal-TTL-algorithms-are-not-precise-algorithms-but-approximated"><span class="nav-text">LRU and minimal TTL algorithms are not precise algorithms but approximated</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#algorithms-in-order-to-save-memory-so-you-can-tune-it-for-speed-or"><span class="nav-text">algorithms (in order to save memory), so you can tune it for speed or</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#accuracy-For-default-Redis-will-check-five-keys-and-pick-the-one-that-was"><span class="nav-text">accuracy. For default Redis will check five keys and pick the one that was</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#used-less-recently-you-can-change-the-sample-size-using-the-following"><span class="nav-text">used less recently, you can change the sample size using the following</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#configuration-directive"><span class="nav-text">configuration directive.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-103"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-of-5-produces-good-enough-results-10-Approximates-very-closely"><span class="nav-text">The default of 5 produces good enough results. 10 Approximates very closely</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#true-LRU-but-costs-a-bit-more-CPU-3-is-very-fast-but-not-very-accurate"><span class="nav-text">true LRU but costs a bit more CPU. 3 is very fast but not very accurate.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-104"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#maxmemory-samples-5"><span class="nav-text">maxmemory-samples 5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-Redis-asynchronously-dumps-the-dataset-on-disk-This-mode-is"><span class="nav-text">By default Redis asynchronously dumps the dataset on disk. This mode is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#good-enough-in-many-applications-but-an-issue-with-the-Redis-process-or"><span class="nav-text">good enough in many applications, but an issue with the Redis process or</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-power-outage-may-result-into-a-few-minutes-of-writes-lost-depending-on"><span class="nav-text">a power outage may result into a few minutes of writes lost (depending on</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-configured-save-points"><span class="nav-text">the configured save points).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-105"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Append-Only-File-is-an-alternative-persistence-mode-that-provides"><span class="nav-text">The Append Only File is an alternative persistence mode that provides</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#much-better-durability-For-instance-using-the-default-data-fsync-policy"><span class="nav-text">much better durability. For instance using the default data fsync policy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#see-later-in-the-config-file-Redis-can-lose-just-one-second-of-writes-in-a"><span class="nav-text">(see later in the config file) Redis can lose just one second of writes in a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dramatic-event-like-a-server-power-outage-or-a-single-write-if-something"><span class="nav-text">dramatic event like a server power outage, or a single write if something</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wrong-with-the-Redis-process-itself-happens-but-the-operating-system-is"><span class="nav-text">wrong with the Redis process itself happens, but the operating system is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#still-running-correctly"><span class="nav-text">still running correctly.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-106"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#AOF-and-RDB-persistence-can-be-enabled-at-the-same-time-without-problems"><span class="nav-text">AOF and RDB persistence can be enabled at the same time without problems.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-the-AOF-is-enabled-on-startup-Redis-will-load-the-AOF-that-is-the-file"><span class="nav-text">If the AOF is enabled on startup Redis will load the AOF, that is the file</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#with-the-better-durability-guarantees"><span class="nav-text">with the better durability guarantees.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-107"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Please-check-http-redis-io-topics-persistence-for-more-information"><span class="nav-text">Please check http://redis.io/topics/persistence for more information.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-name-of-the-append-only-file-default-“appendonly-aof”"><span class="nav-text">The name of the append only file (default: “appendonly.aof”)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-fsync-call-tells-the-Operating-System-to-actually-write-data-on-disk"><span class="nav-text">The fsync() call tells the Operating System to actually write data on disk</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#instead-of-waiting-for-more-data-in-the-output-buffer-Some-OS-will-really-flush"><span class="nav-text">instead of waiting for more data in the output buffer. Some OS will really flush</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-on-disk-some-other-OS-will-just-try-to-do-it-ASAP"><span class="nav-text">data on disk, some other OS will just try to do it ASAP.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-108"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-supports-three-different-modes"><span class="nav-text">Redis supports three different modes:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-109"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#no-don’t-fsync-just-let-the-OS-flush-the-data-when-it-wants-Faster"><span class="nav-text">no: don’t fsync, just let the OS flush the data when it wants. Faster.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#always-fsync-after-every-write-to-the-append-only-log-Slow-Safest"><span class="nav-text">always: fsync after every write to the append only log. Slow, Safest.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#everysec-fsync-only-one-time-every-second-Compromise"><span class="nav-text">everysec: fsync only one time every second. Compromise.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-110"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-is-“everysec”-as-that’s-usually-the-right-compromise-between"><span class="nav-text">The default is “everysec”, as that’s usually the right compromise between</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#speed-and-data-safety-It’s-up-to-you-to-understand-if-you-can-relax-this-to"><span class="nav-text">speed and data safety. It’s up to you to understand if you can relax this to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“no”-that-will-let-the-operating-system-flush-the-output-buffer-when"><span class="nav-text">“no” that will let the operating system flush the output buffer when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#it-wants-for-better-performances-but-if-you-can-live-with-the-idea-of"><span class="nav-text">it wants, for better performances (but if you can live with the idea of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#some-data-loss-consider-the-default-persistence-mode-that’s-snapshotting"><span class="nav-text">some data loss consider the default persistence mode that’s snapshotting),</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#or-on-the-contrary-use-“always”-that’s-very-slow-but-a-bit-safer-than"><span class="nav-text">or on the contrary, use “always” that’s very slow but a bit safer than</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#everysec"><span class="nav-text">everysec.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-111"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#More-details-please-check-the-following-article"><span class="nav-text">More details please check the following article:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#http-antirez-com-post-redis-persistence-demystified-html"><span class="nav-text">http://antirez.com/post/redis-persistence-demystified.html</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-112"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-unsure-use-“everysec”"><span class="nav-text">If unsure, use “everysec”.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#appendfsync-always"><span class="nav-text">appendfsync always</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#appendfsync-no"><span class="nav-text">appendfsync no</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-the-AOF-fsync-policy-is-set-to-always-or-everysec-and-a-background"><span class="nav-text">When the AOF fsync policy is set to always or everysec, and a background</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#saving-process-a-background-save-or-AOF-log-background-rewriting-is"><span class="nav-text">saving process (a background save or AOF log background rewriting) is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#performing-a-lot-of-I-O-against-the-disk-in-some-Linux-configurations"><span class="nav-text">performing a lot of I/O against the disk, in some Linux configurations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-may-block-too-long-on-the-fsync-call-Note-that-there-is-no-fix-for"><span class="nav-text">Redis may block too long on the fsync() call. Note that there is no fix for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-currently-as-even-performing-fsync-in-a-different-thread-will-block"><span class="nav-text">this currently, as even performing fsync in a different thread will block</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#our-synchronous-write-2-call"><span class="nav-text">our synchronous write(2) call.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-113"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-order-to-mitigate-this-problem-it’s-possible-to-use-the-following-option"><span class="nav-text">In order to mitigate this problem it’s possible to use the following option</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-will-prevent-fsync-from-being-called-in-the-main-process-while-a"><span class="nav-text">that will prevent fsync() from being called in the main process while a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGSAVE-or-BGREWRITEAOF-is-in-progress"><span class="nav-text">BGSAVE or BGREWRITEAOF is in progress.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-114"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-means-that-while-another-child-is-saving-the-durability-of-Redis-is"><span class="nav-text">This means that while another child is saving, the durability of Redis is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-same-as-“appendfsync-none”-In-practical-terms-this-means-that-it-is"><span class="nav-text">the same as “appendfsync none”. In practical terms, this means that it is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#possible-to-lose-up-to-30-seconds-of-log-in-the-worst-scenario-with-the"><span class="nav-text">possible to lose up to 30 seconds of log in the worst scenario (with the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#default-Linux-settings"><span class="nav-text">default Linux settings).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-115"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-you-have-latency-problems-turn-this-to-“yes”-Otherwise-leave-it-as"><span class="nav-text">If you have latency problems turn this to “yes”. Otherwise leave it as</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“no”-that-is-the-safest-pick-from-the-point-of-view-of-durability"><span class="nav-text">“no” that is the safest pick from the point of view of durability.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Automatic-rewrite-of-the-append-only-file"><span class="nav-text">Automatic rewrite of the append only file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-is-able-to-automatically-rewrite-the-log-file-implicitly-calling"><span class="nav-text">Redis is able to automatically rewrite the log file implicitly calling</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGREWRITEAOF-when-the-AOF-log-size-grows-by-the-specified-percentage"><span class="nav-text">BGREWRITEAOF when the AOF log size grows by the specified percentage.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-116"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-is-how-it-works-Redis-remembers-the-size-of-the-AOF-file-after-the"><span class="nav-text">This is how it works: Redis remembers the size of the AOF file after the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#latest-rewrite-if-no-rewrite-has-happened-since-the-restart-the-size-of"><span class="nav-text">latest rewrite (if no rewrite has happened since the restart, the size of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-AOF-at-startup-is-used"><span class="nav-text">the AOF at startup is used).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-117"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-base-size-is-compared-to-the-current-size-If-the-current-size-is"><span class="nav-text">This base size is compared to the current size. If the current size is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bigger-than-the-specified-percentage-the-rewrite-is-triggered-Also"><span class="nav-text">bigger than the specified percentage, the rewrite is triggered. Also</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#you-need-to-specify-a-minimal-size-for-the-AOF-file-to-be-rewritten-this"><span class="nav-text">you need to specify a minimal size for the AOF file to be rewritten, this</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-useful-to-avoid-rewriting-the-AOF-file-even-if-the-percentage-increase"><span class="nav-text">is useful to avoid rewriting the AOF file even if the percentage increase</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-reached-but-it-is-still-pretty-small"><span class="nav-text">is reached but it is still pretty small.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-118"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Specify-a-percentage-of-zero-in-order-to-disable-the-automatic-AOF"><span class="nav-text">Specify a percentage of zero in order to disable the automatic AOF</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rewrite-feature"><span class="nav-text">rewrite feature.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#An-AOF-file-may-be-found-to-be-truncated-at-the-end-during-the-Redis"><span class="nav-text">An AOF file may be found to be truncated at the end during the Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#startup-process-when-the-AOF-data-gets-loaded-back-into-memory"><span class="nav-text">startup process, when the AOF data gets loaded back into memory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-may-happen-when-the-system-where-Redis-is-running"><span class="nav-text">This may happen when the system where Redis is running</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#crashes-especially-when-an-ext4-filesystem-is-mounted-without-the"><span class="nav-text">crashes, especially when an ext4 filesystem is mounted without the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-ordered-option-however-this-can’t-happen-when-Redis-itself"><span class="nav-text">data=ordered option (however this can’t happen when Redis itself</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#crashes-or-aborts-but-the-operating-system-still-works-correctly"><span class="nav-text">crashes or aborts but the operating system still works correctly).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-119"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-can-either-exit-with-an-error-when-this-happens-or-load-as-much"><span class="nav-text">Redis can either exit with an error when this happens, or load as much</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#data-as-possible-the-default-now-and-start-if-the-AOF-file-is-found"><span class="nav-text">data as possible (the default now) and start if the AOF file is found</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-be-truncated-at-the-end-The-following-option-controls-this-behavior"><span class="nav-text">to be truncated at the end. The following option controls this behavior.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-120"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-aof-load-truncated-is-set-to-yes-a-truncated-AOF-file-is-loaded-and"><span class="nav-text">If aof-load-truncated is set to yes, a truncated AOF file is loaded and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-Redis-server-starts-emitting-a-log-to-inform-the-user-of-the-event"><span class="nav-text">the Redis server starts emitting a log to inform the user of the event.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Otherwise-if-the-option-is-set-to-no-the-server-aborts-with-an-error"><span class="nav-text">Otherwise if the option is set to no, the server aborts with an error</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-refuses-to-start-When-the-option-is-set-to-no-the-user-requires"><span class="nav-text">and refuses to start. When the option is set to no, the user requires</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-fix-the-AOF-file-using-the-“redis-check-aof”-utility-before-to-restart"><span class="nav-text">to fix the AOF file using the “redis-check-aof” utility before to restart</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-server"><span class="nav-text">the server.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-121"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Note-that-if-the-AOF-file-will-be-found-to-be-corrupted-in-the-middle"><span class="nav-text">Note that if the AOF file will be found to be corrupted in the middle</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-server-will-still-exit-with-an-error-This-option-only-applies-when"><span class="nav-text">the server will still exit with an error. This option only applies when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-will-try-to-read-more-data-from-the-AOF-file-but-not-enough-bytes"><span class="nav-text">Redis will try to read more data from the AOF file but not enough bytes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-be-found"><span class="nav-text">will be found.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Max-execution-time-of-a-Lua-script-in-milliseconds"><span class="nav-text">Max execution time of a Lua script in milliseconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-122"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-the-maximum-execution-time-is-reached-Redis-will-log-that-a-script-is"><span class="nav-text">If the maximum execution time is reached Redis will log that a script is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#still-in-execution-after-the-maximum-allowed-time-and-will-start-to"><span class="nav-text">still in execution after the maximum allowed time and will start to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#reply-to-queries-with-an-error"><span class="nav-text">reply to queries with an error.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-123"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-a-long-running-script-exceeds-the-maximum-execution-time-only-the"><span class="nav-text">When a long running script exceeds the maximum execution time only the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SCRIPT-KILL-and-SHUTDOWN-NOSAVE-commands-are-available-The-first-can-be"><span class="nav-text">SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#used-to-stop-a-script-that-did-not-yet-called-write-commands-The-second"><span class="nav-text">used to stop a script that did not yet called write commands. The second</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-the-only-way-to-shut-down-the-server-in-the-case-a-write-command-was"><span class="nav-text">is the only way to shut down the server in the case a write command was</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#already-issued-by-the-script-but-the-user-doesn’t-want-to-wait-for-the-natural"><span class="nav-text">already issued by the script but the user doesn’t want to wait for the natural</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#termination-of-the-script"><span class="nav-text">termination of the script.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-124"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Set-it-to-0-or-a-negative-value-for-unlimited-execution-without-warnings"><span class="nav-text">Set it to 0 or a negative value for unlimited execution without warnings.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-125"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-126"><span class="nav-text">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WARNING-EXPERIMENTAL-Redis-Cluster-is-considered-to-be-stable-code-however"><span class="nav-text">WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-order-to-mark-it-as-“mature”-we-need-to-wait-for-a-non-trivial-percentage"><span class="nav-text">in order to mark it as “mature” we need to wait for a non trivial percentage</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-users-to-deploy-it-in-production"><span class="nav-text">of users to deploy it in production.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-127"><span class="nav-text">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-128"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Normal-Redis-instances-can’t-be-part-of-a-Redis-Cluster-only-nodes-that-are"><span class="nav-text">Normal Redis instances can’t be part of a Redis Cluster; only nodes that are</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#started-as-cluster-nodes-can-In-order-to-start-a-Redis-instance-as-a"><span class="nav-text">started as cluster nodes can. In order to start a Redis instance as a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-node-enable-the-cluster-support-uncommenting-the-following"><span class="nav-text">cluster node enable the cluster support uncommenting the following:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-129"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-enabled-yes"><span class="nav-text">cluster-enabled yes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Every-cluster-node-has-a-cluster-configuration-file-This-file-is-not"><span class="nav-text">Every cluster node has a cluster configuration file. This file is not</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#intended-to-be-edited-by-hand-It-is-created-and-updated-by-Redis-nodes"><span class="nav-text">intended to be edited by hand. It is created and updated by Redis nodes.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Every-Redis-Cluster-node-requires-a-different-cluster-configuration-file"><span class="nav-text">Every Redis Cluster node requires a different cluster configuration file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Make-sure-that-instances-running-in-the-same-system-do-not-have"><span class="nav-text">Make sure that instances running in the same system do not have</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#overlapping-cluster-configuration-file-names"><span class="nav-text">overlapping cluster configuration file names.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-130"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-config-file-nodes-6379-conf"><span class="nav-text">cluster-config-file nodes-6379.conf</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cluster-node-timeout-is-the-amount-of-milliseconds-a-node-must-be-unreachable"><span class="nav-text">Cluster node timeout is the amount of milliseconds a node must be unreachable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-it-to-be-considered-in-failure-state"><span class="nav-text">for it to be considered in failure state.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Most-other-internal-time-limits-are-multiple-of-the-node-timeout"><span class="nav-text">Most other internal time limits are multiple of the node timeout.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-131"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-node-timeout-15000"><span class="nav-text">cluster-node-timeout 15000</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-slave-of-a-failing-master-will-avoid-to-start-a-failover-if-its-data"><span class="nav-text">A slave of a failing master will avoid to start a failover if its data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#looks-too-old"><span class="nav-text">looks too old.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-132"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#There-is-no-simple-way-for-a-slave-to-actually-have-a-exact-measure-of"><span class="nav-text">There is no simple way for a slave to actually have a exact measure of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#its-“data-age”-so-the-following-two-checks-are-performed"><span class="nav-text">its “data age”, so the following two checks are performed:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-133"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-If-there-are-multiple-slaves-able-to-failover-they-exchange-messages"><span class="nav-text">1) If there are multiple slaves able to failover, they exchange messages</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-order-to-try-to-give-an-advantage-to-the-slave-with-the-best"><span class="nav-text">in order to try to give an advantage to the slave with the best</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#replication-offset-more-data-from-the-master-processed"><span class="nav-text">replication offset (more data from the master processed).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Slaves-will-try-to-get-their-rank-by-offset-and-apply-to-the-start"><span class="nav-text">Slaves will try to get their rank by offset, and apply to the start</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-the-failover-a-delay-proportional-to-their-rank"><span class="nav-text">of the failover a delay proportional to their rank.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-134"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Every-single-slave-computes-the-time-of-the-last-interaction-with"><span class="nav-text">2) Every single slave computes the time of the last interaction with</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#its-master-This-can-be-the-last-ping-or-command-received-if-the-master"><span class="nav-text">its master. This can be the last ping or command received (if the master</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-still-in-the-“connected”-state-or-the-time-that-elapsed-since-the"><span class="nav-text">is still in the “connected” state), or the time that elapsed since the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#disconnection-with-the-master-if-the-replication-link-is-currently-down"><span class="nav-text">disconnection with the master (if the replication link is currently down).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-the-last-interaction-is-too-old-the-slave-will-not-try-to-failover"><span class="nav-text">If the last interaction is too old, the slave will not try to failover</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#at-all"><span class="nav-text">at all.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-135"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-point-“2”-can-be-tuned-by-user-Specifically-a-slave-will-not-perform"><span class="nav-text">The point “2” can be tuned by user. Specifically a slave will not perform</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-failover-if-since-the-last-interaction-with-the-master-the-time"><span class="nav-text">the failover if, since the last interaction with the master, the time</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#elapsed-is-greater-than"><span class="nav-text">elapsed is greater than:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-136"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#node-timeout-slave-validity-factor-repl-ping-slave-period"><span class="nav-text">(node-timeout * slave-validity-factor) + repl-ping-slave-period</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-137"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#So-for-example-if-node-timeout-is-30-seconds-and-the-slave-validity-factor"><span class="nav-text">So for example if node-timeout is 30 seconds, and the slave-validity-factor</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-10-and-assuming-a-default-repl-ping-slave-period-of-10-seconds-the"><span class="nav-text">is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slave-will-not-try-to-failover-if-it-was-not-able-to-talk-with-the-master"><span class="nav-text">slave will not try to failover if it was not able to talk with the master</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#for-longer-than-310-seconds"><span class="nav-text">for longer than 310 seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-138"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-large-slave-validity-factor-may-allow-slaves-with-too-old-data-to-failover"><span class="nav-text">A large slave-validity-factor may allow slaves with too old data to failover</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-master-while-a-too-small-value-may-prevent-the-cluster-from-being-able-to"><span class="nav-text">a master, while a too small value may prevent the cluster from being able to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#elect-a-slave-at-all"><span class="nav-text">elect a slave at all.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-139"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#For-maximum-availability-it-is-possible-to-set-the-slave-validity-factor"><span class="nav-text">For maximum availability, it is possible to set the slave-validity-factor</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-a-value-of-0-which-means-that-slaves-will-always-try-to-failover-the"><span class="nav-text">to a value of 0, which means, that slaves will always try to failover the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#master-regardless-of-the-last-time-they-interacted-with-the-master"><span class="nav-text">master regardless of the last time they interacted with the master.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#However-they’ll-always-try-to-apply-a-delay-proportional-to-their"><span class="nav-text">(However they’ll always try to apply a delay proportional to their</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#offset-rank"><span class="nav-text">offset rank).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-140"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Zero-is-the-only-value-able-to-guarantee-that-when-all-the-partitions-heal"><span class="nav-text">Zero is the only value able to guarantee that when all the partitions heal</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-cluster-will-always-be-able-to-continue"><span class="nav-text">the cluster will always be able to continue.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-141"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-slave-validity-factor-10"><span class="nav-text">cluster-slave-validity-factor 10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cluster-slaves-are-able-to-migrate-to-orphaned-masters-that-are-masters"><span class="nav-text">Cluster slaves are able to migrate to orphaned masters, that are masters</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-are-left-without-working-slaves-This-improves-the-cluster-ability"><span class="nav-text">that are left without working slaves. This improves the cluster ability</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-resist-to-failures-as-otherwise-an-orphaned-master-can’t-be-failed-over"><span class="nav-text">to resist to failures as otherwise an orphaned master can’t be failed over</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-case-of-failure-if-it-has-no-working-slaves"><span class="nav-text">in case of failure if it has no working slaves.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-142"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Slaves-migrate-to-orphaned-masters-only-if-there-are-still-at-least-a"><span class="nav-text">Slaves migrate to orphaned masters only if there are still at least a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#given-number-of-other-working-slaves-for-their-old-master-This-number"><span class="nav-text">given number of other working slaves for their old master. This number</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-the-“migration-barrier”-A-migration-barrier-of-1-means-that-a-slave"><span class="nav-text">is the “migration barrier”. A migration barrier of 1 means that a slave</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#will-migrate-only-if-there-is-at-least-1-other-working-slave-for-its-master"><span class="nav-text">will migrate only if there is at least 1 other working slave for its master</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#and-so-forth-It-usually-reflects-the-number-of-slaves-you-want-for-every"><span class="nav-text">and so forth. It usually reflects the number of slaves you want for every</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#master-in-your-cluster"><span class="nav-text">master in your cluster.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-143"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Default-is-1-slaves-migrate-only-if-their-masters-remain-with-at-least"><span class="nav-text">Default is 1 (slaves migrate only if their masters remain with at least</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#one-slave-To-disable-migration-just-set-it-to-a-very-large-value"><span class="nav-text">one slave). To disable migration just set it to a very large value.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-value-of-0-can-be-set-but-is-useful-only-for-debugging-and-dangerous"><span class="nav-text">A value of 0 can be set but is useful only for debugging and dangerous</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-production"><span class="nav-text">in production.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-144"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-migration-barrier-1"><span class="nav-text">cluster-migration-barrier 1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-Redis-Cluster-nodes-stop-accepting-queries-if-they-detect-there"><span class="nav-text">By default Redis Cluster nodes stop accepting queries if they detect there</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#is-at-least-an-hash-slot-uncovered-no-available-node-is-serving-it"><span class="nav-text">is at least an hash slot uncovered (no available node is serving it).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-way-if-the-cluster-is-partially-down-for-example-a-range-of-hash-slots"><span class="nav-text">This way if the cluster is partially down (for example a range of hash slots</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-no-longer-covered-all-the-cluster-becomes-eventually-unavailable"><span class="nav-text">are no longer covered) all the cluster becomes, eventually, unavailable.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-automatically-returns-available-as-soon-as-all-the-slots-are-covered-again"><span class="nav-text">It automatically returns available as soon as all the slots are covered again.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-145"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#However-sometimes-you-want-the-subset-of-the-cluster-which-is-working"><span class="nav-text">However sometimes you want the subset of the cluster which is working,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-continue-to-accept-queries-for-the-part-of-the-key-space-that-is-still"><span class="nav-text">to continue to accept queries for the part of the key space that is still</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#covered-In-order-to-do-so-just-set-the-cluster-require-full-coverage"><span class="nav-text">covered. In order to do so, just set the cluster-require-full-coverage</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#option-to-no"><span class="nav-text">option to no.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-146"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cluster-require-full-coverage-yes"><span class="nav-text">cluster-require-full-coverage yes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#In-order-to-setup-your-cluster-make-sure-to-read-the-documentation"><span class="nav-text">In order to setup your cluster make sure to read the documentation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#available-at-http-redis-io-web-site"><span class="nav-text">available at http://redis.io web site.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Redis-Slow-Log-is-a-system-to-log-queries-that-exceeded-a-specified"><span class="nav-text">The Redis Slow Log is a system to log queries that exceeded a specified</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#execution-time-The-execution-time-does-not-include-the-I-O-operations"><span class="nav-text">execution time. The execution time does not include the I/O operations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#like-talking-with-the-client-sending-the-reply-and-so-forth"><span class="nav-text">like talking with the client, sending the reply and so forth,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-just-the-time-needed-to-actually-execute-the-command-this-is-the-only"><span class="nav-text">but just the time needed to actually execute the command (this is the only</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#stage-of-command-execution-where-the-thread-is-blocked-and-can-not-serve"><span class="nav-text">stage of command execution where the thread is blocked and can not serve</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#other-requests-in-the-meantime"><span class="nav-text">other requests in the meantime).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-147"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#You-can-configure-the-slow-log-with-two-parameters-one-tells-Redis"><span class="nav-text">You can configure the slow log with two parameters: one tells Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#what-is-the-execution-time-in-microseconds-to-exceed-in-order-for-the"><span class="nav-text">what is the execution time, in microseconds, to exceed in order for the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#command-to-get-logged-and-the-other-parameter-is-the-length-of-the"><span class="nav-text">command to get logged, and the other parameter is the length of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slow-log-When-a-new-command-is-logged-the-oldest-one-is-removed-from-the"><span class="nav-text">slow log. When a new command is logged the oldest one is removed from the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#queue-of-logged-commands"><span class="nav-text">queue of logged commands.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-time-is-expressed-in-microseconds-so-1000000-is-equivalent"><span class="nav-text">The following time is expressed in microseconds, so 1000000 is equivalent</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-one-second-Note-that-a-negative-number-disables-the-slow-log-while"><span class="nav-text">to one second. Note that a negative number disables the slow log, while</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-value-of-zero-forces-the-logging-of-every-command"><span class="nav-text">a value of zero forces the logging of every command.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#There-is-no-limit-to-this-length-Just-be-aware-that-it-will-consume-memory"><span class="nav-text">There is no limit to this length. Just be aware that it will consume memory.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#You-can-reclaim-memory-used-by-the-slow-log-with-SLOWLOG-RESET"><span class="nav-text">You can reclaim memory used by the slow log with SLOWLOG RESET.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-Redis-latency-monitoring-subsystem-samples-different-operations"><span class="nav-text">The Redis latency monitoring subsystem samples different operations</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#at-runtime-in-order-to-collect-data-related-to-possible-sources-of"><span class="nav-text">at runtime in order to collect data related to possible sources of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#latency-of-a-Redis-instance"><span class="nav-text">latency of a Redis instance.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-148"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Via-the-LATENCY-command-this-information-is-available-to-the-user-that-can"><span class="nav-text">Via the LATENCY command this information is available to the user that can</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#print-graphs-and-obtain-reports"><span class="nav-text">print graphs and obtain reports.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-149"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-system-only-logs-operations-that-were-performed-in-a-time-equal-or"><span class="nav-text">The system only logs operations that were performed in a time equal or</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#greater-than-the-amount-of-milliseconds-specified-via-the"><span class="nav-text">greater than the amount of milliseconds specified via the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#latency-monitor-threshold-configuration-directive-When-its-value-is-set"><span class="nav-text">latency-monitor-threshold configuration directive. When its value is set</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-zero-the-latency-monitor-is-turned-off"><span class="nav-text">to zero, the latency monitor is turned off.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-150"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-latency-monitoring-is-disabled-since-it-is-mostly-not-needed"><span class="nav-text">By default latency monitoring is disabled since it is mostly not needed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#if-you-don’t-have-latency-issues-and-collecting-data-has-a-performance"><span class="nav-text">if you don’t have latency issues, and collecting data has a performance</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#impact-that-while-very-small-can-be-measured-under-big-load-Latency"><span class="nav-text">impact, that while very small, can be measured under big load. Latency</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#monitoring-can-easily-be-enabled-at-runtime-using-the-command"><span class="nav-text">monitoring can easily be enabled at runtime using the command</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#“CONFIG-SET-latency-monitor-threshold-“-if-needed"><span class="nav-text">“CONFIG SET latency-monitor-threshold “ if needed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-can-notify-Pub-Sub-clients-about-events-happening-in-the-key-space"><span class="nav-text">Redis can notify Pub/Sub clients about events happening in the key space.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-feature-is-documented-at-http-redis-io-topics-notifications"><span class="nav-text">This feature is documented at http://redis.io/topics/notifications</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-151"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#For-instance-if-keyspace-events-notification-is-enabled-and-a-client"><span class="nav-text">For instance if keyspace events notification is enabled, and a client</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#performs-a-DEL-operation-on-key-“foo”-stored-in-the-Database-0-two"><span class="nav-text">performs a DEL operation on key “foo” stored in the Database 0, two</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#messages-will-be-published-via-Pub-Sub"><span class="nav-text">messages will be published via Pub/Sub:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-152"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PUBLISH-keyspace-0-foo-del"><span class="nav-text">PUBLISH keyspace@0:foo del</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PUBLISH-keyevent-0-del-foo"><span class="nav-text">PUBLISH keyevent@0:del foo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-153"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#It-is-possible-to-select-the-events-that-Redis-will-notify-among-a-set"><span class="nav-text">It is possible to select the events that Redis will notify among a set</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-classes-Every-class-is-identified-by-a-single-character"><span class="nav-text">of classes. Every class is identified by a single character:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-154"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#K-Keyspace-events-published-with-keyspace-prefix"><span class="nav-text">K     Keyspace events, published with keyspace@ prefix.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#E-Keyevent-events-published-with-keyevent-prefix"><span class="nav-text">E     Keyevent events, published with keyevent@ prefix.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#g-Generic-commands-non-type-specific-like-DEL-EXPIRE-RENAME-…"><span class="nav-text">g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, …</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#String-commands"><span class="nav-text">$     String commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#l-List-commands"><span class="nav-text">l     List commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#s-Set-commands"><span class="nav-text">s     Set commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#h-Hash-commands"><span class="nav-text">h     Hash commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#z-Sorted-set-commands"><span class="nav-text">z     Sorted set commands</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#x-Expired-events-events-generated-every-time-a-key-expires"><span class="nav-text">x     Expired events (events generated every time a key expires)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#e-Evicted-events-events-generated-when-a-key-is-evicted-for-maxmemory"><span class="nav-text">e     Evicted events (events generated when a key is evicted for maxmemory)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-Alias-for-g-lshzxe-so-that-the-“AKE”-string-means-all-the-events"><span class="nav-text">A     Alias for g$lshzxe, so that the “AKE” string means all the events.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-155"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-“notify-keyspace-events”-takes-as-argument-a-string-that-is-composed"><span class="nav-text">The “notify-keyspace-events” takes as argument a string that is composed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-zero-or-multiple-characters-The-empty-string-means-that-notifications"><span class="nav-text">of zero or multiple characters. The empty string means that notifications</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-disabled"><span class="nav-text">are disabled.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-156"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Example-to-enable-list-and-generic-events-from-the-point-of-view-of-the"><span class="nav-text">Example: to enable list and generic events, from the point of view of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#event-name-use"><span class="nav-text">event name, use:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-157"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#notify-keyspace-events-Elg"><span class="nav-text">notify-keyspace-events Elg</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-158"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Example-2-to-get-the-stream-of-the-expired-keys-subscribing-to-channel"><span class="nav-text">Example 2: to get the stream of the expired keys subscribing to channel</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#name-keyevent-0-expired-use"><span class="nav-text">name keyevent@0:expired use:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-159"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#notify-keyspace-events-Ex"><span class="nav-text">notify-keyspace-events Ex</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-160"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-all-notifications-are-disabled-because-most-users-don’t-need"><span class="nav-text">By default all notifications are disabled because most users don’t need</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-feature-and-the-feature-has-some-overhead-Note-that-if-you-don’t"><span class="nav-text">this feature and the feature has some overhead. Note that if you don’t</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#specify-at-least-one-of-K-or-E-no-events-will-be-delivered"><span class="nav-text">specify at least one of K or E, no events will be delivered.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hashes-are-encoded-using-a-memory-efficient-data-structure-when-they-have-a"><span class="nav-text">Hashes are encoded using a memory efficient data structure when they have a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#small-number-of-entries-and-the-biggest-entry-does-not-exceed-a-given"><span class="nav-text">small number of entries, and the biggest entry does not exceed a given</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#threshold-These-thresholds-can-be-configured-using-the-following-directives"><span class="nav-text">threshold. These thresholds can be configured using the following directives.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lists-are-also-encoded-in-a-special-way-to-save-a-lot-of-space"><span class="nav-text">Lists are also encoded in a special way to save a lot of space.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-number-of-entries-allowed-per-internal-list-node-can-be-specified"><span class="nav-text">The number of entries allowed per internal list node can be specified</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#as-a-fixed-maximum-size-or-a-maximum-number-of-elements"><span class="nav-text">as a fixed maximum size or a maximum number of elements.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#For-a-fixed-maximum-size-use-5-through-1-meaning"><span class="nav-text">For a fixed maximum size, use -5 through -1, meaning:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-max-size-64-Kb-lt-–-not-recommended-for-normal-workloads"><span class="nav-text">-5: max size: 64 Kb  &lt;– not recommended for normal workloads</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-max-size-32-Kb-lt-–-not-recommended"><span class="nav-text">-4: max size: 32 Kb  &lt;– not recommended</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-max-size-16-Kb-lt-–-probably-not-recommended"><span class="nav-text">-3: max size: 16 Kb  &lt;– probably not recommended</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-max-size-8-Kb-lt-–-good"><span class="nav-text">-2: max size: 8 Kb   &lt;– good</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-max-size-4-Kb-lt-–-good"><span class="nav-text">-1: max size: 4 Kb   &lt;– good</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Positive-numbers-mean-store-up-to-exactly-that-number-of-elements"><span class="nav-text">Positive numbers mean store up to exactly that number of elements</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#per-list-node"><span class="nav-text">per list node.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-highest-performing-option-is-usually-2-8-Kb-size-or-1-4-Kb-size"><span class="nav-text">The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-if-your-use-case-is-unique-adjust-the-settings-as-necessary"><span class="nav-text">but if your use case is unique, adjust the settings as necessary.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lists-may-also-be-compressed"><span class="nav-text">Lists may also be compressed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Compress-depth-is-the-number-of-quicklist-ziplist-nodes-from-each-side-of"><span class="nav-text">Compress depth is the number of quicklist ziplist nodes from each side of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-list-to-exclude-from-compression-The-head-and-tail-of-the-list"><span class="nav-text">the list to exclude from compression.  The head and tail of the list</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#are-always-uncompressed-for-fast-push-pop-operations-Settings-are"><span class="nav-text">are always uncompressed for fast push/pop operations.  Settings are:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0-disable-all-list-compression"><span class="nav-text">0: disable all list compression</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-depth-1-means-“don’t-start-compressing-until-after-1-node-into-the-list"><span class="nav-text">1: depth 1 means “don’t start compressing until after 1 node into the list,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#going-from-either-the-head-or-tail”"><span class="nav-text">going from either the head or tail”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#So-head-gt-node-gt-node-gt-…-gt-node-gt-tail"><span class="nav-text">So: [head]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[tail]</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#head-tail-will-always-be-uncompressed-inner-nodes-will-compress"><span class="nav-text">[head], [tail] will always be uncompressed; inner nodes will compress.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-head-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-tail"><span class="nav-text">2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[tail]</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-here-means-don’t-compress-head-or-head-gt-next-or-tail-gt-prev-or-tail"><span class="nav-text">2 here means: don’t compress head or head-&gt;next or tail-&gt;prev or tail,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#but-compress-all-nodes-between-them"><span class="nav-text">but compress all nodes between them.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-head-gt-next-gt-next-gt-node-gt-node-gt-…-gt-node-gt-prev-gt-prev-gt-tail"><span class="nav-text">3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;…-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#etc"><span class="nav-text">etc.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sets-have-a-special-encoding-in-just-one-case-when-a-set-is-composed"><span class="nav-text">Sets have a special encoding in just one case: when a set is composed</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-just-strings-that-happen-to-be-integers-in-radix-10-in-the-range"><span class="nav-text">of just strings that happen to be integers in radix 10 in the range</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#of-64-bit-signed-integers"><span class="nav-text">of 64 bit signed integers.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-following-configuration-setting-sets-the-limit-in-the-size-of-the"><span class="nav-text">The following configuration setting sets the limit in the size of the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#set-in-order-to-use-this-special-memory-saving-encoding"><span class="nav-text">set in order to use this special memory saving encoding.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Similarly-to-hashes-and-lists-sorted-sets-are-also-specially-encoded-in"><span class="nav-text">Similarly to hashes and lists, sorted sets are also specially encoded in</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#order-to-save-a-lot-of-space-This-encoding-is-only-used-when-the-length-and"><span class="nav-text">order to save a lot of space. This encoding is only used when the length and</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#elements-of-a-sorted-set-are-below-the-following-limits"><span class="nav-text">elements of a sorted set are below the following limits:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HyperLogLog-sparse-representation-bytes-limit-The-limit-includes-the"><span class="nav-text">HyperLogLog sparse representation bytes limit. The limit includes the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-bytes-header-When-an-HyperLogLog-using-the-sparse-representation-crosses"><span class="nav-text">16 bytes header. When an HyperLogLog using the sparse representation crosses</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#this-limit-it-is-converted-into-the-dense-representation"><span class="nav-text">this limit, it is converted into the dense representation.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-161"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-value-greater-than-16000-is-totally-useless-since-at-that-point-the"><span class="nav-text">A value greater than 16000 is totally useless, since at that point the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dense-representation-is-more-memory-efficient"><span class="nav-text">dense representation is more memory efficient.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-162"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-suggested-value-is-3000-in-order-to-have-the-benefits-of"><span class="nav-text">The suggested value is ~ 3000 in order to have the benefits of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-space-efficient-encoding-without-slowing-down-too-much-PFADD"><span class="nav-text">the space efficient encoding without slowing down too much PFADD,</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#which-is-O-N-with-the-sparse-encoding-The-value-can-be-raised-to"><span class="nav-text">which is O(N) with the sparse encoding. The value can be raised to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10000-when-CPU-is-not-a-concern-but-space-is-and-the-data-set-is"><span class="nav-text">~ 10000 when CPU is not a concern, but space is, and the data set is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#composed-of-many-HyperLogLogs-with-cardinality-in-the-0-15000-range"><span class="nav-text">composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Active-rehashing-uses-1-millisecond-every-100-milliseconds-of-CPU-time-in"><span class="nav-text">Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#order-to-help-rehashing-the-main-Redis-hash-table-the-one-mapping-top-level"><span class="nav-text">order to help rehashing the main Redis hash table (the one mapping top-level</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#keys-to-values-The-hash-table-implementation-Redis-uses-see-dict-c"><span class="nav-text">keys to values). The hash table implementation Redis uses (see dict.c)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#performs-a-lazy-rehashing-the-more-operation-you-run-into-a-hash-table"><span class="nav-text">performs a lazy rehashing: the more operation you run into a hash table</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-is-rehashing-the-more-rehashing-“steps”-are-performed-so-if-the"><span class="nav-text">that is rehashing, the more rehashing “steps” are performed, so if the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#server-is-idle-the-rehashing-is-never-complete-and-some-more-memory-is-used"><span class="nav-text">server is idle the rehashing is never complete and some more memory is used</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#by-the-hash-table"><span class="nav-text">by the hash table.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-163"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-default-is-to-use-this-millisecond-10-times-every-second-in-order-to"><span class="nav-text">The default is to use this millisecond 10 times every second in order to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#actively-rehash-the-main-dictionaries-freeing-memory-when-possible"><span class="nav-text">actively rehash the main dictionaries, freeing memory when possible.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-164"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#If-unsure"><span class="nav-text">If unsure:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-“activerehashing-no”-if-you-have-hard-latency-requirements-and-it-is"><span class="nav-text">use “activerehashing no” if you have hard latency requirements and it is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#not-a-good-thing-in-your-environment-that-Redis-can-reply-from-time-to-time"><span class="nav-text">not a good thing in your environment that Redis can reply from time to time</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-queries-with-2-milliseconds-delay"><span class="nav-text">to queries with 2 milliseconds delay.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-165"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#use-“activerehashing-yes”-if-you-don’t-have-such-hard-requirements-but"><span class="nav-text">use “activerehashing yes” if you don’t have such hard requirements but</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#want-to-free-memory-asap-when-possible"><span class="nav-text">want to free memory asap when possible.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-client-output-buffer-limits-can-be-used-to-force-disconnection-of-clients"><span class="nav-text">The client output buffer limits can be used to force disconnection of clients</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#that-are-not-reading-data-from-the-server-fast-enough-for-some-reason-a"><span class="nav-text">that are not reading data from the server fast enough for some reason (a</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#common-reason-is-that-a-Pub-Sub-client-can’t-consume-messages-as-fast-as-the"><span class="nav-text">common reason is that a Pub/Sub client can’t consume messages as fast as the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#publisher-can-produce-them"><span class="nav-text">publisher can produce them).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-166"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-limit-can-be-set-differently-for-the-three-different-classes-of-clients"><span class="nav-text">The limit can be set differently for the three different classes of clients:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-167"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#normal-gt-normal-clients-including-MONITOR-clients"><span class="nav-text">normal -&gt; normal clients including MONITOR clients</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#slave-gt-slave-clients"><span class="nav-text">slave  -&gt; slave clients</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pubsub-gt-clients-subscribed-to-at-least-one-pubsub-channel-or-pattern"><span class="nav-text">pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-168"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-syntax-of-every-client-output-buffer-limit-directive-is-the-following"><span class="nav-text">The syntax of every client-output-buffer-limit directive is the following:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-169"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#client-output-buffer-limit"><span class="nav-text">client-output-buffer-limit    </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-170"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#A-client-is-immediately-disconnected-once-the-hard-limit-is-reached-or-if"><span class="nav-text">A client is immediately disconnected once the hard limit is reached, or if</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-soft-limit-is-reached-and-remains-reached-for-the-specified-number-of"><span class="nav-text">the soft limit is reached and remains reached for the specified number of</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#seconds-continuously"><span class="nav-text">seconds (continuously).</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#So-for-instance-if-the-hard-limit-is-32-megabytes-and-the-soft-limit-is"><span class="nav-text">So for instance if the hard limit is 32 megabytes and the soft limit is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-megabytes-10-seconds-the-client-will-get-disconnected-immediately"><span class="nav-text">16 megabytes / 10 seconds, the client will get disconnected immediately</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#if-the-size-of-the-output-buffers-reach-32-megabytes-but-will-also-get"><span class="nav-text">if the size of the output buffers reach 32 megabytes, but will also get</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#disconnected-if-the-client-reaches-16-megabytes-and-continuously-overcomes"><span class="nav-text">disconnected if the client reaches 16 megabytes and continuously overcomes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-limit-for-10-seconds"><span class="nav-text">the limit for 10 seconds.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-171"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-normal-clients-are-not-limited-because-they-don’t-receive-data"><span class="nav-text">By default normal clients are not limited because they don’t receive data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#without-asking-in-a-push-way-but-just-after-a-request-so-only"><span class="nav-text">without asking (in a push way), but just after a request, so only</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#asynchronous-clients-may-create-a-scenario-where-data-is-requested-faster"><span class="nav-text">asynchronous clients may create a scenario where data is requested faster</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#than-it-can-read"><span class="nav-text">than it can read.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-172"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Instead-there-is-a-default-limit-for-pubsub-and-slave-clients-since"><span class="nav-text">Instead there is a default limit for pubsub and slave clients, since</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#subscribers-and-slaves-receive-data-in-a-push-fashion"><span class="nav-text">subscribers and slaves receive data in a push fashion.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-173"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Both-the-hard-or-the-soft-limit-can-be-disabled-by-setting-them-to-zero"><span class="nav-text">Both the hard or the soft limit can be disabled by setting them to zero.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-calls-an-internal-function-to-perform-many-background-tasks-like"><span class="nav-text">Redis calls an internal function to perform many background tasks, like</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#closing-connections-of-clients-in-timeout-purging-expired-keys-that-are"><span class="nav-text">closing connections of clients in timeout, purging expired keys that are</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#never-requested-and-so-forth"><span class="nav-text">never requested, and so forth.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-174"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Not-all-tasks-are-performed-with-the-same-frequency-but-Redis-checks-for"><span class="nav-text">Not all tasks are performed with the same frequency, but Redis checks for</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tasks-to-perform-according-to-the-specified-“hz”-value"><span class="nav-text">tasks to perform according to the specified “hz” value.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-175"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#By-default-“hz”-is-set-to-10-Raising-the-value-will-use-more-CPU-when"><span class="nav-text">By default “hz” is set to 10. Raising the value will use more CPU when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis-is-idle-but-at-the-same-time-will-make-Redis-more-responsive-when"><span class="nav-text">Redis is idle, but at the same time will make Redis more responsive when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#there-are-many-keys-expiring-at-the-same-time-and-timeouts-may-be"><span class="nav-text">there are many keys expiring at the same time, and timeouts may be</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#handled-with-more-precision"><span class="nav-text">handled with more precision.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#-176"><span class="nav-text"></span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-range-is-between-1-and-500-however-a-value-over-100-is-usually-not"><span class="nav-text">The range is between 1 and 500, however a value over 100 is usually not</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#a-good-idea-Most-users-should-use-the-default-of-10-and-raise-this-up-to"><span class="nav-text">a good idea. Most users should use the default of 10 and raise this up to</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#100-only-in-environments-where-very-low-latency-is-required"><span class="nav-text">100 only in environments where very low latency is required.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#When-a-child-rewrites-the-AOF-file-if-the-following-option-is-enabled"><span class="nav-text">When a child rewrites the AOF file, if the following option is enabled</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#the-file-will-be-fsync-ed-every-32-MB-of-data-generated-This-is-useful"><span class="nav-text">the file will be fsync-ed every 32 MB of data generated. This is useful</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#in-order-to-commit-the-file-to-the-disk-more-incrementally-and-avoid"><span class="nav-text">in order to commit the file to the disk more incrementally and avoid</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#big-latency-spikes"><span class="nav-text">big latency spikes.</span></a></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <a href="/">
    <img class="site-author-image" itemprop="image" alt="Lmos"
      src="/images/avatar.jpg">
	</a>
  <p class="site-author-name" itemprop="name">Lmos</p>
  <div class="site-description" itemprop="description">记录爬坑史</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lmos-w" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lmos-w" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/wang-chao-yi-75/activities" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;wang-chao-yi-75&#x2F;activities" rel="noopener" target="_blank"><i class="fa fa-fw fa-heartbeat"></i>知乎</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lmos</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.5.0
  </div>-->
<span id="busuanzi_container_site_uv">
  本站访问次数：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
</span>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  <script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</html>
